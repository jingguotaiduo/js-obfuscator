var a1069_0x3295d9=a1069_0x21b3;(function(_0x42dc7f,_0x3d5cda){var _0x13073e=a1069_0x21b3,_0x3e06e8=_0x42dc7f();while(!![]){try{var _0x19ce0c=-parseInt(_0x13073e(0x190))/0x1*(-parseInt(_0x13073e(0x145))/0x2)+-parseInt(_0x13073e(0x14f))/0x3+parseInt(_0x13073e(0x182))/0x4*(-parseInt(_0x13073e(0x169))/0x5)+-parseInt(_0x13073e(0x15b))/0x6*(parseInt(_0x13073e(0x17e))/0x7)+parseInt(_0x13073e(0x14b))/0x8*(parseInt(_0x13073e(0x138))/0x9)+parseInt(_0x13073e(0x15c))/0xa*(-parseInt(_0x13073e(0x161))/0xb)+parseInt(_0x13073e(0x154))/0xc*(parseInt(_0x13073e(0x162))/0xd);if(_0x19ce0c===_0x3d5cda)break;else _0x3e06e8['push'](_0x3e06e8['shift']());}catch(_0x4517d3){_0x3e06e8['push'](_0x3e06e8['shift']());}}}(a1069_0x3c2d,0x2c533));function a1069_0x21b3(_0x217500,_0x2383e2){var _0x3c2d0d=a1069_0x3c2d();return a1069_0x21b3=function(_0x21b379,_0x4b07b){_0x21b379=_0x21b379-0x134;var _0x22170a=_0x3c2d0d[_0x21b379];return _0x22170a;},a1069_0x21b3(_0x217500,_0x2383e2);}import a1069_0x6fa1a2 from'../../Core/CartographicGeocoderService.js';import a1069_0x32eb8f from'../../Core/defaultValue.js';import a1069_0x503120 from'../../Core/defined.js';import a1069_0xb46e48 from'../../Core/DeveloperError.js';import a1069_0xf9b10b from'../../Core/Event.js';import a1069_0x15d7ca from'../../Core/GeocodeType.js';import a1069_0x52e132 from'../../Core/IonGeocoderService.js';import a1069_0x239a8e from'../../Core/Math.js';import a1069_0x5ea061 from'../../Core/Matrix4.js';import a1069_0x22f558 from'../../Core/Rectangle.js';import a1069_0x4d73d1 from'../../Core/sampleTerrainMostDetailed.js';import a1069_0x4e35c0 from'../../Scene/computeFlyToLocationForRectangle.js';import a1069_0x895d2f from'../../ThirdParty/knockout.js';import a1069_0xd59b53 from'../../ThirdParty/when.js';import a1069_0x158590 from'../createCommand.js';import a1069_0xdb6589 from'../getElement.js';var DEFAULT_HEIGHT=0x3e8;function GeocoderViewModel(_0x25789c){var _0x1e686a=a1069_0x21b3;if(!a1069_0x503120(_0x25789c)||!a1069_0x503120(_0x25789c[_0x1e686a(0x144)]))throw new a1069_0xb46e48(_0x1e686a(0x185));a1069_0x503120(_0x25789c[_0x1e686a(0x192)])?this[_0x1e686a(0x14a)]=_0x25789c['geocoderServices']:this[_0x1e686a(0x14a)]=[new a1069_0x6fa1a2(),new a1069_0x52e132({'scene':_0x25789c[_0x1e686a(0x144)]})];this[_0x1e686a(0x187)]=_0x25789c[_0x1e686a(0x137)],this[_0x1e686a(0x184)]=_0x25789c[_0x1e686a(0x144)],this[_0x1e686a(0x197)]=_0x25789c[_0x1e686a(0x14d)],this[_0x1e686a(0x196)]='',this[_0x1e686a(0x171)]=![],this['_geocodePromise']=undefined,this[_0x1e686a(0x13d)]=new a1069_0xf9b10b(),this[_0x1e686a(0x18c)]=[],this['_selectedSuggestion']=undefined,this[_0x1e686a(0x153)]=!![],this['_handleArrowDown']=handleArrowDown,this[_0x1e686a(0x172)]=handleArrowUp;var _0x39eecc=this;this[_0x1e686a(0x175)]=a1069_0x895d2f['pureComputed'](function(){var _0x42df48=_0x1e686a,_0x369ef3=a1069_0x895d2f[_0x42df48(0x18d)](_0x39eecc,'_suggestions'),_0x971f9b=_0x369ef3()['length']>0x0,_0x108c0a=a1069_0x895d2f[_0x42df48(0x18d)](_0x39eecc,_0x42df48(0x153))();return _0x971f9b&&_0x108c0a;}),this[_0x1e686a(0x16a)]=a1069_0x158590(function(_0x11f235){var _0x26416b=_0x1e686a;_0x11f235=a1069_0x32eb8f(_0x11f235,a1069_0x15d7ca[_0x26416b(0x163)]),_0x39eecc[_0x26416b(0x189)]=![];if(a1069_0x503120(_0x39eecc[_0x26416b(0x164)]))return _0x39eecc[_0x26416b(0x18e)](_0x39eecc[_0x26416b(0x164)]),![];_0x39eecc['hideSuggestions'](),_0x39eecc['isSearchInProgress']?cancelGeocode(_0x39eecc):geocode(_0x39eecc,_0x39eecc[_0x26416b(0x14a)],_0x11f235);}),this[_0x1e686a(0x193)]=function(){var _0x2ec3e1=_0x1e686a;_0x39eecc[_0x2ec3e1(0x164)]=undefined;},this[_0x1e686a(0x19a)]=function(_0x59115b,_0x45d64d){var _0x437bf6=_0x1e686a,_0x43d1d8=_0x45d64d[_0x437bf6(0x152)]==='ArrowDown'||_0x45d64d['key']===_0x437bf6(0x17f)||_0x45d64d['keyCode']===0x28,_0x30dc57=_0x45d64d[_0x437bf6(0x152)]===_0x437bf6(0x198)||_0x45d64d[_0x437bf6(0x152)]==='Up'||_0x45d64d[_0x437bf6(0x188)]===0x26;return(_0x43d1d8||_0x30dc57)&&_0x45d64d[_0x437bf6(0x13a)](),!![];},this[_0x1e686a(0x16f)]=function(_0x4b9524,_0x22c162){var _0x2f0cf4=_0x1e686a,_0x486b9d=_0x22c162['key']===_0x2f0cf4(0x16e)||_0x22c162[_0x2f0cf4(0x152)]==='Down'||_0x22c162[_0x2f0cf4(0x188)]===0x28,_0x382e07=_0x22c162[_0x2f0cf4(0x152)]===_0x2f0cf4(0x198)||_0x22c162['key']==='Up'||_0x22c162['keyCode']===0x26,_0x20f014=_0x22c162['key']===_0x2f0cf4(0x14c)||_0x22c162['keyCode']===0xd;if(_0x382e07)handleArrowUp(_0x39eecc);else{if(_0x486b9d)handleArrowDown(_0x39eecc);else _0x20f014&&_0x39eecc[_0x2f0cf4(0x16a)]();}return!![];},this[_0x1e686a(0x18e)]=function(_0x489648){var _0x32662d=_0x1e686a;_0x39eecc['hideSuggestions'](),_0x39eecc[_0x32662d(0x196)]=_0x489648[_0x32662d(0x140)];var _0x15ff66=_0x489648[_0x32662d(0x15f)];clearSuggestions(_0x39eecc),_0x39eecc[_0x32662d(0x149)](_0x39eecc,_0x15ff66);},this[_0x1e686a(0x139)]=function(){var _0x2ce5da=_0x1e686a;_0x39eecc[_0x2ce5da(0x153)]=![],_0x39eecc[_0x2ce5da(0x164)]=undefined;},this[_0x1e686a(0x160)]=function(){var _0x44462d=_0x1e686a;_0x39eecc[_0x44462d(0x153)]=!![];},this[_0x1e686a(0x13e)]=function(_0x4e812f,_0x86a601){var _0x1b0500=_0x1e686a;_0x4e812f!==_0x39eecc[_0x1b0500(0x164)]&&(_0x39eecc['_selectedSuggestion']=_0x4e812f);},this[_0x1e686a(0x167)]=![],this['autoComplete']=a1069_0x32eb8f(_0x25789c[_0x1e686a(0x15e)],!![]),this[_0x1e686a(0x149)]=a1069_0x32eb8f(_0x25789c['destinationFound'],GeocoderViewModel[_0x1e686a(0x159)]),this[_0x1e686a(0x189)]=![],a1069_0x895d2f[_0x1e686a(0x177)](this,[_0x1e686a(0x196),_0x1e686a(0x171),_0x1e686a(0x167),'_suggestions','_selectedSuggestion',_0x1e686a(0x153),'_focusTextbox']);var _0x42cb5b=a1069_0x895d2f[_0x1e686a(0x18d)](this,'_searchText');_0x42cb5b['extend']({'rateLimit':{'timeout':0x1f4}}),this[_0x1e686a(0x18b)]=_0x42cb5b[_0x1e686a(0x16c)](function(){GeocoderViewModel['_updateSearchSuggestions'](_0x39eecc);}),this[_0x1e686a(0x178)]=undefined,a1069_0x895d2f[_0x1e686a(0x155)](this,_0x1e686a(0x178),{'get':function(){var _0x2d4c8d=_0x1e686a;return this[_0x2d4c8d(0x171)];}}),this[_0x1e686a(0x180)]=undefined,a1069_0x895d2f['defineProperty'](this,_0x1e686a(0x180),{'get':function(){var _0x5b10db=_0x1e686a;if(this[_0x5b10db(0x178)])return _0x5b10db(0x14e);return this[_0x5b10db(0x196)];},'set':function(_0x53d74b){var _0x22f62f=_0x1e686a;if(typeof _0x53d74b!=='string')throw new a1069_0xb46e48(_0x22f62f(0x168));this[_0x22f62f(0x196)]=_0x53d74b;}}),this[_0x1e686a(0x14d)]=undefined,a1069_0x895d2f[_0x1e686a(0x155)](this,'flightDuration',{'get':function(){var _0x2c4626=_0x1e686a;return this[_0x2c4626(0x197)];},'set':function(_0x3eb592){var _0x529aa0=_0x1e686a;if(a1069_0x503120(_0x3eb592)&&_0x3eb592<0x0)throw new a1069_0xb46e48(_0x529aa0(0x176));this[_0x529aa0(0x197)]=_0x3eb592;}});}Object[a1069_0x3295d9(0x174)](GeocoderViewModel[a1069_0x3295d9(0x17b)],{'complete':{'get':function(){var _0x5876a1=a1069_0x3295d9;return this[_0x5876a1(0x13d)];}},'scene':{'get':function(){var _0x2e1481=a1069_0x3295d9;return this[_0x2e1481(0x184)];}},'search':{'get':function(){var _0x346f32=a1069_0x3295d9;return this[_0x346f32(0x16a)];}},'selectedSuggestion':{'get':function(){var _0x3934a5=a1069_0x3295d9;return this[_0x3934a5(0x164)];}},'suggestions':{'get':function(){var _0x1a8983=a1069_0x3295d9;return this[_0x1a8983(0x18c)];}}}),GeocoderViewModel[a1069_0x3295d9(0x17b)][a1069_0x3295d9(0x17a)]=function(){var _0x55008b=a1069_0x3295d9;this['_suggestionSubscription'][_0x55008b(0x16d)]();};function handleArrowUp(_0x5a29a7){var _0x4c145d=a1069_0x3295d9;if(_0x5a29a7[_0x4c145d(0x18c)][_0x4c145d(0x191)]===0x0)return;var _0x136cb8,_0xcf3e03=_0x5a29a7[_0x4c145d(0x18c)][_0x4c145d(0x194)](_0x5a29a7[_0x4c145d(0x164)]);if(_0xcf3e03===-0x1||_0xcf3e03===0x0){_0x5a29a7[_0x4c145d(0x164)]=undefined;return;}_0x136cb8=_0xcf3e03-0x1,_0x5a29a7[_0x4c145d(0x164)]=_0x5a29a7[_0x4c145d(0x18c)][_0x136cb8],GeocoderViewModel[_0x4c145d(0x15d)](_0x5a29a7,_0x136cb8);}function handleArrowDown(_0x34c7e6){var _0x4cbc51=a1069_0x3295d9;if(_0x34c7e6[_0x4cbc51(0x18c)][_0x4cbc51(0x191)]===0x0)return;var _0x515b77=_0x34c7e6['_suggestions'][_0x4cbc51(0x191)],_0x26bfa9=_0x34c7e6[_0x4cbc51(0x18c)][_0x4cbc51(0x194)](_0x34c7e6[_0x4cbc51(0x164)]),_0x3c78c6=(_0x26bfa9+0x1)%_0x515b77;_0x34c7e6[_0x4cbc51(0x164)]=_0x34c7e6[_0x4cbc51(0x18c)][_0x3c78c6],GeocoderViewModel[_0x4cbc51(0x15d)](_0x34c7e6,_0x3c78c6);}function computeFlyToLocationForCartographic(_0x43f45f,_0x5003d1){var _0xb6d08a=a1069_0x3295d9,_0xde72a6=a1069_0x503120(_0x5003d1)?_0x5003d1[_0xb6d08a(0x13c)]:undefined;if(!a1069_0x503120(_0xde72a6))return _0x43f45f[_0xb6d08a(0x17c)]+=DEFAULT_HEIGHT,a1069_0xd59b53[_0xb6d08a(0x148)](_0x43f45f);return a1069_0x4d73d1(_0x5003d1,[_0x43f45f])[_0xb6d08a(0x166)](function(_0x3f417f){var _0x530356=_0xb6d08a;return _0x43f45f=_0x3f417f[0x0],_0x43f45f[_0x530356(0x17c)]+=DEFAULT_HEIGHT,_0x43f45f;});}function flyToDestination(_0x5dd362,_0x35fdea){var _0x2b4463=a1069_0x3295d9,_0x19eac6=_0x5dd362[_0x2b4463(0x184)],_0x5604e2=_0x19eac6['mapProjection'],_0xed9ff0=_0x5604e2[_0x2b4463(0x135)],_0x26715a=_0x19eac6[_0x2b4463(0x134)],_0x4bc8d3=_0x19eac6[_0x2b4463(0x16b)],_0x3d7107=_0x35fdea,_0xce1706;_0x35fdea instanceof a1069_0x22f558?a1069_0x239a8e['equalsEpsilon'](_0x35fdea['south'],_0x35fdea[_0x2b4463(0x186)],a1069_0x239a8e['EPSILON7'])&&a1069_0x239a8e['equalsEpsilon'](_0x35fdea[_0x2b4463(0x13f)],_0x35fdea[_0x2b4463(0x157)],a1069_0x239a8e[_0x2b4463(0x143)])?_0x35fdea=a1069_0x22f558[_0x2b4463(0x179)](_0x35fdea):_0xce1706=a1069_0x4e35c0(_0x35fdea,_0x19eac6):_0x35fdea=_0xed9ff0[_0x2b4463(0x173)](_0x35fdea),!a1069_0x503120(_0xce1706)&&(_0xce1706=computeFlyToLocationForCartographic(_0x35fdea,_0x4bc8d3)),_0xce1706[_0x2b4463(0x166)](function(_0x5e6897){_0x3d7107=_0xed9ff0['cartographicToCartesian'](_0x5e6897);})[_0x2b4463(0x18a)](function(){var _0x57dc0a=_0x2b4463;_0x26715a['flyTo']({'destination':_0x3d7107,'complete':function(){var _0x27526c=a1069_0x21b3;_0x5dd362[_0x27526c(0x13d)]['raiseEvent']();},'duration':_0x5dd362[_0x57dc0a(0x197)],'endTransform':a1069_0x5ea061[_0x57dc0a(0x170)]});});}function chainPromise(_0x3f53b5,_0x5afb63,_0x52eb45,_0x382787){var _0x24e18c=a1069_0x3295d9;return _0x3f53b5[_0x24e18c(0x166)](function(_0x283ce6){var _0x13ac7f=_0x24e18c;if(a1069_0x503120(_0x283ce6)&&_0x283ce6['state']===_0x13ac7f(0x17d)&&_0x283ce6[_0x13ac7f(0x158)][_0x13ac7f(0x191)]>0x0)return _0x283ce6;var _0x574343=_0x5afb63[_0x13ac7f(0x142)](_0x52eb45,_0x382787)['then'](function(_0x15a74e){var _0x52948a=_0x13ac7f;return{'state':_0x52948a(0x17d),'value':_0x15a74e};})['otherwise'](function(_0x4ee919){var _0x85490=_0x13ac7f;return{'state':_0x85490(0x165),'reason':_0x4ee919};});return _0x574343;});}function geocode(_0x1fcd6a,_0xdaf267,_0x47335d){var _0x5e60a2=a1069_0x3295d9,_0x35582f=_0x1fcd6a[_0x5e60a2(0x196)];if(hasOnlyWhitespace(_0x35582f)){_0x1fcd6a[_0x5e60a2(0x160)]();return;}_0x1fcd6a[_0x5e60a2(0x171)]=!![];var _0xd4af33=a1069_0xd59b53['resolve']();for(var _0x25e024=0x0;_0x25e024<_0xdaf267[_0x5e60a2(0x191)];_0x25e024++){_0xd4af33=chainPromise(_0xd4af33,_0xdaf267[_0x25e024],_0x35582f,_0x47335d);}_0x1fcd6a['_geocodePromise']=_0xd4af33,_0xd4af33['then'](function(_0x65b70e){var _0xfccee0=_0x5e60a2;if(_0xd4af33[_0xfccee0(0x183)])return;_0x1fcd6a['_isSearchInProgress']=![];var _0x5a4a5d=_0x65b70e['value'];if(_0x65b70e[_0xfccee0(0x181)]===_0xfccee0(0x17d)&&a1069_0x503120(_0x5a4a5d)&&_0x5a4a5d[_0xfccee0(0x191)]>0x0){_0x1fcd6a['_searchText']=_0x5a4a5d[0x0][_0xfccee0(0x140)],_0x1fcd6a[_0xfccee0(0x149)](_0x1fcd6a,_0x5a4a5d[0x0][_0xfccee0(0x15f)]);return;}_0x1fcd6a[_0xfccee0(0x196)]=_0x35582f+_0xfccee0(0x13b);});}function adjustSuggestionsScroll(_0x54569e,_0x54a159){var _0x16d7db=a1069_0x3295d9,_0x5541fb=a1069_0xdb6589(_0x54569e[_0x16d7db(0x187)]),_0x2bf456=_0x5541fb['getElementsByClassName']('search-results')[0x0],_0x42528d=_0x5541fb[_0x16d7db(0x141)]('li'),_0x29b2c2=_0x42528d[_0x54a159];if(_0x54a159===0x0){_0x2bf456[_0x16d7db(0x18f)]=0x0;return;}var _0x467194=_0x29b2c2[_0x16d7db(0x151)];if(_0x467194+_0x29b2c2[_0x16d7db(0x156)]>_0x2bf456[_0x16d7db(0x156)])_0x2bf456[_0x16d7db(0x18f)]=_0x467194+_0x29b2c2[_0x16d7db(0x156)];else _0x467194<_0x2bf456[_0x16d7db(0x18f)]&&(_0x2bf456['scrollTop']=_0x467194);}function cancelGeocode(_0x54a85d){var _0x119bb2=a1069_0x3295d9;_0x54a85d['_isSearchInProgress']=![],a1069_0x503120(_0x54a85d[_0x119bb2(0x199)])&&(_0x54a85d['_geocodePromise'][_0x119bb2(0x183)]=!![],_0x54a85d['_geocodePromise']=undefined);}function hasOnlyWhitespace(_0x4e2a15){var _0x24578a=a1069_0x3295d9;return/^\s*$/[_0x24578a(0x15a)](_0x4e2a15);}function clearSuggestions(_0x3d6d55){var _0x2230ea=a1069_0x3295d9;a1069_0x895d2f[_0x2230ea(0x18d)](_0x3d6d55,_0x2230ea(0x18c))['removeAll']();}function updateSearchSuggestions(_0x5b1dfe){var _0xb65e5f=a1069_0x3295d9;if(!_0x5b1dfe['autoComplete'])return;var _0x4a70a8=_0x5b1dfe[_0xb65e5f(0x196)];clearSuggestions(_0x5b1dfe);if(hasOnlyWhitespace(_0x4a70a8))return;var _0x4b6d60=a1069_0xd59b53[_0xb65e5f(0x148)]([]);_0x5b1dfe[_0xb65e5f(0x14a)][_0xb65e5f(0x147)](function(_0x2eec9d){var _0x33e412=_0xb65e5f;_0x4b6d60=_0x4b6d60[_0x33e412(0x166)](function(_0x24f71a){var _0x17de1e=_0x33e412;if(_0x24f71a[_0x17de1e(0x191)]>=0x5)return _0x24f71a;return _0x2eec9d[_0x17de1e(0x142)](_0x4a70a8,a1069_0x15d7ca[_0x17de1e(0x150)])['then'](function(_0x5c7258){var _0x3c3734=_0x17de1e;return _0x24f71a=_0x24f71a[_0x3c3734(0x136)](_0x5c7258),_0x24f71a;});});}),_0x4b6d60[_0xb65e5f(0x166)](function(_0x5efeef){var _0x22b366=_0xb65e5f,_0x582294=_0x5b1dfe[_0x22b366(0x18c)];for(var _0xe4c1bb=0x0;_0xe4c1bb<_0x5efeef[_0x22b366(0x191)];_0xe4c1bb++){_0x582294[_0x22b366(0x146)](_0x5efeef[_0xe4c1bb]);}});}GeocoderViewModel[a1069_0x3295d9(0x159)]=flyToDestination,GeocoderViewModel[a1069_0x3295d9(0x195)]=updateSearchSuggestions,GeocoderViewModel[a1069_0x3295d9(0x15d)]=adjustSuggestionsScroll;function a1069_0x3c2d(){var _0xae922c=['then','keepExpanded','value\x20must\x20be\x20a\x20valid\x20string.','945ayEqrw','_searchCommand','terrainProvider','subscribe','dispose','ArrowDown','handleKeyUp','IDENTITY','_isSearchInProgress','_handleArrowUp','cartesianToCartographic','defineProperties','_suggestionsVisible','value\x20must\x20be\x20positive.','track','isSearchInProgress','center','destroy','prototype','height','fulfilled','1253OxMsap','Down','searchText','state','7532LaQCuf','cancel','_scene','options.scene\x20is\x20required.','north','_viewContainer','keyCode','_focusTextbox','always','_suggestionSubscription','_suggestions','getObservable','activateSuggestion','scrollTop','1bfbeCC','length','geocoderServices','deselectSuggestion','indexOf','_updateSearchSuggestions','_searchText','_flightDuration','ArrowUp','_geocodePromise','handleKeyDown','camera','ellipsoid','concat','container','4599vcCKeq','hideSuggestions','preventDefault','\x20(not\x20found)','availability','_complete','handleMouseover','east','displayName','getElementsByTagName','geocode','EPSILON7','scene','566744NxDlJL','push','forEach','resolve','destinationFound','_geocoderServices','48dJtxvL','Enter','flightDuration','Searching...','865431eGIvht','AUTOCOMPLETE','offsetTop','key','_showSuggestions','10529628VmkfXU','defineProperty','clientHeight','west','value','flyToDestination','test','498zMezNJ','3231310bbJccz','_adjustSuggestionsScroll','autocomplete','destination','showSuggestions','11zKIpzu','13lvdpSW','SEARCH','_selectedSuggestion','rejected'];a1069_0x3c2d=function(){return _0xae922c;};return a1069_0x3c2d();}export default GeocoderViewModel;