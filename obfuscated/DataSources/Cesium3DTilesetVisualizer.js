var a277_0x217393=a277_0x479d;(function(_0x555af5,_0x4918fa){var _0x3d1978=a277_0x479d,_0x3bc297=_0x555af5();while(!![]){try{var _0x4539d0=parseInt(_0x3d1978(0x182))/0x1+-parseInt(_0x3d1978(0x17b))/0x2+-parseInt(_0x3d1978(0x166))/0x3+parseInt(_0x3d1978(0x18a))/0x4*(-parseInt(_0x3d1978(0x15f))/0x5)+parseInt(_0x3d1978(0x180))/0x6+parseInt(_0x3d1978(0x160))/0x7+parseInt(_0x3d1978(0x177))/0x8;if(_0x4539d0===_0x4918fa)break;else _0x3bc297['push'](_0x3bc297['shift']());}catch(_0xd10923){_0x3bc297['push'](_0x3bc297['shift']());}}}(a277_0x4412,0x563f6));import a277_0x2ae035 from'../Core/AssociativeArray.js';import a277_0x4c11a7 from'../Core/BoundingSphere.js';import a277_0x6f09e from'../Core/defined.js';function a277_0x4412(){var _0x4c8359=['length','147350OgOftJ','url','entity\x20is\x20required.','maximumScreenSpaceError','otherwise','3562140vhOklY','getValueOrDefault','539507rBHEAP','values','remove','computeModelMatrix','_tilesetHash','add','_primitives','getBoundingSphere','5940ynXfLl','_onCollectionChanged','result\x20is\x20required.','isDestroyed','isAvailable','modelMatrix','prototype','loadFail','2105mgLUDR','778505sciwpd','getValueOrUndefined','removeEventListener','boundingSphere','set','_entityCollection','1409139HeqwPU','ready','_show','primitives','_uri','destroy','collectionChanged','show','readyPromise','clone','addEventListener','tilesetPrimitive','time\x20is\x20required.','FAILED','_entitiesToVisualize','removeAndDestroy','DONE','2219448WKgIkx','update','_tileset'];a277_0x4412=function(){return _0x4c8359;};return a277_0x4412();}import a277_0x2c29aa from'../Core/destroyObject.js';import a277_0x551745 from'../Core/DeveloperError.js';import a277_0x30b8bb from'../Core/Matrix4.js';import a277_0x436ab3 from'../Core/Resource.js';import a277_0x174ea1 from'../Scene/Cesium3DTileset.js';import a277_0x3bd40f from'./BoundingSphereState.js';import a277_0x20ccef from'./Property.js';var modelMatrixScratch=new a277_0x30b8bb();function Cesium3DTilesetVisualizer(_0x5301f8,_0x69465f){var _0x237f6c=a277_0x479d;if(!a277_0x6f09e(_0x5301f8))throw new a277_0x551745('scene\x20is\x20required.');if(!a277_0x6f09e(_0x69465f))throw new a277_0x551745('entityCollection\x20is\x20required.');_0x69465f[_0x237f6c(0x16c)][_0x237f6c(0x170)](Cesium3DTilesetVisualizer[_0x237f6c(0x190)][_0x237f6c(0x18b)],this),this['_scene']=_0x5301f8,this[_0x237f6c(0x188)]=_0x5301f8[_0x237f6c(0x169)],this[_0x237f6c(0x165)]=_0x69465f,this[_0x237f6c(0x186)]={},this[_0x237f6c(0x174)]=new a277_0x2ae035(),this[_0x237f6c(0x18b)](_0x69465f,_0x69465f[_0x237f6c(0x183)],[],[]);}function a277_0x479d(_0x54b6b8,_0x195c4d){var _0x44125b=a277_0x4412();return a277_0x479d=function(_0x479d87,_0x1c88cd){_0x479d87=_0x479d87-0x15e;var _0x435915=_0x44125b[_0x479d87];return _0x435915;},a277_0x479d(_0x54b6b8,_0x195c4d);}Cesium3DTilesetVisualizer['prototype'][a277_0x217393(0x178)]=function(_0x58b47c){var _0x5d60f9=a277_0x217393;if(!a277_0x6f09e(_0x58b47c))throw new a277_0x551745(_0x5d60f9(0x172));var _0x49f662=this[_0x5d60f9(0x174)][_0x5d60f9(0x183)],_0x435b26=this['_tilesetHash'],_0x534f61=this[_0x5d60f9(0x188)];for(var _0x223bf9=0x0,_0xc3cbb7=_0x49f662[_0x5d60f9(0x17a)];_0x223bf9<_0xc3cbb7;_0x223bf9++){var _0x1f655d=_0x49f662[_0x223bf9],_0x538573=_0x1f655d['_tileset'],_0x16226b,_0x82d5bb=_0x435b26[_0x1f655d['id']],_0xa755c8=_0x1f655d['isShowing']&&_0x1f655d[_0x5d60f9(0x18e)](_0x58b47c)&&a277_0x20ccef[_0x5d60f9(0x181)](_0x538573[_0x5d60f9(0x168)],_0x58b47c,!![]),_0xca4b8c;_0xa755c8&&(_0xca4b8c=_0x1f655d[_0x5d60f9(0x185)](_0x58b47c,modelMatrixScratch),_0x16226b=a277_0x436ab3['createIfNeeded'](a277_0x20ccef[_0x5d60f9(0x161)](_0x538573[_0x5d60f9(0x16a)],_0x58b47c)));if(!_0xa755c8){a277_0x6f09e(_0x82d5bb)&&(_0x82d5bb[_0x5d60f9(0x171)][_0x5d60f9(0x16d)]=![]);continue;}var _0x55bbd3=a277_0x6f09e(_0x82d5bb)?_0x82d5bb[_0x5d60f9(0x171)]:undefined;(!a277_0x6f09e(_0x55bbd3)||_0x16226b[_0x5d60f9(0x17c)]!==_0x82d5bb[_0x5d60f9(0x17c)])&&(a277_0x6f09e(_0x55bbd3)&&(_0x534f61[_0x5d60f9(0x175)](_0x55bbd3),delete _0x435b26[_0x1f655d['id']]),_0x55bbd3=new a277_0x174ea1({'url':_0x16226b}),_0x55bbd3['id']=_0x1f655d,_0x534f61[_0x5d60f9(0x187)](_0x55bbd3),_0x82d5bb={'tilesetPrimitive':_0x55bbd3,'url':_0x16226b[_0x5d60f9(0x17c)],'loadFail':![]},_0x435b26[_0x1f655d['id']]=_0x82d5bb,checkLoad(_0x55bbd3,_0x1f655d,_0x435b26)),_0x55bbd3['show']=!![],a277_0x6f09e(_0xca4b8c)&&(_0x55bbd3[_0x5d60f9(0x18f)]=_0xca4b8c),_0x55bbd3[_0x5d60f9(0x17e)]=a277_0x20ccef['getValueOrDefault'](_0x538573[_0x5d60f9(0x17e)],_0x58b47c,_0x55bbd3['maximumScreenSpaceError']);}return!![];},Cesium3DTilesetVisualizer[a277_0x217393(0x190)][a277_0x217393(0x18d)]=function(){return![];},Cesium3DTilesetVisualizer['prototype'][a277_0x217393(0x16b)]=function(){var _0x52f369=a277_0x217393;this[_0x52f369(0x165)][_0x52f369(0x16c)][_0x52f369(0x162)](Cesium3DTilesetVisualizer[_0x52f369(0x190)]['_onCollectionChanged'],this);var _0x3605e5=this[_0x52f369(0x174)]['values'],_0x1df945=this['_tilesetHash'],_0x5eb163=this['_primitives'];for(var _0x5645ea=_0x3605e5[_0x52f369(0x17a)]-0x1;_0x5645ea>-0x1;_0x5645ea--){removeTileset(this,_0x3605e5[_0x5645ea],_0x1df945,_0x5eb163);}return a277_0x2c29aa(this);},Cesium3DTilesetVisualizer[a277_0x217393(0x190)][a277_0x217393(0x189)]=function(_0x109399,_0x39250d){var _0x21cf7e=a277_0x217393;if(!a277_0x6f09e(_0x109399))throw new a277_0x551745(_0x21cf7e(0x17d));if(!a277_0x6f09e(_0x39250d))throw new a277_0x551745(_0x21cf7e(0x18c));var _0x388837=this[_0x21cf7e(0x186)][_0x109399['id']];if(!a277_0x6f09e(_0x388837)||_0x388837[_0x21cf7e(0x15e)])return a277_0x3bd40f[_0x21cf7e(0x173)];var _0x5b8075=_0x388837[_0x21cf7e(0x171)];if(!a277_0x6f09e(_0x5b8075)||!_0x5b8075[_0x21cf7e(0x16d)])return a277_0x3bd40f[_0x21cf7e(0x173)];if(!_0x5b8075[_0x21cf7e(0x167)])return a277_0x3bd40f['PENDING'];return a277_0x4c11a7[_0x21cf7e(0x16f)](_0x5b8075[_0x21cf7e(0x163)],_0x39250d),a277_0x3bd40f[_0x21cf7e(0x176)];},Cesium3DTilesetVisualizer[a277_0x217393(0x190)]['_onCollectionChanged']=function(_0x919ceb,_0x5782bd,_0x2ed407,_0x22f377){var _0x1ab3c3=a277_0x217393,_0x20d410,_0x1ad3c6,_0x5730f1=this[_0x1ab3c3(0x174)],_0x4255be=this[_0x1ab3c3(0x186)],_0x1af94d=this[_0x1ab3c3(0x188)];for(_0x20d410=_0x5782bd[_0x1ab3c3(0x17a)]-0x1;_0x20d410>-0x1;_0x20d410--){_0x1ad3c6=_0x5782bd[_0x20d410],a277_0x6f09e(_0x1ad3c6[_0x1ab3c3(0x179)])&&_0x5730f1[_0x1ab3c3(0x164)](_0x1ad3c6['id'],_0x1ad3c6);}for(_0x20d410=_0x22f377['length']-0x1;_0x20d410>-0x1;_0x20d410--){_0x1ad3c6=_0x22f377[_0x20d410],a277_0x6f09e(_0x1ad3c6[_0x1ab3c3(0x179)])?_0x5730f1[_0x1ab3c3(0x164)](_0x1ad3c6['id'],_0x1ad3c6):(removeTileset(this,_0x1ad3c6,_0x4255be,_0x1af94d),_0x5730f1['remove'](_0x1ad3c6['id']));}for(_0x20d410=_0x2ed407[_0x1ab3c3(0x17a)]-0x1;_0x20d410>-0x1;_0x20d410--){_0x1ad3c6=_0x2ed407[_0x20d410],removeTileset(this,_0x1ad3c6,_0x4255be,_0x1af94d),_0x5730f1[_0x1ab3c3(0x184)](_0x1ad3c6['id']);}};function removeTileset(_0x30aba8,_0x2896cd,_0x35cdf2,_0x4dae14){var _0x3c3e9f=a277_0x217393,_0x399f4c=_0x35cdf2[_0x2896cd['id']];a277_0x6f09e(_0x399f4c)&&(_0x4dae14[_0x3c3e9f(0x175)](_0x399f4c[_0x3c3e9f(0x171)]),delete _0x35cdf2[_0x2896cd['id']]);}function checkLoad(_0x584437,_0x37d6f2,_0x4fbc6c){var _0x4ba8bf=a277_0x217393;_0x584437[_0x4ba8bf(0x16e)][_0x4ba8bf(0x17f)](function(_0x2686d6){var _0x47ddda=_0x4ba8bf;console['error'](_0x2686d6),_0x4fbc6c[_0x37d6f2['id']][_0x47ddda(0x15e)]=!![];});}export default Cesium3DTilesetVisualizer;