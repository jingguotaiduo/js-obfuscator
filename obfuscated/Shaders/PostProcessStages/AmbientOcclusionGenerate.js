var a979_0x387f60=a979_0x101a;function a979_0x101a(_0x566052,_0x581470){var _0x13862a=a979_0x1386();return a979_0x101a=function(_0x101a96,_0x27f4e2){_0x101a96=_0x101a96-0x1c9;var _0x5b1800=_0x13862a[_0x101a96];return _0x5b1800;},a979_0x101a(_0x566052,_0x581470);}(function(_0x26b6da,_0x2bf96f){var _0x45884e=a979_0x101a,_0x57d1af=_0x26b6da();while(!![]){try{var _0x523c6e=parseInt(_0x45884e(0x1d2))/0x1*(-parseInt(_0x45884e(0x1d1))/0x2)+-parseInt(_0x45884e(0x1d6))/0x3*(parseInt(_0x45884e(0x1cd))/0x4)+-parseInt(_0x45884e(0x1d5))/0x5*(-parseInt(_0x45884e(0x1cb))/0x6)+-parseInt(_0x45884e(0x1c9))/0x7*(-parseInt(_0x45884e(0x1d3))/0x8)+-parseInt(_0x45884e(0x1ce))/0x9*(parseInt(_0x45884e(0x1d0))/0xa)+parseInt(_0x45884e(0x1cf))/0xb*(parseInt(_0x45884e(0x1cc))/0xc)+parseInt(_0x45884e(0x1d4))/0xd*(parseInt(_0x45884e(0x1ca))/0xe);if(_0x523c6e===_0x2bf96f)break;else _0x57d1af['push'](_0x57d1af['shift']());}catch(_0x50081b){_0x57d1af['push'](_0x57d1af['shift']());}}}(a979_0x1386,0x471f0));function a979_0x1386(){var _0x1b0926=['278423AUDYwj','313784CjaMsS','13FELkzT','304335CixsHR','61023LdIdOH','uniform\x20sampler2D\x20randomTexture;\x0auniform\x20sampler2D\x20depthTexture;\x0auniform\x20float\x20intensity;\x0auniform\x20float\x20bias;\x0auniform\x20float\x20lengthCap;\x0auniform\x20float\x20stepSize;\x0auniform\x20float\x20frustumLength;\x0avarying\x20vec2\x20v_textureCoordinates;\x0avec4\x20clipToEye(vec2\x20uv,\x20float\x20depth)\x0a{\x0avec2\x20xy\x20=\x20vec2((uv.x\x20*\x202.0\x20-\x201.0),\x20((1.0\x20-\x20uv.y)\x20*\x202.0\x20-\x201.0));\x0avec4\x20posEC\x20=\x20czm_inverseProjection\x20*\x20vec4(xy,\x20depth,\x201.0);\x0aposEC\x20=\x20posEC\x20/\x20posEC.w;\x0areturn\x20posEC;\x0a}\x0avec3\x20getNormalXEdge(vec3\x20posInCamera,\x20float\x20depthU,\x20float\x20depthD,\x20float\x20depthL,\x20float\x20depthR,\x20vec2\x20pixelSize)\x0a{\x0avec4\x20posInCameraUp\x20=\x20clipToEye(v_textureCoordinates\x20-\x20vec2(0.0,\x20pixelSize.y),\x20depthU);\x0avec4\x20posInCameraDown\x20=\x20clipToEye(v_textureCoordinates\x20+\x20vec2(0.0,\x20pixelSize.y),\x20depthD);\x0avec4\x20posInCameraLeft\x20=\x20clipToEye(v_textureCoordinates\x20-\x20vec2(pixelSize.x,\x200.0),\x20depthL);\x0avec4\x20posInCameraRight\x20=\x20clipToEye(v_textureCoordinates\x20+\x20vec2(pixelSize.x,\x200.0),\x20depthR);\x0avec3\x20up\x20=\x20posInCamera.xyz\x20-\x20posInCameraUp.xyz;\x0avec3\x20down\x20=\x20posInCameraDown.xyz\x20-\x20posInCamera.xyz;\x0avec3\x20left\x20=\x20posInCamera.xyz\x20-\x20posInCameraLeft.xyz;\x0avec3\x20right\x20=\x20posInCameraRight.xyz\x20-\x20posInCamera.xyz;\x0avec3\x20DX\x20=\x20length(left)\x20<\x20length(right)\x20?\x20left\x20:\x20right;\x0avec3\x20DY\x20=\x20length(up)\x20<\x20length(down)\x20?\x20up\x20:\x20down;\x0areturn\x20normalize(cross(DY,\x20DX));\x0a}\x0avoid\x20main(void)\x0a{\x0afloat\x20depth\x20=\x20czm_readDepth(depthTexture,\x20v_textureCoordinates);\x0avec4\x20posInCamera\x20=\x20clipToEye(v_textureCoordinates,\x20depth);\x0aif\x20(posInCamera.z\x20>\x20frustumLength)\x0a{\x0agl_FragColor\x20=\x20vec4(1.0);\x0areturn;\x0a}\x0avec2\x20pixelSize\x20=\x20czm_pixelRatio\x20/\x20czm_viewport.zw;\x0afloat\x20depthU\x20=\x20czm_readDepth(depthTexture,\x20v_textureCoordinates\x20-\x20vec2(0.0,\x20pixelSize.y));\x0afloat\x20depthD\x20=\x20czm_readDepth(depthTexture,\x20v_textureCoordinates\x20+\x20vec2(0.0,\x20pixelSize.y));\x0afloat\x20depthL\x20=\x20czm_readDepth(depthTexture,\x20v_textureCoordinates\x20-\x20vec2(pixelSize.x,\x200.0));\x0afloat\x20depthR\x20=\x20czm_readDepth(depthTexture,\x20v_textureCoordinates\x20+\x20vec2(pixelSize.x,\x200.0));\x0avec3\x20normalInCamera\x20=\x20getNormalXEdge(posInCamera.xyz,\x20depthU,\x20depthD,\x20depthL,\x20depthR,\x20pixelSize);\x0afloat\x20ao\x20=\x200.0;\x0avec2\x20sampleDirection\x20=\x20vec2(1.0,\x200.0);\x0afloat\x20gapAngle\x20=\x2090.0\x20*\x20czm_radiansPerDegree;\x0afloat\x20randomVal\x20=\x20texture2D(randomTexture,\x20v_textureCoordinates).x;\x0afor\x20(int\x20i\x20=\x200;\x20i\x20<\x204;\x20i++)\x0a{\x0afloat\x20newGapAngle\x20=\x20gapAngle\x20*\x20(float(i)\x20+\x20randomVal);\x0afloat\x20cosVal\x20=\x20cos(newGapAngle);\x0afloat\x20sinVal\x20=\x20sin(newGapAngle);\x0avec2\x20rotatedSampleDirection\x20=\x20vec2(cosVal\x20*\x20sampleDirection.x\x20-\x20sinVal\x20*\x20sampleDirection.y,\x20sinVal\x20*\x20sampleDirection.x\x20+\x20cosVal\x20*\x20sampleDirection.y);\x0afloat\x20localAO\x20=\x200.0;\x0afloat\x20localStepSize\x20=\x20stepSize;\x0afor\x20(int\x20j\x20=\x200;\x20j\x20<\x206;\x20j++)\x0a{\x0avec2\x20newCoords\x20=\x20v_textureCoordinates\x20+\x20rotatedSampleDirection\x20*\x20localStepSize\x20*\x20pixelSize;\x0aif(newCoords.x\x20>\x201.0\x20||\x20newCoords.y\x20>\x201.0\x20||\x20newCoords.x\x20<\x200.0\x20||\x20newCoords.y\x20<\x200.0)\x0a{\x0abreak;\x0a}\x0afloat\x20stepDepthInfo\x20=\x20czm_readDepth(depthTexture,\x20newCoords);\x0avec4\x20stepPosInCamera\x20=\x20clipToEye(newCoords,\x20stepDepthInfo);\x0avec3\x20diffVec\x20=\x20stepPosInCamera.xyz\x20-\x20posInCamera.xyz;\x0afloat\x20len\x20=\x20length(diffVec);\x0aif\x20(len\x20>\x20lengthCap)\x0a{\x0abreak;\x0a}\x0afloat\x20dotVal\x20=\x20clamp(dot(normalInCamera,\x20normalize(diffVec)),\x200.0,\x201.0\x20);\x0afloat\x20weight\x20=\x20len\x20/\x20lengthCap;\x0aweight\x20=\x201.0\x20-\x20weight\x20*\x20weight;\x0aif\x20(dotVal\x20<\x20bias)\x0a{\x0adotVal\x20=\x200.0;\x0a}\x0alocalAO\x20=\x20max(localAO,\x20dotVal\x20*\x20weight);\x0alocalStepSize\x20+=\x20stepSize;\x0a}\x0aao\x20+=\x20localAO;\x0a}\x0aao\x20/=\x204.0;\x0aao\x20=\x201.0\x20-\x20clamp(ao,\x200.0,\x201.0);\x0aao\x20=\x20pow(ao,\x20intensity);\x0agl_FragColor\x20=\x20vec4(vec3(ao),\x201.0);\x0a}\x0a','28JBuDOO','2650186vcMYGB','6yfcsFA','759804jVNtyM','4qMyAfz','765fBohwJ','99LzhrSs','45510kAUgcv','2SOZDYD'];a979_0x1386=function(){return _0x1b0926;};return a979_0x1386();}export default a979_0x387f60(0x1d7);