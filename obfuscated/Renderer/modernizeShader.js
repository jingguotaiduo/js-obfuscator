(function(_0x325b74,_0x146a58){var _0x2eead5=a393_0x417b,_0x6f3079=_0x325b74();while(!![]){try{var _0x197a97=-parseInt(_0x2eead5(0x7a))/0x1*(-parseInt(_0x2eead5(0xa2))/0x2)+parseInt(_0x2eead5(0x8a))/0x3*(-parseInt(_0x2eead5(0x84))/0x4)+parseInt(_0x2eead5(0x82))/0x5*(-parseInt(_0x2eead5(0x86))/0x6)+parseInt(_0x2eead5(0x7f))/0x7+-parseInt(_0x2eead5(0x95))/0x8+parseInt(_0x2eead5(0xa0))/0x9*(parseInt(_0x2eead5(0x77))/0xa)+-parseInt(_0x2eead5(0x93))/0xb*(-parseInt(_0x2eead5(0x85))/0xc);if(_0x197a97===_0x146a58)break;else _0x6f3079['push'](_0x6f3079['shift']());}catch(_0x3efd73){_0x6f3079['push'](_0x6f3079['shift']());}}}(a393_0x1f81,0x91523));import a393_0x670d60 from'../Core/defined.js';import a393_0x2c3d96 from'../Core/DeveloperError.js';function modernizeShader(_0x5bdef6,_0x4e7ea1){var _0x28292b=a393_0x417b,_0xe507c8=/#define OUTPUT_DECLARATION/,_0x33a731=_0x5bdef6[_0x28292b(0x9e)]('\x0a');if(/#version 300 es/g['test'](_0x5bdef6))return _0x5bdef6;var _0x17e088=-0x1,_0x2cf0aa,_0x3f754d;for(_0x2cf0aa=0x0;_0x2cf0aa<_0x33a731[_0x28292b(0x8f)];++_0x2cf0aa){_0x3f754d=_0x33a731[_0x2cf0aa];if(_0xe507c8['test'](_0x3f754d)){_0x17e088=_0x2cf0aa;break;}}if(_0x17e088===-0x1)throw new a393_0x2c3d96(_0x28292b(0xa1));var _0x2196c8=[];for(_0x2cf0aa=0x0;_0x2cf0aa<0xa;_0x2cf0aa++){var _0xd407d2=_0x28292b(0x87)+_0x2cf0aa+'\x5c]',_0x52f5a8='czm_out'+_0x2cf0aa,_0x209468=new RegExp(_0xd407d2,'g');_0x209468[_0x28292b(0x96)](_0x5bdef6)&&(setAdd(_0x52f5a8,_0x2196c8),replaceInSourceString(_0xd407d2,_0x52f5a8,_0x33a731),_0x33a731['splice'](_0x17e088,0x0,_0x28292b(0x92)+_0x2cf0aa+')\x20out\x20vec4\x20'+_0x52f5a8+';'),_0x17e088+=0x1);}var _0x5b1b7a='czm_fragColor';findInSource(_0x28292b(0x9f),_0x33a731)&&(setAdd(_0x5b1b7a,_0x2196c8),replaceInSourceString(_0x28292b(0x9f),_0x5b1b7a,_0x33a731),_0x33a731['splice'](_0x17e088,0x0,_0x28292b(0x91)),_0x17e088+=0x1);var _0x392142=getVariablePreprocessorBranch(_0x2196c8,_0x33a731),_0x2f123a={};for(_0x2cf0aa=0x0;_0x2cf0aa<_0x33a731[_0x28292b(0x8f)];_0x2cf0aa++){_0x3f754d=_0x33a731[_0x2cf0aa];for(var _0x2170cd in _0x392142){if(_0x392142[_0x28292b(0x7c)](_0x2170cd)){var _0x3ff809=new RegExp(_0x28292b(0x76)+_0x2170cd+')[^]+','g');_0x3ff809[_0x28292b(0x96)](_0x3f754d)&&(_0x2f123a[_0x3f754d]=_0x2170cd);}}}for(var _0x230bd6 in _0x2f123a){if(_0x2f123a['hasOwnProperty'](_0x230bd6)){var _0x2f029b=_0x2f123a[_0x230bd6],_0x3dab9b=_0x33a731[_0x28292b(0x9a)](_0x230bd6),_0x12cd88=_0x392142[_0x2f029b],_0x1184f1=_0x12cd88[_0x28292b(0x8f)],_0x5603cd;for(_0x5603cd=0x0;_0x5603cd<_0x1184f1;_0x5603cd++){_0x33a731[_0x28292b(0x8c)](_0x3dab9b,0x0,_0x12cd88[_0x5603cd]);}_0x3dab9b+=_0x1184f1+0x1;for(_0x5603cd=_0x1184f1-0x1;_0x5603cd>=0x0;_0x5603cd--){_0x33a731[_0x28292b(0x8c)](_0x3dab9b,0x0,_0x28292b(0x99)+_0x12cd88[_0x5603cd]);}}}var _0xb6b5c2=_0x28292b(0x8d),_0x34568a=_0x28292b(0x81)+_0xb6b5c2,_0x4f9379=_0x28292b(0x8e),_0x696d0e=![];for(_0x2cf0aa=0x0;_0x2cf0aa<_0x33a731[_0x28292b(0x8f)];_0x2cf0aa++){if(/#version/[_0x28292b(0x96)](_0x33a731[_0x2cf0aa])){_0x33a731[_0x2cf0aa]=_0x4f9379,_0x696d0e=!![];break;}}return!_0x696d0e&&_0x33a731[_0x28292b(0x8c)](0x0,0x0,_0x4f9379),_0x33a731['splice'](0x1,0x0,_0x34568a),removeExtension('EXT_draw_buffers',_0xb6b5c2,_0x33a731),removeExtension(_0x28292b(0x83),_0xb6b5c2,_0x33a731),removeExtension('OES_standard_derivatives',_0xb6b5c2,_0x33a731),replaceInSourceString(_0x28292b(0x7e),_0x28292b(0x79),_0x33a731),replaceInSourceString(_0x28292b(0x80),_0x28292b(0x79),_0x33a731),replaceInSourceString(_0x28292b(0x98),_0x28292b(0x79),_0x33a731),replaceInSourceString('gl_FragDepthEXT',_0x28292b(0x9c),_0x33a731),_0x4e7ea1?replaceInSourceString(_0x28292b(0x97),'in',_0x33a731):(replaceInSourceString(_0x28292b(0x9d),'in',_0x33a731),replaceInSourceString(_0x28292b(0x97),_0x28292b(0x78),_0x33a731)),compileSource(_0x33a731);}function replaceInSourceString(_0x3e7a65,_0x10f30a,_0x2504d8){var _0x5b3736=a393_0x417b,_0x3c5756=_0x5b3736(0x88)+_0x3e7a65+_0x5b3736(0x90),_0x5a2bdd=new RegExp(_0x3c5756,'g'),_0x5998a3=_0x2504d8[_0x5b3736(0x8f)];for(var _0x3af34a=0x0;_0x3af34a<_0x5998a3;++_0x3af34a){var _0x3bb425=_0x2504d8[_0x3af34a];_0x2504d8[_0x3af34a]=_0x3bb425['replace'](_0x5a2bdd,'$1'+_0x10f30a+'$3');}}function replaceInSourceRegex(_0x5d9ad9,_0x55f4e3,_0x1a2d7c){var _0x289f71=a393_0x417b,_0x5890a2=_0x1a2d7c[_0x289f71(0x8f)];for(var _0x4ee8b1=0x0;_0x4ee8b1<_0x5890a2;++_0x4ee8b1){var _0x42645a=_0x1a2d7c[_0x4ee8b1];_0x1a2d7c[_0x4ee8b1]=_0x42645a[_0x289f71(0xa4)](_0x5d9ad9,_0x55f4e3);}}function findInSource(_0x40470a,_0x4801ba){var _0x3cc8f4=a393_0x417b,_0x175788=_0x3cc8f4(0x88)+_0x40470a+_0x3cc8f4(0x90),_0x2a4194=new RegExp(_0x175788,'g'),_0x5b0268=_0x4801ba[_0x3cc8f4(0x8f)];for(var _0x3c78c8=0x0;_0x3c78c8<_0x5b0268;++_0x3c78c8){var _0x3a1947=_0x4801ba[_0x3c78c8];if(_0x2a4194[_0x3cc8f4(0x96)](_0x3a1947))return!![];}return![];}function a393_0x417b(_0xc41966,_0x5c815d){var _0x1f81a0=a393_0x1f81();return a393_0x417b=function(_0x417bb2,_0x3c5e4f){_0x417bb2=_0x417bb2-0x76;var _0x34d696=_0x1f81a0[_0x417bb2];return _0x34d696;},a393_0x417b(_0xc41966,_0x5c815d);}function compileSource(_0x13858f){var _0x2fff66=a393_0x417b,_0x4d2154='',_0x4bac4b=_0x13858f[_0x2fff66(0x8f)];for(var _0x1fc562=0x0;_0x1fc562<_0x4bac4b;++_0x1fc562){_0x4d2154+=_0x13858f[_0x1fc562]+'\x0a';}return _0x4d2154;}function setAdd(_0x337006,_0xd11f7a){var _0x4fa72a=a393_0x417b;_0xd11f7a[_0x4fa72a(0x9a)](_0x337006)===-0x1&&_0xd11f7a['push'](_0x337006);}function getVariablePreprocessorBranch(_0x486c9a,_0x5213d2){var _0x2abf16=a393_0x417b,_0x371651={},_0x4fb5aa=_0x486c9a[_0x2abf16(0x8f)],_0x260399=[];for(var _0x1f9292=0x0;_0x1f9292<_0x5213d2['length'];++_0x1f9292){var _0x234290=_0x5213d2[_0x1f9292],_0x4b2290=/(#ifdef|#if)/g[_0x2abf16(0x96)](_0x234290),_0x17283d=/#else/g['test'](_0x234290),_0xfd95d6=/#endif/g[_0x2abf16(0x96)](_0x234290);if(_0x4b2290)_0x260399[_0x2abf16(0x9b)](_0x234290);else{if(_0x17283d){var _0x54ff07=_0x260399[_0x260399[_0x2abf16(0x8f)]-0x1],_0x241ebd=_0x54ff07[_0x2abf16(0xa4)]('ifdef',_0x2abf16(0x8b));/if/g[_0x2abf16(0x96)](_0x241ebd)&&(_0x241ebd=_0x241ebd['replace'](/(#if\s+)(\S*)([^]*)/,'$1!($2)$3')),_0x260399[_0x2abf16(0x94)](),_0x260399[_0x2abf16(0x9b)](_0x241ebd);}else{if(_0xfd95d6)_0x260399[_0x2abf16(0x94)]();else{if(!/layout/g[_0x2abf16(0x96)](_0x234290))for(var _0x2d1daa=0x0;_0x2d1daa<_0x4fb5aa;++_0x2d1daa){var _0x332a88=_0x486c9a[_0x2d1daa];_0x234290[_0x2abf16(0x9a)](_0x332a88)!==-0x1&&(!a393_0x670d60(_0x371651[_0x332a88])?_0x371651[_0x332a88]=_0x260399[_0x2abf16(0x7d)]():_0x371651[_0x332a88]=_0x371651[_0x332a88][_0x2abf16(0x89)](function(_0x191e97){return _0x260399['indexOf'](_0x191e97)>=0x0;}));}}}}}return _0x371651;}function a393_0x1f81(){var _0x306569=['ifndef','splice','WEBGL_2','#version\x20300\x20es','length',')($|[^\x5cw])','layout(location\x20=\x200)\x20out\x20vec4\x20czm_fragColor;','layout(location\x20=\x20','374vjZftS','pop','8698304OIFvfg','test','varying','textureCube','#endif\x20//','indexOf','push','gl_FragDepth','attribute','split','gl_FragColor','27198sZgDtf','Could\x20not\x20find\x20a\x20#define\x20OUTPUT_DECLARATION!','10YrZZYJ','#extension\x5cs+GL_','replace','(layout)[^]+(out)[^]+(','3480zdZFdC','out','texture','134382yqnhjY','\x5cs+:\x5cs+[a-zA-Z0-9]+\x5cs*$','hasOwnProperty','slice','texture2D','5348651yJHUXU','texture3D','#define\x20','5XCKNGV','EXT_frag_depth','13820ElNEwR','42792cDuuPn','3671850kuAAxT','gl_FragData\x5c[','(^|[^\x5cw])(','filter','273gcDdUk'];a393_0x1f81=function(){return _0x306569;};return a393_0x1f81();}function removeExtension(_0x2af97d,_0x6b3407,_0x4c79e){var _0x343ffa=a393_0x417b,_0x283852=_0x343ffa(0xa3)+_0x2af97d+_0x343ffa(0x7b);replaceInSourceRegex(new RegExp(_0x283852,'g'),'',_0x4c79e),replaceInSourceString('GL_'+_0x2af97d,_0x6b3407,_0x4c79e);}export default modernizeShader;