var a740_0x40ad47=a740_0x5435;(function(_0x1b9dc9,_0x440018){var _0x4c8027=a740_0x5435,_0x3678a0=_0x1b9dc9();while(!![]){try{var _0x2a3240=-parseInt(_0x4c8027(0x10a))/0x1*(-parseInt(_0x4c8027(0x105))/0x2)+parseInt(_0x4c8027(0xf7))/0x3+-parseInt(_0x4c8027(0xf6))/0x4*(parseInt(_0x4c8027(0xf9))/0x5)+-parseInt(_0x4c8027(0xfc))/0x6*(-parseInt(_0x4c8027(0xfa))/0x7)+parseInt(_0x4c8027(0xfd))/0x8*(parseInt(_0x4c8027(0x109))/0x9)+parseInt(_0x4c8027(0x10c))/0xa*(-parseInt(_0x4c8027(0xed))/0xb)+-parseInt(_0x4c8027(0x115))/0xc;if(_0x2a3240===_0x440018)break;else _0x3678a0['push'](_0x3678a0['shift']());}catch(_0x15e91a){_0x3678a0['push'](_0x3678a0['shift']());}}}(a740_0x1cdc,0x469c9));import a740_0x2b8a63 from'../Core/BoundingRectangle.js';import a740_0x2ea6f9 from'../Core/Cartesian2.js';import a740_0x11ae55 from'../Core/createGuid.js';import a740_0x552184 from'../Core/defaultValue.js';import a740_0x525563 from'../Core/defined.js';import a740_0x2d6977 from'../Core/destroyObject.js';import a740_0x5d8910 from'../Core/DeveloperError.js';import a740_0x43ee18 from'../Core/PixelFormat.js';import a740_0x531dfe from'../Core/Resource.js';function a740_0x1cdc(){var _0x5d1c9a=['imageIndex','_pixelFormat','7921584xxlxwU','_idHash','push','copyFrom','context','isDestroyed','addSubRegion','defineProperties','id\x20is\x20required.','string','topRight','bottomLeft','subRegion\x20is\x20required.','addImage','initialSize','371965GcpZUI','borderWidthInPixels','_context','childNode2','_guid','_unBind','destroy','pixelFormat','_initialSize','266884dbpEGK','1057806njLZEM','createIfNeeded','15HBytCS','7CobMLi','height','988428JWqmtZ','5536ZaKnPE','_root','borderWidthInPixels\x20must\x20be\x20greater\x20than\x20or\x20equal\x20to\x20zero.','childNode1','_borderWidthInPixels','width','length','image\x20is\x20required.','162FejJUw','numberOfImages','EMPTY_OBJECT','_textureCoordinates','3249dAJDQV','5973mCcwsx','initialSize\x20must\x20be\x20greater\x20than\x20zero.','30VYDPeD','function','context\x20is\x20required.','prototype','_bind','\x22\x20not\x20found\x20in\x20the\x20atlas.','_texture'];a740_0x1cdc=function(){return _0x5d1c9a;};return a740_0x1cdc();}import a740_0x35333d from'../Core/RuntimeError.js';import a740_0x227e0b from'../Renderer/Framebuffer.js';import a740_0x21dd8a from'../Renderer/Texture.js';import a740_0x11b242 from'../ThirdParty/when.js';function TextureAtlasNode(_0x5be6b4,_0x1268ef,_0x432363,_0x2f041e,_0x22ff44){var _0x419e70=a740_0x5435;this[_0x419e70(0xe9)]=a740_0x552184(_0x5be6b4,a740_0x2ea6f9['ZERO']),this['topRight']=a740_0x552184(_0x1268ef,a740_0x2ea6f9['ZERO']),this[_0x419e70(0x100)]=_0x432363,this[_0x419e70(0xf0)]=_0x2f041e,this[_0x419e70(0x113)]=_0x22ff44;}var defaultInitialSize=new a740_0x2ea6f9(0x10,0x10);function TextureAtlas(_0x527730){var _0x5bc00d=a740_0x5435;_0x527730=a740_0x552184(_0x527730,a740_0x552184[_0x5bc00d(0x107)]);var _0x4545bf=a740_0x552184(_0x527730[_0x5bc00d(0xee)],0x1),_0x15e090=a740_0x552184(_0x527730[_0x5bc00d(0xec)],defaultInitialSize);if(!a740_0x525563(_0x527730[_0x5bc00d(0x119)]))throw new a740_0x5d8910(_0x5bc00d(0x10e));if(_0x4545bf<0x0)throw new a740_0x5d8910(_0x5bc00d(0xff));if(_0x15e090['x']<0x1||_0x15e090['y']<0x1)throw new a740_0x5d8910(_0x5bc00d(0x10b));this[_0x5bc00d(0xef)]=_0x527730[_0x5bc00d(0x119)],this[_0x5bc00d(0x114)]=a740_0x552184(_0x527730[_0x5bc00d(0xf4)],a740_0x43ee18['RGBA']),this[_0x5bc00d(0x101)]=_0x4545bf,this[_0x5bc00d(0x108)]=[],this[_0x5bc00d(0xf1)]=a740_0x11ae55(),this['_idHash']={},this[_0x5bc00d(0xf5)]=_0x15e090,this[_0x5bc00d(0xfe)]=undefined;}Object[a740_0x40ad47(0x11c)](TextureAtlas[a740_0x40ad47(0x10f)],{'borderWidthInPixels':{'get':function(){var _0x341eee=a740_0x40ad47;return this[_0x341eee(0x101)];}},'textureCoordinates':{'get':function(){var _0x2ea902=a740_0x40ad47;return this[_0x2ea902(0x108)];}},'texture':{'get':function(){var _0x8380a3=a740_0x40ad47;return!a740_0x525563(this[_0x8380a3(0x112)])&&(this[_0x8380a3(0x112)]=new a740_0x21dd8a({'context':this['_context'],'width':this[_0x8380a3(0xf5)]['x'],'height':this['_initialSize']['y'],'pixelFormat':this[_0x8380a3(0x114)]})),this[_0x8380a3(0x112)];}},'numberOfImages':{'get':function(){var _0x1a0346=a740_0x40ad47;return this['_textureCoordinates'][_0x1a0346(0x103)];}},'guid':{'get':function(){return this['_guid'];}}});function resizeAtlas(_0x589096,_0x785a17){var _0x33ce7d=a740_0x40ad47,_0x22e900=_0x589096[_0x33ce7d(0xef)],_0x431557=_0x589096[_0x33ce7d(0x106)],_0x263e59=0x2,_0x3359cb=_0x589096[_0x33ce7d(0x101)];if(_0x431557>0x0){var _0x4d362a=_0x589096[_0x33ce7d(0x112)]['width'],_0x29e912=_0x589096[_0x33ce7d(0x112)][_0x33ce7d(0xfb)],_0x596fb7=_0x263e59*(_0x4d362a+_0x785a17['width']+_0x3359cb),_0x503f98=_0x263e59*(_0x29e912+_0x785a17[_0x33ce7d(0xfb)]+_0x3359cb),_0x37c917=_0x4d362a/_0x596fb7,_0x2e6634=_0x29e912/_0x503f98,_0xe5ff92=new TextureAtlasNode(new a740_0x2ea6f9(_0x4d362a+_0x3359cb,_0x3359cb),new a740_0x2ea6f9(_0x596fb7,_0x29e912)),_0x4b5a8c=new TextureAtlasNode(new a740_0x2ea6f9(),new a740_0x2ea6f9(_0x596fb7,_0x29e912),_0x589096[_0x33ce7d(0xfe)],_0xe5ff92),_0x18ff1b=new TextureAtlasNode(new a740_0x2ea6f9(_0x3359cb,_0x29e912+_0x3359cb),new a740_0x2ea6f9(_0x596fb7,_0x503f98)),_0x1ac50a=new TextureAtlasNode(new a740_0x2ea6f9(),new a740_0x2ea6f9(_0x596fb7,_0x503f98),_0x4b5a8c,_0x18ff1b);for(var _0x38445b=0x0;_0x38445b<_0x589096[_0x33ce7d(0x108)][_0x33ce7d(0x103)];_0x38445b++){var _0x4de1bb=_0x589096[_0x33ce7d(0x108)][_0x38445b];a740_0x525563(_0x4de1bb)&&(_0x4de1bb['x']*=_0x37c917,_0x4de1bb['y']*=_0x2e6634,_0x4de1bb['width']*=_0x37c917,_0x4de1bb[_0x33ce7d(0xfb)]*=_0x2e6634);}var _0x1b2519=new a740_0x21dd8a({'context':_0x589096[_0x33ce7d(0xef)],'width':_0x596fb7,'height':_0x503f98,'pixelFormat':_0x589096['_pixelFormat']}),_0x5a9d51=new a740_0x227e0b({'context':_0x22e900,'colorTextures':[_0x589096[_0x33ce7d(0x112)]],'destroyAttachments':![]});_0x5a9d51[_0x33ce7d(0x110)](),_0x1b2519['copyFromFramebuffer'](0x0,0x0,0x0,0x0,_0x596fb7,_0x503f98),_0x5a9d51[_0x33ce7d(0xf2)](),_0x5a9d51[_0x33ce7d(0xf3)](),_0x589096['_texture']=_0x589096[_0x33ce7d(0x112)]&&_0x589096[_0x33ce7d(0x112)]['destroy'](),_0x589096[_0x33ce7d(0x112)]=_0x1b2519,_0x589096[_0x33ce7d(0xfe)]=_0x1ac50a;}else{var _0x21c9c9=_0x263e59*(_0x785a17['width']+0x2*_0x3359cb),_0xb9cb20=_0x263e59*(_0x785a17[_0x33ce7d(0xfb)]+0x2*_0x3359cb);_0x21c9c9<_0x589096[_0x33ce7d(0xf5)]['x']&&(_0x21c9c9=_0x589096[_0x33ce7d(0xf5)]['x']),_0xb9cb20<_0x589096['_initialSize']['y']&&(_0xb9cb20=_0x589096[_0x33ce7d(0xf5)]['y']),_0x589096[_0x33ce7d(0x112)]=_0x589096['_texture']&&_0x589096[_0x33ce7d(0x112)][_0x33ce7d(0xf3)](),_0x589096[_0x33ce7d(0x112)]=new a740_0x21dd8a({'context':_0x589096[_0x33ce7d(0xef)],'width':_0x21c9c9,'height':_0xb9cb20,'pixelFormat':_0x589096[_0x33ce7d(0x114)]}),_0x589096[_0x33ce7d(0xfe)]=new TextureAtlasNode(new a740_0x2ea6f9(_0x3359cb,_0x3359cb),new a740_0x2ea6f9(_0x21c9c9,_0xb9cb20));}}function findNode(_0x4a3778,_0x195869,_0x3b0a0f){var _0x2f0e07=a740_0x40ad47;if(!a740_0x525563(_0x195869))return undefined;if(!a740_0x525563(_0x195869['childNode1'])&&!a740_0x525563(_0x195869[_0x2f0e07(0xf0)])){if(a740_0x525563(_0x195869[_0x2f0e07(0x113)]))return undefined;var _0x3ea428=_0x195869['topRight']['x']-_0x195869[_0x2f0e07(0xe9)]['x'],_0x2efdd2=_0x195869[_0x2f0e07(0x11f)]['y']-_0x195869[_0x2f0e07(0xe9)]['y'],_0x2ee817=_0x3ea428-_0x3b0a0f['width'],_0x1837d7=_0x2efdd2-_0x3b0a0f[_0x2f0e07(0xfb)];if(_0x2ee817<0x0||_0x1837d7<0x0)return undefined;if(_0x2ee817===0x0&&_0x1837d7===0x0)return _0x195869;if(_0x2ee817>_0x1837d7){_0x195869[_0x2f0e07(0x100)]=new TextureAtlasNode(new a740_0x2ea6f9(_0x195869[_0x2f0e07(0xe9)]['x'],_0x195869[_0x2f0e07(0xe9)]['y']),new a740_0x2ea6f9(_0x195869[_0x2f0e07(0xe9)]['x']+_0x3b0a0f[_0x2f0e07(0x102)],_0x195869[_0x2f0e07(0x11f)]['y']));var _0x9f5686=_0x195869[_0x2f0e07(0xe9)]['x']+_0x3b0a0f[_0x2f0e07(0x102)]+_0x4a3778[_0x2f0e07(0x101)];_0x9f5686<_0x195869['topRight']['x']&&(_0x195869[_0x2f0e07(0xf0)]=new TextureAtlasNode(new a740_0x2ea6f9(_0x9f5686,_0x195869[_0x2f0e07(0xe9)]['y']),new a740_0x2ea6f9(_0x195869[_0x2f0e07(0x11f)]['x'],_0x195869[_0x2f0e07(0x11f)]['y'])));}else{_0x195869[_0x2f0e07(0x100)]=new TextureAtlasNode(new a740_0x2ea6f9(_0x195869[_0x2f0e07(0xe9)]['x'],_0x195869[_0x2f0e07(0xe9)]['y']),new a740_0x2ea6f9(_0x195869[_0x2f0e07(0x11f)]['x'],_0x195869[_0x2f0e07(0xe9)]['y']+_0x3b0a0f[_0x2f0e07(0xfb)]));var _0x553d97=_0x195869[_0x2f0e07(0xe9)]['y']+_0x3b0a0f[_0x2f0e07(0xfb)]+_0x4a3778[_0x2f0e07(0x101)];_0x553d97<_0x195869[_0x2f0e07(0x11f)]['y']&&(_0x195869[_0x2f0e07(0xf0)]=new TextureAtlasNode(new a740_0x2ea6f9(_0x195869[_0x2f0e07(0xe9)]['x'],_0x553d97),new a740_0x2ea6f9(_0x195869[_0x2f0e07(0x11f)]['x'],_0x195869[_0x2f0e07(0x11f)]['y'])));}return findNode(_0x4a3778,_0x195869[_0x2f0e07(0x100)],_0x3b0a0f);}return findNode(_0x4a3778,_0x195869['childNode1'],_0x3b0a0f)||findNode(_0x4a3778,_0x195869[_0x2f0e07(0xf0)],_0x3b0a0f);}function addImage(_0xbfd2c0,_0x36b08f,_0x41ded7){var _0x57844e=a740_0x40ad47,_0x2e8985=findNode(_0xbfd2c0,_0xbfd2c0[_0x57844e(0xfe)],_0x36b08f);if(a740_0x525563(_0x2e8985)){_0x2e8985[_0x57844e(0x113)]=_0x41ded7;var _0x2a4da6=_0xbfd2c0[_0x57844e(0x112)][_0x57844e(0x102)],_0x1f0df5=_0xbfd2c0[_0x57844e(0x112)][_0x57844e(0xfb)],_0x14b3ae=_0x2e8985[_0x57844e(0x11f)]['x']-_0x2e8985[_0x57844e(0xe9)]['x'],_0x4dfa8b=_0x2e8985[_0x57844e(0x11f)]['y']-_0x2e8985[_0x57844e(0xe9)]['y'],_0x590304=_0x2e8985['bottomLeft']['x']/_0x2a4da6,_0x3bdbba=_0x2e8985['bottomLeft']['y']/_0x1f0df5,_0x400176=_0x14b3ae/_0x2a4da6,_0x1fb66c=_0x4dfa8b/_0x1f0df5;_0xbfd2c0[_0x57844e(0x108)][_0x41ded7]=new a740_0x2b8a63(_0x590304,_0x3bdbba,_0x400176,_0x1fb66c),_0xbfd2c0[_0x57844e(0x112)][_0x57844e(0x118)]({'source':_0x36b08f,'xOffset':_0x2e8985[_0x57844e(0xe9)]['x'],'yOffset':_0x2e8985[_0x57844e(0xe9)]['y']});}else resizeAtlas(_0xbfd2c0,_0x36b08f),addImage(_0xbfd2c0,_0x36b08f,_0x41ded7);_0xbfd2c0[_0x57844e(0xf1)]=a740_0x11ae55();}function a740_0x5435(_0x20d00a,_0x333f75){var _0x1cdc2c=a740_0x1cdc();return a740_0x5435=function(_0x5435c9,_0x573d64){_0x5435c9=_0x5435c9-0xe9;var _0xf3c494=_0x1cdc2c[_0x5435c9];return _0xf3c494;},a740_0x5435(_0x20d00a,_0x333f75);}TextureAtlas[a740_0x40ad47(0x10f)][a740_0x40ad47(0xeb)]=function(_0x4ca1a1,_0x543f98){var _0x4060dc=a740_0x40ad47;if(!a740_0x525563(_0x4ca1a1))throw new a740_0x5d8910(_0x4060dc(0x11d));if(!a740_0x525563(_0x543f98))throw new a740_0x5d8910('image\x20is\x20required.');var _0x12c44a=this[_0x4060dc(0x116)][_0x4ca1a1];if(a740_0x525563(_0x12c44a))return _0x12c44a;if(typeof _0x543f98===_0x4060dc(0x10d)){_0x543f98=_0x543f98(_0x4ca1a1);if(!a740_0x525563(_0x543f98))throw new a740_0x5d8910(_0x4060dc(0x104));}else{if(typeof _0x543f98===_0x4060dc(0x11e)||_0x543f98 instanceof a740_0x531dfe){var _0x350422=a740_0x531dfe[_0x4060dc(0xf8)](_0x543f98);_0x543f98=_0x350422['fetchImage']();}}var _0x5da877=this;return _0x12c44a=a740_0x11b242(_0x543f98,function(_0xe5cf15){var _0x39abf5=_0x4060dc;if(_0x5da877[_0x39abf5(0x11a)]())return-0x1;var _0x5b5d9a=_0x5da877[_0x39abf5(0x106)];return addImage(_0x5da877,_0xe5cf15,_0x5b5d9a),_0x5b5d9a;}),this[_0x4060dc(0x116)][_0x4ca1a1]=_0x12c44a,_0x12c44a;},TextureAtlas[a740_0x40ad47(0x10f)][a740_0x40ad47(0x11b)]=function(_0x16ecb2,_0x22f92f){var _0x48637d=a740_0x40ad47;if(!a740_0x525563(_0x16ecb2))throw new a740_0x5d8910(_0x48637d(0x11d));if(!a740_0x525563(_0x22f92f))throw new a740_0x5d8910(_0x48637d(0xea));var _0x393a67=this[_0x48637d(0x116)][_0x16ecb2];if(!a740_0x525563(_0x393a67))throw new a740_0x35333d('image\x20with\x20id\x20\x22'+_0x16ecb2+_0x48637d(0x111));var _0x51f8e3=this;return a740_0x11b242(_0x393a67,function(_0x5e9d2c){var _0xe66294=_0x48637d;if(_0x5e9d2c===-0x1)return-0x1;var _0x52c74d=_0x51f8e3[_0xe66294(0x112)][_0xe66294(0x102)],_0x2ca474=_0x51f8e3[_0xe66294(0x112)][_0xe66294(0xfb)],_0x41381e=_0x51f8e3['numberOfImages'],_0xc42bb4=_0x51f8e3[_0xe66294(0x108)][_0x5e9d2c],_0x3d64c4=_0xc42bb4['x']+_0x22f92f['x']/_0x52c74d,_0x3dcb70=_0xc42bb4['y']+_0x22f92f['y']/_0x2ca474,_0x12badc=_0x22f92f[_0xe66294(0x102)]/_0x52c74d,_0x5d262a=_0x22f92f[_0xe66294(0xfb)]/_0x2ca474;return _0x51f8e3[_0xe66294(0x108)][_0xe66294(0x117)](new a740_0x2b8a63(_0x3d64c4,_0x3dcb70,_0x12badc,_0x5d262a)),_0x51f8e3[_0xe66294(0xf1)]=a740_0x11ae55(),_0x41381e;});},TextureAtlas['prototype']['isDestroyed']=function(){return![];},TextureAtlas[a740_0x40ad47(0x10f)][a740_0x40ad47(0xf3)]=function(){var _0x21b2d6=a740_0x40ad47;return this['_texture']=this[_0x21b2d6(0x112)]&&this['_texture']['destroy'](),a740_0x2d6977(this);};export default TextureAtlas;