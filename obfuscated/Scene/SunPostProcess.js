var a736_0x35e29a=a736_0x5ad0;(function(_0x570ace,_0x3b69d9){var _0x50e274=a736_0x5ad0,_0x36766b=_0x570ace();while(!![]){try{var _0x4a2980=parseInt(_0x50e274(0x198))/0x1+-parseInt(_0x50e274(0x1a9))/0x2+-parseInt(_0x50e274(0x194))/0x3*(-parseInt(_0x50e274(0x187))/0x4)+parseInt(_0x50e274(0x1ae))/0x5*(parseInt(_0x50e274(0x18e))/0x6)+-parseInt(_0x50e274(0x19d))/0x7+parseInt(_0x50e274(0x19f))/0x8*(-parseInt(_0x50e274(0x19c))/0x9)+-parseInt(_0x50e274(0x1a2))/0xa*(-parseInt(_0x50e274(0x1a7))/0xb);if(_0x4a2980===_0x3b69d9)break;else _0x36766b['push'](_0x36766b['shift']());}catch(_0x58324b){_0x36766b['push'](_0x36766b['shift']());}}}(a736_0x2676,0xa5d03));import a736_0x543643 from'../Core/BoundingRectangle.js';import a736_0x9ac9b7 from'../Core/Cartesian2.js';import a736_0x279a2b from'../Core/Cartesian4.js';import a736_0x2c8d31 from'../Core/defined.js';import a736_0x5c429c from'../Core/destroyObject.js';import a736_0x5b5193 from'../Core/Math.js';import a736_0x4db2ed from'../Core/Matrix4.js';function a736_0x5ad0(_0x1a96c2,_0x2ef2a9){var _0x267665=a736_0x2676();return a736_0x5ad0=function(_0x5ad0c1,_0x3fb5e3){_0x5ad0c1=_0x5ad0c1-0x185;var _0x588667=_0x267665[_0x5ad0c1];return _0x588667;},a736_0x5ad0(_0x1a96c2,_0x2ef2a9);}import a736_0x3b74ee from'../Core/Transforms.js';import a736_0x21c31f from'../Shaders/PostProcessStages/AdditiveBlend.js';import a736_0x1e3af3 from'../Shaders/PostProcessStages/BrightPass.js';import a736_0x396dd8 from'../Shaders/PostProcessStages/GaussianBlur1D.js';import a736_0x2d845a from'../Shaders/PostProcessStages/PassThrough.js';import a736_0xfffbd6 from'./PostProcessStage.js';import a736_0x2518b5 from'./PostProcessStageComposite.js';import a736_0x1a2043 from'./PostProcessStageSampleMode.js';import a736_0x4bf9ae from'./PostProcessStageTextureCache.js';import a736_0x2bf659 from'./SceneFramebuffer.js';function SunPostProcess(){var _0x46e1d6=a736_0x5ad0;this[_0x46e1d6(0x1a6)]=new a736_0x2bf659();var _0x2b6774=0.125,_0x200760=new Array(0x6);_0x200760[0x0]=new a736_0xfffbd6({'fragmentShader':a736_0x2d845a,'textureScale':_0x2b6774,'forcePowerOfTwo':!![],'sampleMode':a736_0x1a2043[_0x46e1d6(0x192)]});var _0x3eecf0=_0x200760[0x1]=new a736_0xfffbd6({'fragmentShader':a736_0x1e3af3,'uniforms':{'avgLuminance':0.5,'threshold':0.25,'offset':0.1},'textureScale':_0x2b6774,'forcePowerOfTwo':!![]}),_0x22e083=this;this[_0x46e1d6(0x1b3)]=0x1,this[_0x46e1d6(0x19e)]=0x2,this[_0x46e1d6(0x1ac)]=new a736_0x9ac9b7(),_0x200760[0x2]=new a736_0xfffbd6({'fragmentShader':a736_0x396dd8,'uniforms':{'step':function(){var _0x4c4756=_0x46e1d6;return _0x22e083[_0x4c4756(0x1ac)]['x']=_0x22e083[_0x4c4756(0x1ac)]['y']=0x1/_0x3eecf0[_0x4c4756(0x196)][_0x4c4756(0x189)],_0x22e083['_blurStep'];},'delta':function(){var _0x4caf52=_0x46e1d6;return _0x22e083[_0x4caf52(0x1b3)];},'sigma':function(){return _0x22e083['_sigma'];},'direction':0x0},'textureScale':_0x2b6774,'forcePowerOfTwo':!![]}),_0x200760[0x3]=new a736_0xfffbd6({'fragmentShader':a736_0x396dd8,'uniforms':{'step':function(){var _0x1a3d54=_0x46e1d6;return _0x22e083[_0x1a3d54(0x1ac)]['x']=_0x22e083['_blurStep']['y']=0x1/_0x3eecf0[_0x1a3d54(0x196)]['width'],_0x22e083[_0x1a3d54(0x1ac)];},'delta':function(){var _0x50e740=_0x46e1d6;return _0x22e083[_0x50e740(0x1b3)];},'sigma':function(){return _0x22e083['_sigma'];},'direction':0x1},'textureScale':_0x2b6774,'forcePowerOfTwo':!![]}),_0x200760[0x4]=new a736_0xfffbd6({'fragmentShader':a736_0x2d845a,'sampleMode':a736_0x1a2043['LINEAR']}),this[_0x46e1d6(0x193)]=new a736_0x9ac9b7(),this['_uRadius']=undefined,_0x200760[0x5]=new a736_0xfffbd6({'fragmentShader':a736_0x21c31f,'uniforms':{'center':function(){return _0x22e083['_uCenter'];},'radius':function(){var _0x2afe40=_0x46e1d6;return _0x22e083[_0x2afe40(0x190)];},'colorTexture2':function(){var _0x3e281d=_0x46e1d6;return _0x22e083[_0x3e281d(0x1a6)]['getFramebuffer']()[_0x3e281d(0x1b0)](0x0);}}}),this[_0x46e1d6(0x1a1)]=new a736_0x2518b5({'stages':_0x200760});var _0x3ccdd7=new a736_0x4bf9ae(this),_0x42e3b2=_0x200760['length'];for(var _0x3fff47=0x0;_0x3fff47<_0x42e3b2;++_0x3fff47){_0x200760[_0x3fff47][_0x46e1d6(0x1ad)]=_0x3ccdd7;}this['_textureCache']=_0x3ccdd7,this['length']=_0x200760[_0x46e1d6(0x1a8)];}SunPostProcess['prototype'][a736_0x35e29a(0x19b)]=function(_0x27f1f6){var _0x214b63=a736_0x35e29a;return this['_stages'][_0x214b63(0x19b)](_0x27f1f6);},SunPostProcess[a736_0x35e29a(0x185)]['getStageByName']=function(_0x1c1957){var _0x1e3516=a736_0x35e29a,_0x2cdeda=this[_0x1e3516(0x1a1)][_0x1e3516(0x1a8)];for(var _0x250c3f=0x0;_0x250c3f<_0x2cdeda;++_0x250c3f){var _0x50293f=this['_stages']['get'](_0x250c3f);if(_0x50293f[_0x1e3516(0x1a5)]===_0x1c1957)return _0x50293f;}return undefined;};function a736_0x2676(){var _0x4b7528=['getColorTexture','update','getFramebuffer','_delta','max','height','_copyColorCommand','prototype','pointToGLWindowCoordinates','188228mPHBSy','multiplyByPoint','width','clear','scissorRectangle','viewProjection','computeViewportTransformation','6RStEMP','viewport','_uRadius','magnitude','LINEAR','_uCenter','39OTFobB','SOLAR_RADIUS','outputTexture','projection','853971pEDdkx','destroy','view','get','722547cMbsGA','4608520hVBlQp','_sigma','16kODEWT','clone','_stages','29080DLhJwH','sunPositionWC','subtract','name','_sceneFramebuffer','484ZKyvaX','length','2465898JtwHZS','copy','execute','_blurStep','_textureCache','5686910sNptwi','drawingBufferWidth'];a736_0x2676=function(){return _0x4b7528;};return a736_0x2676();}var sunPositionECScratch=new a736_0x279a2b(),sunPositionWCScratch=new a736_0x9ac9b7(),sizeScratch=new a736_0x9ac9b7(),postProcessMatrix4Scratch=new a736_0x4db2ed();function updateSunPosition(_0x19783a,_0x581f3e,_0x2b82a7){var _0x3b0127=a736_0x35e29a,_0x190c7d=_0x581f3e['uniformState'],_0x25030d=_0x190c7d[_0x3b0127(0x1a3)],_0x183572=_0x190c7d[_0x3b0127(0x19a)],_0xcd7acb=_0x190c7d[_0x3b0127(0x18c)],_0x495c50=_0x190c7d[_0x3b0127(0x197)],_0x2dc3af=a736_0x4db2ed['computeViewportTransformation'](_0x2b82a7,0x0,0x1,postProcessMatrix4Scratch),_0x37a458=a736_0x4db2ed[_0x3b0127(0x188)](_0x183572,_0x25030d,sunPositionECScratch),_0x2ff10d=a736_0x3b74ee[_0x3b0127(0x186)](_0xcd7acb,_0x2dc3af,_0x25030d,sunPositionWCScratch);_0x37a458['x']+=a736_0x5b5193[_0x3b0127(0x195)];var _0x347536=a736_0x3b74ee[_0x3b0127(0x186)](_0x495c50,_0x2dc3af,_0x37a458,_0x37a458),_0x387ac6=a736_0x9ac9b7[_0x3b0127(0x191)](a736_0x9ac9b7[_0x3b0127(0x1a4)](_0x347536,_0x2ff10d,_0x347536))*0x1e*0x2,_0x22a5a2=sizeScratch;_0x22a5a2['x']=_0x387ac6,_0x22a5a2['y']=_0x387ac6,_0x19783a['_uCenter']=a736_0x9ac9b7[_0x3b0127(0x1a0)](_0x2ff10d,_0x19783a[_0x3b0127(0x193)]),_0x19783a['_uRadius']=Math[_0x3b0127(0x1b4)](_0x22a5a2['x'],_0x22a5a2['y'])*0.15;var _0x245c94=_0x581f3e[_0x3b0127(0x1af)],_0x33279c=_0x581f3e['drawingBufferHeight'],_0x55426d=_0x19783a[_0x3b0127(0x1a1)],_0x239210=_0x55426d[_0x3b0127(0x19b)](0x0),_0x42bc50=_0x239210[_0x3b0127(0x196)][_0x3b0127(0x189)],_0x4787b3=_0x239210[_0x3b0127(0x196)][_0x3b0127(0x1b5)],_0x4ff80c=new a736_0x543643();_0x4ff80c[_0x3b0127(0x189)]=_0x42bc50,_0x4ff80c[_0x3b0127(0x1b5)]=_0x4787b3,_0x2dc3af=a736_0x4db2ed[_0x3b0127(0x18d)](_0x4ff80c,0x0,0x1,postProcessMatrix4Scratch),_0x2ff10d=a736_0x3b74ee[_0x3b0127(0x186)](_0xcd7acb,_0x2dc3af,_0x25030d,sunPositionWCScratch),_0x22a5a2['x']*=_0x42bc50/_0x245c94,_0x22a5a2['y']*=_0x4787b3/_0x33279c;var _0x5b5845=_0x239210['scissorRectangle'];_0x5b5845['x']=Math[_0x3b0127(0x1b4)](_0x2ff10d['x']-_0x22a5a2['x']*0.5,0x0),_0x5b5845['y']=Math[_0x3b0127(0x1b4)](_0x2ff10d['y']-_0x22a5a2['y']*0.5,0x0),_0x5b5845[_0x3b0127(0x189)]=Math['min'](_0x22a5a2['x'],_0x245c94),_0x5b5845[_0x3b0127(0x1b5)]=Math['min'](_0x22a5a2['y'],_0x33279c);for(var _0x2eae32=0x1;_0x2eae32<0x4;++_0x2eae32){a736_0x543643[_0x3b0127(0x1a0)](_0x5b5845,_0x55426d['get'](_0x2eae32)[_0x3b0127(0x18b)]);}}SunPostProcess['prototype'][a736_0x35e29a(0x18a)]=function(_0x1a5d9f,_0x2ed9bc,_0x310049){var _0x56eae4=a736_0x35e29a;this[_0x56eae4(0x1a6)][_0x56eae4(0x18a)](_0x1a5d9f,_0x2ed9bc,_0x310049),this[_0x56eae4(0x1ad)][_0x56eae4(0x18a)](_0x1a5d9f);},SunPostProcess[a736_0x35e29a(0x185)][a736_0x35e29a(0x1b1)]=function(_0x51f14b){var _0x3db1e2=a736_0x35e29a,_0x287935=_0x51f14b['context'],_0x409439=_0x51f14b[_0x3db1e2(0x18f)],_0x5c7688=this[_0x3db1e2(0x1a6)];_0x5c7688[_0x3db1e2(0x1b1)](_0x287935,_0x409439);var _0x505695=_0x5c7688[_0x3db1e2(0x1b2)]();return this['_textureCache'][_0x3db1e2(0x1b1)](_0x287935),this[_0x3db1e2(0x1a1)][_0x3db1e2(0x1b1)](_0x287935,![]),updateSunPosition(this,_0x287935,_0x409439),_0x505695;},SunPostProcess['prototype'][a736_0x35e29a(0x1ab)]=function(_0xb02887){var _0x5990b2=a736_0x35e29a,_0x33df0a=this[_0x5990b2(0x1a6)][_0x5990b2(0x1b2)]()[_0x5990b2(0x1b0)](0x0),_0x4b2f9b=this['_stages'],_0x15d46c=_0x4b2f9b[_0x5990b2(0x1a8)];_0x4b2f9b[_0x5990b2(0x19b)](0x0)['execute'](_0xb02887,_0x33df0a);for(var _0x59d9e4=0x1;_0x59d9e4<_0x15d46c;++_0x59d9e4){_0x4b2f9b[_0x5990b2(0x19b)](_0x59d9e4)[_0x5990b2(0x1ab)](_0xb02887,_0x4b2f9b[_0x5990b2(0x19b)](_0x59d9e4-0x1)['outputTexture']);}},SunPostProcess[a736_0x35e29a(0x185)][a736_0x35e29a(0x1aa)]=function(_0x5d9076,_0xee04d8){var _0x5d2168=a736_0x35e29a;if(!a736_0x2c8d31(this['_copyColorCommand'])){var _0x573ce6=this;this['_copyColorCommand']=_0x5d9076['createViewportQuadCommand'](a736_0x2d845a,{'uniformMap':{'colorTexture':function(){var _0x13c342=a736_0x5ad0;return _0x573ce6[_0x13c342(0x1a1)]['get'](_0x573ce6[_0x13c342(0x1a1)]['length']-0x1)['outputTexture'];}},'owner':this});}this[_0x5d2168(0x1b6)]['framebuffer']=_0xee04d8,this[_0x5d2168(0x1b6)][_0x5d2168(0x1ab)](_0x5d9076);},SunPostProcess[a736_0x35e29a(0x185)]['isDestroyed']=function(){return![];},SunPostProcess['prototype']['destroy']=function(){var _0x52a1ab=a736_0x35e29a;return this[_0x52a1ab(0x1ad)]['destroy'](),this[_0x52a1ab(0x1a1)][_0x52a1ab(0x199)](),a736_0x5c429c(this);};export default SunPostProcess;