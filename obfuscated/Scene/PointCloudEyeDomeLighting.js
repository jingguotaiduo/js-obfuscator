function a682_0x589a(_0x557c35,_0x1eebe4){var _0x571e15=a682_0x571e();return a682_0x589a=function(_0x589a22,_0x2fecd6){_0x589a22=_0x589a22-0x1c5;var _0x256412=_0x571e15[_0x589a22];return _0x256412;},a682_0x589a(_0x557c35,_0x1eebe4);}var a682_0x154f44=a682_0x589a;(function(_0x1dd10d,_0x52f251){var _0x371285=a682_0x589a,_0x29fde9=_0x1dd10d();while(!![]){try{var _0x44e5ca=-parseInt(_0x371285(0x204))/0x1+-parseInt(_0x371285(0x1ed))/0x2*(-parseInt(_0x371285(0x201))/0x3)+-parseInt(_0x371285(0x1e4))/0x4+-parseInt(_0x371285(0x1f4))/0x5+-parseInt(_0x371285(0x1fe))/0x6+parseInt(_0x371285(0x1ca))/0x7+-parseInt(_0x371285(0x1ea))/0x8*(-parseInt(_0x371285(0x1d2))/0x9);if(_0x44e5ca===_0x52f251)break;else _0x29fde9['push'](_0x29fde9['shift']());}catch(_0x48b10b){_0x29fde9['push'](_0x29fde9['shift']());}}}(a682_0x571e,0xa6d81));import a682_0x3f262e from'../Core/Cartesian2.js';import a682_0x1381bd from'../Core/Color.js';import a682_0x343c02 from'../Core/defined.js';import a682_0x4e8ad0 from'../Core/destroyObject.js';import a682_0xbaba88 from'../Core/PixelFormat.js';import a682_0x1c25f3 from'../Core/PrimitiveType.js';import a682_0x3e365d from'../Renderer/ClearCommand.js';import a682_0x243649 from'../Renderer/DrawCommand.js';import a682_0x30b862 from'../Renderer/Framebuffer.js';import a682_0x420daa from'../Renderer/Pass.js';import a682_0x2eb3ad from'../Renderer/PixelDatatype.js';import a682_0x2d47ae from'../Renderer/RenderState.js';import a682_0x4485bc from'../Renderer/Sampler.js';import a682_0x527941 from'../Renderer/ShaderSource.js';import a682_0x3bab55 from'../Renderer/Texture.js';import a682_0x203755 from'../Scene/BlendingState.js';import a682_0x35a41e from'../Scene/StencilConstants.js';import a682_0x329026 from'../Shaders/PostProcessStages/PointCloudEyeDomeLighting.js';function PointCloudEyeDomeLighting(){var _0x4db0eb=a682_0x589a;this[_0x4db0eb(0x1e3)]=undefined,this[_0x4db0eb(0x1d0)]=undefined,this[_0x4db0eb(0x1cf)]=undefined,this['_depthTexture']=undefined,this['_drawCommand']=undefined,this['_clearCommand']=undefined,this['_strength']=0x1,this[_0x4db0eb(0x202)]=0x1;}function destroyFramebuffer(_0x483bd0){var _0x10fd62=a682_0x589a,_0x40d499=_0x483bd0[_0x10fd62(0x1e3)];if(!a682_0x343c02(_0x40d499))return;_0x483bd0[_0x10fd62(0x1d0)][_0x10fd62(0x1c8)](),_0x483bd0[_0x10fd62(0x1cf)][_0x10fd62(0x1c8)](),_0x483bd0[_0x10fd62(0x1c9)][_0x10fd62(0x1c8)](),_0x40d499[_0x10fd62(0x1c8)](),_0x483bd0[_0x10fd62(0x1e3)]=undefined,_0x483bd0[_0x10fd62(0x1d0)]=undefined,_0x483bd0[_0x10fd62(0x1cf)]=undefined,_0x483bd0[_0x10fd62(0x1c9)]=undefined,_0x483bd0[_0x10fd62(0x205)]=undefined,_0x483bd0[_0x10fd62(0x1d7)]=undefined;}function createFramebuffer(_0x2d3201,_0x1ef4b0){var _0x3223e1=a682_0x589a,_0x3c7b46=_0x1ef4b0[_0x3223e1(0x1f1)],_0x13fadc=_0x1ef4b0['drawingBufferHeight'],_0x26992e=new a682_0x3bab55({'context':_0x1ef4b0,'width':_0x3c7b46,'height':_0x13fadc,'pixelFormat':a682_0xbaba88[_0x3223e1(0x1d8)],'pixelDatatype':a682_0x2eb3ad[_0x3223e1(0x1d9)],'sampler':a682_0x4485bc['NEAREST']}),_0x55f89e=new a682_0x3bab55({'context':_0x1ef4b0,'width':_0x3c7b46,'height':_0x13fadc,'pixelFormat':a682_0xbaba88['RGBA'],'pixelDatatype':a682_0x2eb3ad['UNSIGNED_BYTE'],'sampler':a682_0x4485bc['NEAREST']}),_0x8933ff=new a682_0x3bab55({'context':_0x1ef4b0,'width':_0x3c7b46,'height':_0x13fadc,'pixelFormat':a682_0xbaba88['DEPTH_COMPONENT'],'pixelDatatype':a682_0x2eb3ad[_0x3223e1(0x1f9)],'sampler':a682_0x4485bc[_0x3223e1(0x1e7)]});_0x2d3201['_framebuffer']=new a682_0x30b862({'context':_0x1ef4b0,'colorTextures':[_0x26992e,_0x55f89e],'depthTexture':_0x8933ff,'destroyAttachments':![]}),_0x2d3201[_0x3223e1(0x1d0)]=_0x26992e,_0x2d3201['_depthGBuffer']=_0x55f89e,_0x2d3201[_0x3223e1(0x1c9)]=_0x8933ff;}var distanceAndEdlStrengthScratch=new a682_0x3f262e();function createCommands(_0x1bef89,_0x164499){var _0x251fe9=a682_0x589a,_0x3bf5b7=new a682_0x527941({'defines':[_0x251fe9(0x1fd)],'sources':[a682_0x329026]}),_0x330675={'u_pointCloud_colorGBuffer':function(){var _0x543119=_0x251fe9;return _0x1bef89[_0x543119(0x1d0)];},'u_pointCloud_depthGBuffer':function(){var _0x48f32d=_0x251fe9;return _0x1bef89[_0x48f32d(0x1cf)];},'u_distanceAndEdlStrength':function(){var _0x40f4c8=_0x251fe9;return distanceAndEdlStrengthScratch['x']=_0x1bef89[_0x40f4c8(0x202)],distanceAndEdlStrengthScratch['y']=_0x1bef89[_0x40f4c8(0x1fa)],distanceAndEdlStrengthScratch;}},_0x556890=a682_0x2d47ae[_0x251fe9(0x1f6)]({'blending':a682_0x203755[_0x251fe9(0x1ee)],'depthMask':!![],'depthTest':{'enabled':!![]},'stencilTest':a682_0x35a41e[_0x251fe9(0x1c7)](),'stencilMask':a682_0x35a41e[_0x251fe9(0x1d4)]});_0x1bef89['_drawCommand']=_0x164499[_0x251fe9(0x1f0)](_0x3bf5b7,{'uniformMap':_0x330675,'renderState':_0x556890,'pass':a682_0x420daa[_0x251fe9(0x1f5)],'owner':_0x1bef89}),_0x1bef89[_0x251fe9(0x1d7)]=new a682_0x3e365d({'framebuffer':_0x1bef89[_0x251fe9(0x1e3)],'color':new a682_0x1381bd(0x0,0x0,0x0,0x0),'depth':0x1,'renderState':a682_0x2d47ae[_0x251fe9(0x1f6)](),'pass':a682_0x420daa[_0x251fe9(0x1f5)],'owner':_0x1bef89});}function createResources(_0x3b665c,_0x478ab2){var _0x1346ef=a682_0x589a,_0x189d0d=_0x478ab2[_0x1346ef(0x1f1)],_0x520423=_0x478ab2[_0x1346ef(0x1ce)],_0x2cafea=_0x3b665c[_0x1346ef(0x1d0)],_0x3703a3=![],_0x54a1dc=a682_0x343c02(_0x2cafea)&&(_0x2cafea[_0x1346ef(0x1fb)]!==_0x189d0d||_0x2cafea[_0x1346ef(0x1f3)]!==_0x520423);return(!a682_0x343c02(_0x2cafea)||_0x54a1dc)&&(destroyFramebuffer(_0x3b665c),createFramebuffer(_0x3b665c,_0x478ab2),createCommands(_0x3b665c,_0x478ab2),_0x3703a3=!![]),_0x3703a3;}function isSupported(_0x104781){var _0x251d8d=a682_0x589a;return _0x104781[_0x251d8d(0x1c6)]&&_0x104781[_0x251d8d(0x1d3)];}PointCloudEyeDomeLighting[a682_0x154f44(0x1db)]=isSupported;function getECShaderProgram(_0x24864d,_0x541584){var _0x405b4f=a682_0x154f44,_0x3deab2=_0x24864d[_0x405b4f(0x1e1)]['getDerivedShaderProgram'](_0x541584,'EC');if(!a682_0x343c02(_0x3deab2)){var _0x14d932=_0x541584[_0x405b4f(0x1ec)],_0x4cc03f=_0x541584['fragmentShaderSource']['clone']();_0x4cc03f[_0x405b4f(0x1eb)]=_0x4cc03f[_0x405b4f(0x1eb)][_0x405b4f(0x206)](function(_0x341baa){var _0x31fd7d=_0x405b4f;return _0x341baa=a682_0x527941[_0x31fd7d(0x1ff)](_0x341baa,'czm_point_cloud_post_process_main'),_0x341baa=_0x341baa[_0x31fd7d(0x1df)](/gl_FragColor/g,_0x31fd7d(0x203)),_0x341baa;}),_0x4cc03f[_0x405b4f(0x1eb)][_0x405b4f(0x1e9)](_0x405b4f(0x1e6)),_0x4cc03f[_0x405b4f(0x1eb)]['push'](_0x405b4f(0x1e2)+'{\x20\x0a'+'\x20\x20\x20\x20czm_point_cloud_post_process_main();\x20\x0a'+_0x405b4f(0x1cc)+_0x405b4f(0x1f2)+_0x405b4f(0x1cd)+_0x405b4f(0x208)+'\x20\x20\x20\x20gl_FragData[1]\x20=\x20czm_packDepth(gl_FragCoord.z);\x0a'+'#endif\x0a'+'}'),_0x3deab2=_0x24864d[_0x405b4f(0x1e1)]['createDerivedShaderProgram'](_0x541584,'EC',{'vertexShaderSource':_0x541584[_0x405b4f(0x1da)],'fragmentShaderSource':_0x4cc03f,'attributeLocations':_0x14d932});}return _0x3deab2;}PointCloudEyeDomeLighting[a682_0x154f44(0x207)][a682_0x154f44(0x1d5)]=function(_0x457737,_0x3fc4a5,_0x4fea00,_0x222bc0){var _0x2a7a77=a682_0x154f44;if(!isSupported(_0x457737[_0x2a7a77(0x200)]))return;this[_0x2a7a77(0x1fa)]=_0x4fea00['eyeDomeLightingStrength'],this[_0x2a7a77(0x202)]=_0x4fea00[_0x2a7a77(0x1ef)]*_0x457737['pixelRatio'];var _0x55a689=createResources(this,_0x457737['context']),_0x4d7668,_0x40de1e=_0x457737['commandList'],_0x2812a0=_0x40de1e[_0x2a7a77(0x1dd)],_0x483707,_0x3e01b6;for(_0x4d7668=_0x3fc4a5;_0x4d7668<_0x2812a0;++_0x4d7668){var _0x180121=_0x40de1e[_0x4d7668];if(_0x180121[_0x2a7a77(0x1d6)]!==a682_0x1c25f3[_0x2a7a77(0x1de)]||_0x180121[_0x2a7a77(0x1fc)]===a682_0x420daa[_0x2a7a77(0x209)])continue;_0x483707=undefined,_0x3e01b6=undefined;var _0x3f6813=_0x180121['derivedCommands']['pointCloudProcessor'];a682_0x343c02(_0x3f6813)&&(_0x483707=_0x3f6813['command'],_0x3e01b6=_0x3f6813[_0x2a7a77(0x20a)]),(!a682_0x343c02(_0x483707)||_0x180121[_0x2a7a77(0x1d1)]||_0x55a689||_0x3e01b6!==_0x180121['shaderProgram']||_0x483707[_0x2a7a77(0x1e8)]!==this[_0x2a7a77(0x1e3)])&&(_0x483707=a682_0x243649['shallowClone'](_0x180121,_0x483707),_0x483707[_0x2a7a77(0x1e8)]=this[_0x2a7a77(0x1e3)],_0x483707[_0x2a7a77(0x1c5)]=getECShaderProgram(_0x457737[_0x2a7a77(0x200)],_0x180121[_0x2a7a77(0x1c5)]),_0x483707['castShadows']=![],_0x483707[_0x2a7a77(0x1f7)]=![],!a682_0x343c02(_0x3f6813)&&(_0x3f6813={'command':_0x483707,'originalShaderProgram':_0x180121[_0x2a7a77(0x1c5)]},_0x180121[_0x2a7a77(0x1f8)][_0x2a7a77(0x1dc)]=_0x3f6813),_0x3f6813[_0x2a7a77(0x20a)]=_0x180121['shaderProgram']),_0x40de1e[_0x4d7668]=_0x483707;}var _0x5529f6=this['_clearCommand'],_0x209a55=this['_drawCommand'];_0x209a55[_0x2a7a77(0x1cb)]=_0x222bc0,_0x40de1e[_0x2a7a77(0x1e5)](_0x209a55),_0x40de1e[_0x2a7a77(0x1e5)](_0x5529f6);},PointCloudEyeDomeLighting['prototype'][a682_0x154f44(0x1e0)]=function(){return![];},PointCloudEyeDomeLighting[a682_0x154f44(0x207)][a682_0x154f44(0x1c8)]=function(){return destroyFramebuffer(this),a682_0x4e8ad0(this);};function a682_0x571e(){var _0x321274=['fragmentDepth','CESIUM_3D_TILE_MASK','update','primitiveType','_clearCommand','RGBA','UNSIGNED_BYTE','vertexShaderSource','isSupported','pointCloudProcessor','length','POINTS','replace','isDestroyed','shaderCache','void\x20main()\x20\x0a','_framebuffer','4352740rxdooN','push','#extension\x20GL_EXT_draw_buffers\x20:\x20enable\x20\x0a','NEAREST','framebuffer','unshift','1135928qUhLll','sources','_attributeLocations','32NWwUnJ','ALPHA_BLEND','eyeDomeLightingRadius','createViewportQuadCommand','drawingBufferWidth','\x20\x20\x20\x20czm_writeLogDepth();\x0a','height','6694370CcUvso','CESIUM_3D_TILE','fromCache','receiveShadows','derivedCommands','UNSIGNED_INT','_strength','width','pass','LOG_DEPTH_WRITE','4724622eJUOzv','replaceMain','context','153927JgiEWG','_radius','gl_FragData[0]','31118ovqKgw','_drawCommand','map','prototype','#else\x0a','TRANSLUCENT','originalShaderProgram','shaderProgram','drawBuffers','setCesium3DTileBit','destroy','_depthTexture','8835260CotvgK','boundingVolume','#ifdef\x20LOG_DEPTH\x0a','\x20\x20\x20\x20gl_FragData[1]\x20=\x20czm_packDepth(gl_FragDepthEXT);\x20\x0a','drawingBufferHeight','_depthGBuffer','_colorGBuffer','dirty','117IIeoHL'];a682_0x571e=function(){return _0x321274;};return a682_0x571e();}export default PointCloudEyeDomeLighting;