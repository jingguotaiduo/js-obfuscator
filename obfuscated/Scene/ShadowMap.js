var a722_0x11832e=a722_0x2691;(function(_0x5348f1,_0x1f5081){var _0x187cac=a722_0x2691,_0x47b0d4=_0x5348f1();while(!![]){try{var _0x433152=-parseInt(_0x187cac(0x261))/0x1+parseInt(_0x187cac(0x2d0))/0x2+-parseInt(_0x187cac(0x2d8))/0x3+-parseInt(_0x187cac(0x281))/0x4+parseInt(_0x187cac(0x271))/0x5+-parseInt(_0x187cac(0x25d))/0x6*(parseInt(_0x187cac(0x240))/0x7)+-parseInt(_0x187cac(0x2b5))/0x8*(-parseInt(_0x187cac(0x215))/0x9);if(_0x433152===_0x1f5081)break;else _0x47b0d4['push'](_0x47b0d4['shift']());}catch(_0x2381e4){_0x47b0d4['push'](_0x47b0d4['shift']());}}}(a722_0x330c,0xeca7a));import a722_0x3caac3 from'../Core/BoundingRectangle.js';import a722_0x3597d3 from'../Core/BoundingSphere.js';import a722_0x254c26 from'../Core/BoxOutlineGeometry.js';import a722_0x3f8994 from'../Core/Cartesian2.js';import a722_0xf1d54b from'../Core/Cartesian3.js';import a722_0x122b78 from'../Core/Cartesian4.js';import a722_0x296224 from'../Core/Cartographic.js';import a722_0x25859a from'../Core/clone.js';import a722_0x1a5857 from'../Core/Color.js';function a722_0x330c(){var _0x3cbd74=['upWC','UNSIGNED_BYTE','cullingVolume','positionWC','RGBA','_shadowMapMatrix','negativeX','DEPTH_COMPONENT16','height','frustum','normalOffsetScale','_debugCascadeFrustums','3884375NTYCHf','cross','\x20\x20\x20\x20\x20\x20\x20\x20if\x20(uv.x\x20<\x200.333)\x20\x0a','dirty','receiveShaderCastShadows','_enabled','_darkness','Only\x20one\x20or\x20four\x20cascades\x20are\x20supported.','update','_sceneCamera','MAX_VALUE','_primitiveBias','divideByScalar','aspectRatio','negativeZ','uniformMap','207848OTvMfb','right','cascadesEnabled','_normalOffset','TRANSLUCENT','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.y\x20=\x201.0;\x20\x0a','fromLightSource','enabled','multiply','darkness','min','isEdge','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.x\x20=\x201.0;\x20\x0a','uniform\x20sampler2D\x20shadowMap_texture;\x20\x0a','_cascadeMatrices','isFirefox','polygonOffsetUnits','\x20\x20\x20\x20else\x20\x0a','castShadows','multiplyByPointAsVector','_size','numberOfCascades','shaderProgram','pass','multiplyByVector','_debugShadowViewCommand','_lightPositionEC','maximumTextureSize','\x20\x20\x20\x20\x20\x20\x20\x20else\x20if\x20(uv.x\x20<\x200.666)\x20\x0a','_shadowMapTexture','_terrainBias','updatePass','multiplyByScalar','GREEN','radius','depthTexture','shallowClone','multiplyByPoint','_outOfView','top','directionWC','EMPTY_OBJECT','context','NEAREST','pointLightRadius','_outOfViewPrevious','GLOBE','getShadowReceiveShaderKeyword','passState','\x20\x20\x20\x20\x20\x20\x20\x20else\x20\x0a','_debugFreezeFrame','UNSIGNED_INT_24_8','8OqwbXJ','_cascadeDistances','lightCamera','polygonOffsetFactor','\x20\x20\x20\x20float\x20shadow\x20=\x20czm_unpackDepth(texture2D(shadowMap_texture,\x20v_textureCoordinates));\x20\x0a','MAGENTA','_usesDepthTexture','CYAN','_depthAttachment','framebuffer','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.z\x20=\x20-1.0;\x20\x0a','destroy','viewProjectionMatrix','_pointRenderState','fromCache','fromTranslationQuaternionRotationScale','_colorAttachment','getDerivedShaderProgram','maximumDistance','_lightCamera','center','farPlane','debugCreateRenderStates','_terrainRenderState','_pointLightRadius','_cascadeSplits','void\x20main()\x20\x0a','2054724pTChhZ','length','_boundingSphere','renderedMesh','\x20\x20\x20\x20}\x20\x0a','debugFreezeFrame','MAXIMUM_DISTANCE','computeView','4735407QVvKFY','createShadowReceiveFragmentShader','_distance','getTranslation','polygonOffset','_shadowMapCamera','computeCullingVolume','BACK','fragmentShaderSource','UNIT_X','_passes','_lightDirectionEC','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.z\x20=\x20uv.y\x20*\x204.0\x20-\x201.0;\x20\x0a','lightCamera\x20is\x20required.','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.y\x20=\x20uv.y\x20*\x204.0\x20-\x203.0;\x20\x0a','_debugCascadeColors','getShadowCastShaderKeyword','unpack','computeVisibility','createViewportQuadCommand','inverse','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.x\x20=\x20uv.x\x20*\x206.0\x20-\x205.0;\x20\x0a','_clearPassState','closestObjectSize','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.x\x20=\x20uv.x\x20*\x206.0\x20-\x203.0;\x20\x0a','OVERLAY','_pointBias','debugShow','fromBoundingSphere','_shadowMapCullingVolume','_attributeLocations','isWindows','rightWC','PI_OVER_TWO','inverseViewMatrix','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.y\x20=\x20uv.x\x20*\x206.0\x20-\x201.0;\x20\x0a','_isPointLight','_softShadows','pow','far','\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(vec3(shadow),\x201.0);\x20\x0a','negativeY','OUTSIDE','getViewProjection','\x20\x20\x20\x20{\x20\x0a','isDestroyed','_fitNearFar','_maximumCascadeDistances','owner','FRAMEBUFFER_COMPLETE','depthBias','fov','bottom','}\x20\x0a','max','BLUE','cull','fromTranslation','_debugCameraFrustum','18005139UxjURf','drawingBufferWidth','fadingEnabled','normalOffset','_debugLightFrustum','execute','uniform\x20samplerCube\x20shadowMap_textureCube;\x20\x0a','isPointLight','hasVertexNormals','castCommands','fromElements','\x20\x20\x20\x20vec3\x20dir;\x20\x0a','equalsEpsilon','isChrome','minimumByComponent','mapProjection','_needsUpdate','createShadowCastVertexShader','\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x0a','combinedUniforms1','renderState','positionCartographic','varying\x20vec2\x20v_textureCoordinates;\x20\x0a','status','camera','near','size','textureOffsets','shadowState','RED','cartesianToCartographic','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.x\x20=\x20-1.0;\x20\x0a','left','createDerivedShaderProgram','viewport','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.z\x20=\x20uv.y\x20*\x204.0\x20-\x203.0;\x20\x0a','add','_clearCommand','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.z\x20=\x201.0;\x20\x0a','lerp','viewMatrix','\x20\x20\x20\x20vec2\x20uv\x20=\x20v_textureCoordinates;\x20\x0a','dot','295043pgnHJn','receiveShaderProgramId','projectionMatrix','commandList','_primitiveRenderState','_textureSize','createReceiveDerivedCommand','equals','\x20\x20\x20\x20float\x20shadow\x20=\x20texture2D(shadowMap_texture,\x20v_textureCoordinates).r;\x20\x0a','_isSpotLight','receiveShadows','_cascadesEnabled','normalize','fromColor','normalShadingSmooth','prototype','clone','vertexShaderSource','data','receiveCommand','shaderCache','defineProperties','\x20\x20\x20\x20float\x20shadow\x20=\x20czm_unpackDepth(textureCube(shadowMap_textureCube,\x20dir));\x20\x0a','castShaderProgramId','DEPTH_STENCIL','positiveY','\x20\x20\x20\x20if\x20(uv.y\x20<\x200.5)\x20\x0a','combinedUniforms2','maximumCubeMapSize','54xnophB','isInternetExplorer','_numberOfCascades','\x20\x20\x20\x20\x20\x20\x20\x20}\x20\x0a','825698vZIfJm','createShadowCastFragmentShader','YELLOW','width'];a722_0x330c=function(){return _0x3cbd74;};return a722_0x330c();}import a722_0x440429 from'../Core/ColorGeometryInstanceAttribute.js';import a722_0x481a0e from'../Core/combine.js';import a722_0x2afbf5 from'../Core/CullingVolume.js';import a722_0x394c31 from'../Core/defaultValue.js';import a722_0x6d4899 from'../Core/defined.js';import a722_0xa8ce57 from'../Core/destroyObject.js';import a722_0x21eef7 from'../Core/DeveloperError.js';import a722_0x328fec from'../Core/FeatureDetection.js';import a722_0x5c7703 from'../Core/GeometryInstance.js';import a722_0x4cfefd from'../Core/Intersect.js';import a722_0x5a8167 from'../Core/Math.js';import a722_0x4f2421 from'../Core/Matrix4.js';import a722_0x2d4c33 from'../Core/OrthographicOffCenterFrustum.js';import a722_0x2fab3d from'../Core/PerspectiveFrustum.js';import a722_0xdce21a from'../Core/PixelFormat.js';import a722_0x2bd86d from'../Core/Quaternion.js';import a722_0x5572c2 from'../Core/SphereOutlineGeometry.js';import a722_0xb0eb6f from'../Core/WebGLConstants.js';import a722_0xf59710 from'../Renderer/ClearCommand.js';function a722_0x2691(_0x4f0219,_0x21a379){var _0x330c83=a722_0x330c();return a722_0x2691=function(_0x2691b6,_0x5f4c25){_0x2691b6=_0x2691b6-0x1e3;var _0x21a29b=_0x330c83[_0x2691b6];return _0x21a29b;},a722_0x2691(_0x4f0219,_0x21a379);}import a722_0x192353 from'../Renderer/ContextLimits.js';import a722_0x16596e from'../Renderer/CubeMap.js';import a722_0x3d55c4 from'../Renderer/DrawCommand.js';import a722_0x2a654e from'../Renderer/Framebuffer.js';import a722_0x569a90 from'../Renderer/Pass.js';import a722_0x52c60a from'../Renderer/PassState.js';import a722_0x15091d from'../Renderer/PixelDatatype.js';import a722_0x25384b from'../Renderer/Renderbuffer.js';import a722_0x4ee836 from'../Renderer/RenderbufferFormat.js';import a722_0x15589a from'../Renderer/RenderState.js';import a722_0x185b5b from'../Renderer/Sampler.js';import a722_0x157ddb from'../Renderer/Texture.js';import a722_0x2a403c from'./Camera.js';import a722_0x1d46e0 from'./CullFace.js';import a722_0x41fc3b from'./DebugCameraPrimitive.js';import a722_0x3b3db4 from'./PerInstanceColorAppearance.js';import a722_0x36716f from'./Primitive.js';import a722_0x489bc1 from'./ShadowMapShader.js';function ShadowMap(_0x2cf144){var _0x506a81=a722_0x2691;_0x2cf144=a722_0x394c31(_0x2cf144,a722_0x394c31[_0x506a81(0x2aa)]);var _0x526a05=_0x2cf144[_0x506a81(0x2ab)];if(!a722_0x6d4899(_0x526a05))throw new a722_0x21eef7('context\x20is\x20required.');if(!a722_0x6d4899(_0x2cf144['lightCamera']))throw new a722_0x21eef7(_0x506a81(0x1e7));if(a722_0x6d4899(_0x2cf144[_0x506a81(0x296)])&&_0x2cf144['numberOfCascades']!==0x1&&_0x2cf144[_0x506a81(0x296)]!==0x4)throw new a722_0x21eef7(_0x506a81(0x278));this[_0x506a81(0x276)]=a722_0x394c31(_0x2cf144[_0x506a81(0x288)],!![]),this[_0x506a81(0x1ff)]=a722_0x394c31(_0x2cf144['softShadows'],![]),this[_0x506a81(0x284)]=a722_0x394c31(_0x2cf144[_0x506a81(0x218)],!![]),this[_0x506a81(0x274)]=!![],this[_0x506a81(0x287)]=a722_0x394c31(_0x2cf144[_0x506a81(0x287)],!![]),this[_0x506a81(0x28a)]=a722_0x394c31(_0x2cf144['darkness'],0.3),this[_0x506a81(0x277)]=this[_0x506a81(0x28a)],this[_0x506a81(0x217)]=a722_0x394c31(_0x2cf144['fadingEnabled'],!![]),this['maximumDistance']=a722_0x394c31(_0x2cf144['maximumDistance'],0x1388),this[_0x506a81(0x2a7)]=![],this[_0x506a81(0x2ae)]=![],this[_0x506a81(0x225)]=!![];var _0x8cbd93=!![];(a722_0x328fec[_0x506a81(0x25e)]()||a722_0x328fec[_0x506a81(0x28c)]()||(a722_0x328fec[_0x506a81(0x222)]()||a722_0x328fec[_0x506a81(0x290)]())&&a722_0x328fec[_0x506a81(0x1f9)]()&&!_0x526a05[_0x506a81(0x2a4)])&&(_0x8cbd93=![]);this['_polygonOffsetSupported']=_0x8cbd93,this[_0x506a81(0x29f)]={'polygonOffset':_0x8cbd93,'polygonOffsetFactor':1.1,'polygonOffsetUnits':0x4,'normalOffset':this['_normalOffset'],'normalOffsetScale':0.5,'normalShading':!![],'normalShadingSmooth':0.3,'depthBias':0.0001},this[_0x506a81(0x27c)]={'polygonOffset':_0x8cbd93,'polygonOffsetFactor':1.1,'polygonOffsetUnits':0x4,'normalOffset':this[_0x506a81(0x284)],'normalOffsetScale':0.1,'normalShading':!![],'normalShadingSmooth':0.05,'depthBias':0.00002},this[_0x506a81(0x1f4)]={'polygonOffset':![],'polygonOffsetFactor':1.1,'polygonOffsetUnits':0x4,'normalOffset':this[_0x506a81(0x284)],'normalOffsetScale':0x0,'normalShading':!![],'normalShadingSmooth':0.1,'depthBias':0.0005},this[_0x506a81(0x2bd)]=undefined,this[_0x506a81(0x2c5)]=undefined,this[_0x506a81(0x26a)]=new a722_0x4f2421(),this[_0x506a81(0x29e)]=undefined,this[_0x506a81(0x1e5)]=new a722_0xf1d54b(),this[_0x506a81(0x29b)]=new a722_0x122b78(),this[_0x506a81(0x2da)]=0x0,this[_0x506a81(0x2c8)]=_0x2cf144[_0x506a81(0x2b7)],this[_0x506a81(0x2dd)]=new ShadowMapCamera(),this['_shadowMapCullingVolume']=undefined,this[_0x506a81(0x27a)]=undefined,this[_0x506a81(0x2d2)]=new a722_0x3597d3(),this[_0x506a81(0x1fe)]=a722_0x394c31(_0x2cf144[_0x506a81(0x21c)],![]),this[_0x506a81(0x2cd)]=a722_0x394c31(_0x2cf144[_0x506a81(0x2ad)],0x64),this[_0x506a81(0x24b)]=this[_0x506a81(0x1fe)]?![]:a722_0x394c31(_0x2cf144[_0x506a81(0x283)],!![]),this[_0x506a81(0x25f)]=!this[_0x506a81(0x24b)]?0x0:a722_0x394c31(_0x2cf144[_0x506a81(0x296)],0x4),this[_0x506a81(0x208)]=!![],this[_0x506a81(0x209)]=[0x19,0x96,0x2bc,Number['MAX_VALUE']],this['_textureSize']=new a722_0x3f8994(),this[_0x506a81(0x249)]=![];if(this[_0x506a81(0x24b)])this['_shadowMapCamera']['frustum']=new a722_0x2d4c33();else a722_0x6d4899(this[_0x506a81(0x2c8)][_0x506a81(0x26e)][_0x506a81(0x20d)])&&(this[_0x506a81(0x249)]=!![]);this[_0x506a81(0x2ce)]=[new a722_0x122b78(),new a722_0x122b78()],this[_0x506a81(0x28f)]=[new a722_0x4f2421(),new a722_0x4f2421(),new a722_0x4f2421(),new a722_0x4f2421()],this[_0x506a81(0x2b6)]=new a722_0x122b78();var _0x26cb32;if(this[_0x506a81(0x1fe)])_0x26cb32=0x6;else!this['_cascadesEnabled']?_0x26cb32=0x1:_0x26cb32=this[_0x506a81(0x25f)];this['_passes']=new Array(_0x26cb32);for(var _0x49c04d=0x0;_0x49c04d<_0x26cb32;++_0x49c04d){this['_passes'][_0x49c04d]=new ShadowPass(_0x526a05);}this[_0x506a81(0x1f5)]=![],this[_0x506a81(0x2d5)]=![],this[_0x506a81(0x2b3)]=![],this['_debugCascadeColors']=![],this[_0x506a81(0x219)]=undefined,this[_0x506a81(0x214)]=undefined,this['_debugCascadeFrustums']=new Array(this[_0x506a81(0x25f)]),this[_0x506a81(0x29a)]=undefined,this[_0x506a81(0x2bb)]=_0x526a05[_0x506a81(0x2a4)],this[_0x506a81(0x1fe)]&&(this[_0x506a81(0x2bb)]=![]),this[_0x506a81(0x244)]=undefined,this['_terrainRenderState']=undefined,this[_0x506a81(0x2c2)]=undefined,createRenderStates(this),this[_0x506a81(0x23a)]=new a722_0xf59710({'depth':0x1,'color':new a722_0x1a5857()}),this[_0x506a81(0x1f0)]=new a722_0x52c60a(_0x526a05),this[_0x506a81(0x295)]=a722_0x394c31(_0x2cf144[_0x506a81(0x22f)],0x800),this[_0x506a81(0x22f)]=this[_0x506a81(0x295)];}ShadowMap[a722_0x11832e(0x2d6)]=0x4e20;function ShadowPass(_0x12c032){var _0x1d3b1a=a722_0x11832e;this['camera']=new ShadowMapCamera(),this[_0x1d3b1a(0x2b1)]=new a722_0x52c60a(_0x12c032),this[_0x1d3b1a(0x2be)]=undefined,this[_0x1d3b1a(0x230)]=undefined,this[_0x1d3b1a(0x243)]=[],this['cullingVolume']=undefined;}function createRenderState(_0x5bdfdf,_0x46ac31){var _0x1f85c0=a722_0x11832e;return a722_0x15589a[_0x1f85c0(0x2c3)]({'cull':{'enabled':!![],'face':a722_0x1d46e0[_0x1f85c0(0x2df)]},'depthTest':{'enabled':!![]},'colorMask':{'red':_0x5bdfdf,'green':_0x5bdfdf,'blue':_0x5bdfdf,'alpha':_0x5bdfdf},'depthMask':!![],'polygonOffset':{'enabled':_0x46ac31[_0x1f85c0(0x2dc)],'factor':_0x46ac31[_0x1f85c0(0x2b8)],'units':_0x46ac31[_0x1f85c0(0x291)]}});}function createRenderStates(_0xcf86cf){var _0x5192f6=a722_0x11832e,_0xa80304=!_0xcf86cf[_0x5192f6(0x2bb)];_0xcf86cf[_0x5192f6(0x244)]=createRenderState(_0xa80304,_0xcf86cf[_0x5192f6(0x27c)]),_0xcf86cf[_0x5192f6(0x2cc)]=createRenderState(_0xa80304,_0xcf86cf[_0x5192f6(0x29f)]),_0xcf86cf['_pointRenderState']=createRenderState(_0xa80304,_0xcf86cf['_pointBias']);}ShadowMap[a722_0x11832e(0x24f)][a722_0x11832e(0x2cb)]=function(){createRenderStates(this);},Object[a722_0x11832e(0x255)](ShadowMap[a722_0x11832e(0x24f)],{'enabled':{'get':function(){var _0x2d711b=a722_0x11832e;return this[_0x2d711b(0x276)];},'set':function(_0x5e143f){var _0x4752bd=a722_0x11832e;this[_0x4752bd(0x274)]=this[_0x4752bd(0x276)]!==_0x5e143f,this[_0x4752bd(0x276)]=_0x5e143f;}},'normalOffset':{'get':function(){var _0x2170ef=a722_0x11832e;return this[_0x2170ef(0x284)];},'set':function(_0x58d610){var _0x449431=a722_0x11832e;this['dirty']=this[_0x449431(0x284)]!==_0x58d610,this[_0x449431(0x284)]=_0x58d610,this[_0x449431(0x29f)][_0x449431(0x218)]=_0x58d610,this[_0x449431(0x27c)][_0x449431(0x218)]=_0x58d610,this[_0x449431(0x1f4)][_0x449431(0x218)]=_0x58d610;}},'softShadows':{'get':function(){var _0x25626f=a722_0x11832e;return this[_0x25626f(0x1ff)];},'set':function(_0x44b38e){var _0x1f6d96=a722_0x11832e;this[_0x1f6d96(0x274)]=this[_0x1f6d96(0x1ff)]!==_0x44b38e,this[_0x1f6d96(0x1ff)]=_0x44b38e;}},'size':{'get':function(){var _0x1017c7=a722_0x11832e;return this[_0x1017c7(0x295)];},'set':function(_0x594454){resize(this,_0x594454);}},'outOfView':{'get':function(){var _0x13eb95=a722_0x11832e;return this[_0x13eb95(0x2a7)];}},'shadowMapCullingVolume':{'get':function(){return this['_shadowMapCullingVolume'];}},'passes':{'get':function(){var _0x342a9c=a722_0x11832e;return this[_0x342a9c(0x1e4)];}},'isPointLight':{'get':function(){return this['_isPointLight'];}},'debugCascadeColors':{'get':function(){var _0x40e7d6=a722_0x11832e;return this[_0x40e7d6(0x1e9)];},'set':function(_0xf16eb6){var _0x103e7b=a722_0x11832e;this[_0x103e7b(0x274)]=this[_0x103e7b(0x1e9)]!==_0xf16eb6,this[_0x103e7b(0x1e9)]=_0xf16eb6;}}});function destroyFramebuffer(_0x529017){var _0x33e170=a722_0x11832e,_0x53a157=_0x529017[_0x33e170(0x1e4)][_0x33e170(0x2d1)];for(var _0x1c54bd=0x0;_0x1c54bd<_0x53a157;++_0x1c54bd){var _0x144967=_0x529017[_0x33e170(0x1e4)][_0x1c54bd],_0x4755cb=_0x144967[_0x33e170(0x2be)];a722_0x6d4899(_0x4755cb)&&!_0x4755cb[_0x33e170(0x207)]()&&_0x4755cb[_0x33e170(0x2c0)](),_0x144967[_0x33e170(0x2be)]=undefined;}_0x529017['_depthAttachment']=_0x529017[_0x33e170(0x2bd)]&&_0x529017[_0x33e170(0x2bd)][_0x33e170(0x2c0)](),_0x529017[_0x33e170(0x2c5)]=_0x529017[_0x33e170(0x2c5)]&&_0x529017[_0x33e170(0x2c5)]['destroy']();}function createFramebufferColor(_0x1c3e15,_0x4ca6de){var _0x22cce9=a722_0x11832e,_0x120b5e=new a722_0x25384b({'context':_0x4ca6de,'width':_0x1c3e15[_0x22cce9(0x245)]['x'],'height':_0x1c3e15[_0x22cce9(0x245)]['y'],'format':a722_0x4ee836[_0x22cce9(0x26c)]}),_0x2edd29=new a722_0x157ddb({'context':_0x4ca6de,'width':_0x1c3e15[_0x22cce9(0x245)]['x'],'height':_0x1c3e15['_textureSize']['y'],'pixelFormat':a722_0xdce21a[_0x22cce9(0x269)],'pixelDatatype':a722_0x15091d[_0x22cce9(0x266)],'sampler':a722_0x185b5b['NEAREST']}),_0x19d5f5=new a722_0x2a654e({'context':_0x4ca6de,'depthRenderbuffer':_0x120b5e,'colorTextures':[_0x2edd29],'destroyAttachments':![]}),_0x38bffe=_0x1c3e15[_0x22cce9(0x1e4)]['length'];for(var _0x7747fd=0x0;_0x7747fd<_0x38bffe;++_0x7747fd){var _0x265b06=_0x1c3e15[_0x22cce9(0x1e4)][_0x7747fd];_0x265b06[_0x22cce9(0x2be)]=_0x19d5f5,_0x265b06[_0x22cce9(0x2b1)][_0x22cce9(0x2be)]=_0x19d5f5;}_0x1c3e15[_0x22cce9(0x29e)]=_0x2edd29,_0x1c3e15[_0x22cce9(0x2bd)]=_0x120b5e,_0x1c3e15[_0x22cce9(0x2c5)]=_0x2edd29;}function createFramebufferDepth(_0x246696,_0x21e6db){var _0x344e0e=a722_0x11832e,_0xa8addb=new a722_0x157ddb({'context':_0x21e6db,'width':_0x246696[_0x344e0e(0x245)]['x'],'height':_0x246696['_textureSize']['y'],'pixelFormat':a722_0xdce21a[_0x344e0e(0x258)],'pixelDatatype':a722_0x15091d[_0x344e0e(0x2b4)],'sampler':a722_0x185b5b[_0x344e0e(0x2ac)]}),_0x2ccea3=new a722_0x2a654e({'context':_0x21e6db,'depthStencilTexture':_0xa8addb,'destroyAttachments':![]}),_0x376691=_0x246696[_0x344e0e(0x1e4)][_0x344e0e(0x2d1)];for(var _0x4698af=0x0;_0x4698af<_0x376691;++_0x4698af){var _0x2c09f8=_0x246696[_0x344e0e(0x1e4)][_0x4698af];_0x2c09f8['framebuffer']=_0x2ccea3,_0x2c09f8['passState'][_0x344e0e(0x2be)]=_0x2ccea3;}_0x246696['_shadowMapTexture']=_0xa8addb,_0x246696[_0x344e0e(0x2bd)]=_0xa8addb;}function createFramebufferCube(_0x3d8272,_0x1cec2a){var _0x853f6d=a722_0x11832e,_0x1392ad=new a722_0x25384b({'context':_0x1cec2a,'width':_0x3d8272[_0x853f6d(0x245)]['x'],'height':_0x3d8272[_0x853f6d(0x245)]['y'],'format':a722_0x4ee836[_0x853f6d(0x26c)]}),_0x227bfc=new a722_0x16596e({'context':_0x1cec2a,'width':_0x3d8272['_textureSize']['x'],'height':_0x3d8272['_textureSize']['y'],'pixelFormat':a722_0xdce21a[_0x853f6d(0x269)],'pixelDatatype':a722_0x15091d[_0x853f6d(0x266)],'sampler':a722_0x185b5b[_0x853f6d(0x2ac)]}),_0x24bd65=[_0x227bfc[_0x853f6d(0x26b)],_0x227bfc[_0x853f6d(0x203)],_0x227bfc[_0x853f6d(0x27f)],_0x227bfc['positiveX'],_0x227bfc[_0x853f6d(0x259)],_0x227bfc['positiveZ']];for(var _0x299a99=0x0;_0x299a99<0x6;++_0x299a99){var _0x2ade68=new a722_0x2a654e({'context':_0x1cec2a,'depthRenderbuffer':_0x1392ad,'colorTextures':[_0x24bd65[_0x299a99]],'destroyAttachments':![]}),_0x30d60a=_0x3d8272[_0x853f6d(0x1e4)][_0x299a99];_0x30d60a[_0x853f6d(0x2be)]=_0x2ade68,_0x30d60a[_0x853f6d(0x2b1)]['framebuffer']=_0x2ade68;}_0x3d8272['_shadowMapTexture']=_0x227bfc,_0x3d8272[_0x853f6d(0x2bd)]=_0x1392ad,_0x3d8272['_colorAttachment']=_0x227bfc;}function createFramebuffer(_0x43ec09,_0x371e9e){var _0x591cfa=a722_0x11832e;if(_0x43ec09[_0x591cfa(0x1fe)])createFramebufferCube(_0x43ec09,_0x371e9e);else _0x43ec09['_usesDepthTexture']?createFramebufferDepth(_0x43ec09,_0x371e9e):createFramebufferColor(_0x43ec09,_0x371e9e);}function checkFramebuffer(_0x357e8a,_0x45a082){var _0x195e1d=a722_0x11832e;_0x357e8a[_0x195e1d(0x2bb)]&&_0x357e8a[_0x195e1d(0x1e4)][0x0][_0x195e1d(0x2be)][_0x195e1d(0x22c)]!==a722_0xb0eb6f[_0x195e1d(0x20b)]&&(_0x357e8a[_0x195e1d(0x2bb)]=![],createRenderStates(_0x357e8a),destroyFramebuffer(_0x357e8a),createFramebuffer(_0x357e8a,_0x45a082));}function updateFramebuffer(_0x5ea8ec,_0x38f346){var _0x458bf4=a722_0x11832e;(!a722_0x6d4899(_0x5ea8ec[_0x458bf4(0x1e4)][0x0]['framebuffer'])||_0x5ea8ec['_shadowMapTexture']['width']!==_0x5ea8ec[_0x458bf4(0x245)]['x'])&&(destroyFramebuffer(_0x5ea8ec),createFramebuffer(_0x5ea8ec,_0x38f346),checkFramebuffer(_0x5ea8ec,_0x38f346),clearFramebuffer(_0x5ea8ec,_0x38f346));}function clearFramebuffer(_0x24d2bb,_0x43c2ad,_0x46ae1c){var _0x590e29=a722_0x11832e;_0x46ae1c=a722_0x394c31(_0x46ae1c,0x0),(_0x24d2bb['_isPointLight']||_0x46ae1c===0x0)&&(_0x24d2bb[_0x590e29(0x23a)][_0x590e29(0x2be)]=_0x24d2bb['_passes'][_0x46ae1c][_0x590e29(0x2be)],_0x24d2bb[_0x590e29(0x23a)][_0x590e29(0x21a)](_0x43c2ad,_0x24d2bb[_0x590e29(0x1f0)]));}function resize(_0x4723bf,_0x3750bc){var _0x5cfedc=a722_0x11832e;_0x4723bf['_size']=_0x3750bc;var _0x122bab=_0x4723bf[_0x5cfedc(0x1e4)],_0x429240=_0x122bab[_0x5cfedc(0x2d1)],_0x2316e9=_0x4723bf[_0x5cfedc(0x245)];if(_0x4723bf['_isPointLight']){_0x3750bc=a722_0x192353[_0x5cfedc(0x25c)]>=_0x3750bc?_0x3750bc:a722_0x192353[_0x5cfedc(0x25c)],_0x2316e9['x']=_0x3750bc,_0x2316e9['y']=_0x3750bc;var _0x1ea81f=new a722_0x3caac3(0x0,0x0,_0x3750bc,_0x3750bc);_0x122bab[0x0][_0x5cfedc(0x2b1)][_0x5cfedc(0x237)]=_0x1ea81f,_0x122bab[0x1][_0x5cfedc(0x2b1)]['viewport']=_0x1ea81f,_0x122bab[0x2][_0x5cfedc(0x2b1)]['viewport']=_0x1ea81f,_0x122bab[0x3]['passState']['viewport']=_0x1ea81f,_0x122bab[0x4][_0x5cfedc(0x2b1)][_0x5cfedc(0x237)]=_0x1ea81f,_0x122bab[0x5][_0x5cfedc(0x2b1)][_0x5cfedc(0x237)]=_0x1ea81f;}else{if(_0x429240===0x1)_0x3750bc=a722_0x192353[_0x5cfedc(0x29c)]>=_0x3750bc?_0x3750bc:a722_0x192353[_0x5cfedc(0x29c)],_0x2316e9['x']=_0x3750bc,_0x2316e9['y']=_0x3750bc,_0x122bab[0x0][_0x5cfedc(0x2b1)]['viewport']=new a722_0x3caac3(0x0,0x0,_0x3750bc,_0x3750bc);else _0x429240===0x4&&(_0x3750bc=a722_0x192353[_0x5cfedc(0x29c)]>=_0x3750bc*0x2?_0x3750bc:a722_0x192353[_0x5cfedc(0x29c)]/0x2,_0x2316e9['x']=_0x3750bc*0x2,_0x2316e9['y']=_0x3750bc*0x2,_0x122bab[0x0]['passState'][_0x5cfedc(0x237)]=new a722_0x3caac3(0x0,0x0,_0x3750bc,_0x3750bc),_0x122bab[0x1][_0x5cfedc(0x2b1)]['viewport']=new a722_0x3caac3(_0x3750bc,0x0,_0x3750bc,_0x3750bc),_0x122bab[0x2][_0x5cfedc(0x2b1)][_0x5cfedc(0x237)]=new a722_0x3caac3(0x0,_0x3750bc,_0x3750bc,_0x3750bc),_0x122bab[0x3][_0x5cfedc(0x2b1)]['viewport']=new a722_0x3caac3(_0x3750bc,_0x3750bc,_0x3750bc,_0x3750bc));}_0x4723bf['_clearPassState'][_0x5cfedc(0x237)]=new a722_0x3caac3(0x0,0x0,_0x2316e9['x'],_0x2316e9['y']);for(var _0x4914f7=0x0;_0x4914f7<_0x429240;++_0x4914f7){var _0x5c6d5f=_0x122bab[_0x4914f7],_0x22ffb0=_0x5c6d5f['passState'][_0x5cfedc(0x237)],_0x1430c9=_0x22ffb0['x']/_0x2316e9['x'],_0x33f588=_0x22ffb0['y']/_0x2316e9['y'],_0x4a9249=_0x22ffb0['width']/_0x2316e9['x'],_0x47d50f=_0x22ffb0[_0x5cfedc(0x26d)]/_0x2316e9['y'];_0x5c6d5f[_0x5cfedc(0x230)]=new a722_0x4f2421(_0x4a9249,0x0,0x0,_0x1430c9,0x0,_0x47d50f,0x0,_0x33f588,0x0,0x0,0x1,0x0,0x0,0x0,0x0,0x1);}}var scratchViewport=new a722_0x3caac3();function createDebugShadowViewCommand(_0x338eb0,_0x34971f){var _0xc690b7=a722_0x11832e,_0x4dfab2;_0x338eb0[_0xc690b7(0x1fe)]?_0x4dfab2=_0xc690b7(0x21b)+_0xc690b7(0x22b)+_0xc690b7(0x2cf)+'{\x20\x0a'+_0xc690b7(0x23e)+_0xc690b7(0x220)+'\x20\x0a'+_0xc690b7(0x25a)+_0xc690b7(0x206)+_0xc690b7(0x273)+_0xc690b7(0x227)+_0xc690b7(0x234)+_0xc690b7(0x1fd)+_0xc690b7(0x1e6)+_0xc690b7(0x260)+'\x20\x20\x20\x20\x20\x20\x20\x20else\x20if\x20(uv.x\x20<\x200.666)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.y\x20=\x20-1.0;\x20\x0a'+_0xc690b7(0x1f2)+_0xc690b7(0x1e6)+_0xc690b7(0x260)+_0xc690b7(0x2b2)+'\x20\x20\x20\x20\x20\x20\x20\x20{\x20\x0a'+_0xc690b7(0x2bf)+_0xc690b7(0x1ef)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.y\x20=\x20uv.y\x20*\x204.0\x20-\x201.0;\x20\x0a'+_0xc690b7(0x260)+_0xc690b7(0x2d4)+_0xc690b7(0x292)+_0xc690b7(0x206)+_0xc690b7(0x273)+_0xc690b7(0x227)+_0xc690b7(0x28d)+_0xc690b7(0x1fd)+_0xc690b7(0x238)+_0xc690b7(0x260)+_0xc690b7(0x29d)+_0xc690b7(0x227)+_0xc690b7(0x286)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20dir.x\x20=\x20uv.x\x20*\x206.0\x20-\x203.0;\x20\x0a'+_0xc690b7(0x238)+_0xc690b7(0x260)+_0xc690b7(0x2b2)+_0xc690b7(0x227)+_0xc690b7(0x23b)+_0xc690b7(0x1ef)+_0xc690b7(0x1e8)+_0xc690b7(0x260)+_0xc690b7(0x2d4)+'\x20\x0a'+_0xc690b7(0x256)+_0xc690b7(0x202)+_0xc690b7(0x20f):_0x4dfab2=_0xc690b7(0x28e)+'varying\x20vec2\x20v_textureCoordinates;\x20\x0a'+'void\x20main()\x20\x0a'+'{\x20\x0a'+(_0x338eb0['_usesDepthTexture']?_0xc690b7(0x248):_0xc690b7(0x2b9))+'\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(vec3(shadow),\x201.0);\x20\x0a'+_0xc690b7(0x20f);var _0x59bd9a=_0x34971f[_0xc690b7(0x1ed)](_0x4dfab2,{'uniformMap':{'shadowMap_texture':function(){var _0xa467c7=_0xc690b7;return _0x338eb0[_0xa467c7(0x29e)];},'shadowMap_textureCube':function(){return _0x338eb0['_shadowMapTexture'];}}});return _0x59bd9a['pass']=a722_0x569a90[_0xc690b7(0x1f3)],_0x59bd9a;}function updateDebugShadowViewCommand(_0x34532d,_0x2d136a){var _0x3a11b1=a722_0x11832e,_0x4801ac=_0x2d136a[_0x3a11b1(0x2ab)],_0x407826=_0x2d136a[_0x3a11b1(0x2ab)][_0x3a11b1(0x216)],_0x54888c=_0x2d136a[_0x3a11b1(0x2ab)]['drawingBufferHeight'],_0xc6e811=Math['min'](_0x407826,_0x54888c)*0.3,_0x21845a=scratchViewport;_0x21845a['x']=_0x407826-_0xc6e811,_0x21845a['y']=0x0,_0x21845a[_0x3a11b1(0x264)]=_0xc6e811,_0x21845a[_0x3a11b1(0x26d)]=_0xc6e811;var _0x49307c=_0x34532d['_debugShadowViewCommand'];!a722_0x6d4899(_0x49307c)&&(_0x49307c=createDebugShadowViewCommand(_0x34532d,_0x4801ac),_0x34532d[_0x3a11b1(0x29a)]=_0x49307c),(!a722_0x6d4899(_0x49307c[_0x3a11b1(0x229)])||!a722_0x3caac3[_0x3a11b1(0x247)](_0x49307c['renderState'][_0x3a11b1(0x237)],_0x21845a))&&(_0x49307c[_0x3a11b1(0x229)]=a722_0x15589a[_0x3a11b1(0x2c3)]({'viewport':a722_0x3caac3['clone'](_0x21845a)})),_0x2d136a[_0x3a11b1(0x243)]['push'](_0x34532d[_0x3a11b1(0x29a)]);}var frustumCornersNDC=new Array(0x8);frustumCornersNDC[0x0]=new a722_0x122b78(-0x1,-0x1,-0x1,0x1),frustumCornersNDC[0x1]=new a722_0x122b78(0x1,-0x1,-0x1,0x1),frustumCornersNDC[0x2]=new a722_0x122b78(0x1,0x1,-0x1,0x1),frustumCornersNDC[0x3]=new a722_0x122b78(-0x1,0x1,-0x1,0x1),frustumCornersNDC[0x4]=new a722_0x122b78(-0x1,-0x1,0x1,0x1),frustumCornersNDC[0x5]=new a722_0x122b78(0x1,-0x1,0x1,0x1),frustumCornersNDC[0x6]=new a722_0x122b78(0x1,0x1,0x1,0x1),frustumCornersNDC[0x7]=new a722_0x122b78(-0x1,0x1,0x1,0x1);var scratchMatrix=new a722_0x4f2421(),scratchFrustumCorners=new Array(0x8);for(var i=0x0;i<0x8;++i){scratchFrustumCorners[i]=new a722_0x122b78();}function createDebugPointLight(_0x2dc24f,_0x61eaca){var _0x19d1a9=a722_0x11832e,_0x3cf13f=new a722_0x5c7703({'geometry':new a722_0x254c26({'minimum':new a722_0xf1d54b(-0.5,-0.5,-0.5),'maximum':new a722_0xf1d54b(0.5,0.5,0.5)}),'attributes':{'color':a722_0x440429[_0x19d1a9(0x24d)](_0x61eaca)}}),_0x2cecd7=new a722_0x5c7703({'geometry':new a722_0x5572c2({'radius':0.5}),'attributes':{'color':a722_0x440429[_0x19d1a9(0x24d)](_0x61eaca)}});return new a722_0x36716f({'geometryInstances':[_0x3cf13f,_0x2cecd7],'appearance':new a722_0x3b3db4({'translucent':![],'flat':!![]}),'asynchronous':![],'modelMatrix':_0x2dc24f});}var debugOutlineColors=[a722_0x1a5857[a722_0x11832e(0x232)],a722_0x1a5857[a722_0x11832e(0x2a2)],a722_0x1a5857[a722_0x11832e(0x211)],a722_0x1a5857[a722_0x11832e(0x2ba)]],scratchScale=new a722_0xf1d54b();function applyDebugSettings(_0x12f669,_0x1c9b54){var _0x26b0d8=a722_0x11832e;updateDebugShadowViewCommand(_0x12f669,_0x1c9b54);var _0x5b7b09=_0x12f669[_0x26b0d8(0x2d5)]&&!_0x12f669[_0x26b0d8(0x2b3)];_0x12f669['_debugFreezeFrame']=_0x12f669[_0x26b0d8(0x2d5)];_0x12f669[_0x26b0d8(0x2d5)]&&(_0x5b7b09&&(_0x12f669[_0x26b0d8(0x214)]=_0x12f669[_0x26b0d8(0x214)]&&_0x12f669[_0x26b0d8(0x214)][_0x26b0d8(0x2c0)](),_0x12f669[_0x26b0d8(0x214)]=new a722_0x41fc3b({'camera':_0x12f669[_0x26b0d8(0x27a)],'color':a722_0x1a5857[_0x26b0d8(0x2bc)],'updateOnChange':![]})),_0x12f669[_0x26b0d8(0x214)][_0x26b0d8(0x279)](_0x1c9b54));if(_0x12f669[_0x26b0d8(0x24b)]){if(_0x12f669['debugFreezeFrame']){_0x5b7b09&&(_0x12f669[_0x26b0d8(0x219)]=_0x12f669['_debugLightFrustum']&&_0x12f669[_0x26b0d8(0x219)][_0x26b0d8(0x2c0)](),_0x12f669[_0x26b0d8(0x219)]=new a722_0x41fc3b({'camera':_0x12f669['_shadowMapCamera'],'color':a722_0x1a5857[_0x26b0d8(0x263)],'updateOnChange':![]}));_0x12f669[_0x26b0d8(0x219)]['update'](_0x1c9b54);for(var _0x493308=0x0;_0x493308<_0x12f669[_0x26b0d8(0x25f)];++_0x493308){_0x5b7b09&&(_0x12f669[_0x26b0d8(0x270)][_0x493308]=_0x12f669[_0x26b0d8(0x270)][_0x493308]&&_0x12f669['_debugCascadeFrustums'][_0x493308][_0x26b0d8(0x2c0)](),_0x12f669[_0x26b0d8(0x270)][_0x493308]=new a722_0x41fc3b({'camera':_0x12f669['_passes'][_0x493308][_0x26b0d8(0x22d)],'color':debugOutlineColors[_0x493308],'updateOnChange':![]})),_0x12f669[_0x26b0d8(0x270)][_0x493308][_0x26b0d8(0x279)](_0x1c9b54);}}}else{if(_0x12f669['_isPointLight']){if(!a722_0x6d4899(_0x12f669[_0x26b0d8(0x219)])||_0x12f669[_0x26b0d8(0x225)]){var _0x564f8c=_0x12f669[_0x26b0d8(0x2dd)][_0x26b0d8(0x268)],_0x4e5253=a722_0x2bd86d['IDENTITY'],_0xeeb79b=_0x12f669['_pointLightRadius']*0x2,_0x35b665=a722_0xf1d54b[_0x26b0d8(0x21f)](_0xeeb79b,_0xeeb79b,_0xeeb79b,scratchScale),_0x14e8e4=a722_0x4f2421[_0x26b0d8(0x2c4)](_0x564f8c,_0x4e5253,_0x35b665,scratchMatrix);_0x12f669[_0x26b0d8(0x219)]=_0x12f669['_debugLightFrustum']&&_0x12f669['_debugLightFrustum']['destroy'](),_0x12f669[_0x26b0d8(0x219)]=createDebugPointLight(_0x14e8e4,a722_0x1a5857[_0x26b0d8(0x263)]);}_0x12f669[_0x26b0d8(0x219)][_0x26b0d8(0x279)](_0x1c9b54);}else(!a722_0x6d4899(_0x12f669[_0x26b0d8(0x219)])||_0x12f669[_0x26b0d8(0x225)])&&(_0x12f669[_0x26b0d8(0x219)]=new a722_0x41fc3b({'camera':_0x12f669[_0x26b0d8(0x2dd)],'color':a722_0x1a5857[_0x26b0d8(0x263)],'updateOnChange':![]})),_0x12f669['_debugLightFrustum']['update'](_0x1c9b54);}}function ShadowMapCamera(){var _0x2cc12d=a722_0x11832e;this[_0x2cc12d(0x23d)]=new a722_0x4f2421(),this['inverseViewMatrix']=new a722_0x4f2421(),this[_0x2cc12d(0x26e)]=undefined,this[_0x2cc12d(0x22a)]=new a722_0x296224(),this[_0x2cc12d(0x268)]=new a722_0xf1d54b(),this[_0x2cc12d(0x2a9)]=a722_0xf1d54b['clone'](a722_0xf1d54b['UNIT_Z']),this['upWC']=a722_0xf1d54b['clone'](a722_0xf1d54b['UNIT_Y']),this[_0x2cc12d(0x1fa)]=a722_0xf1d54b[_0x2cc12d(0x250)](a722_0xf1d54b[_0x2cc12d(0x1e3)]),this['viewProjectionMatrix']=new a722_0x4f2421();}ShadowMapCamera[a722_0x11832e(0x24f)]['clone']=function(_0x81c3d9){var _0x3f8f72=a722_0x11832e;a722_0x4f2421[_0x3f8f72(0x250)](_0x81c3d9[_0x3f8f72(0x23d)],this[_0x3f8f72(0x23d)]),a722_0x4f2421[_0x3f8f72(0x250)](_0x81c3d9[_0x3f8f72(0x1fc)],this[_0x3f8f72(0x1fc)]),this[_0x3f8f72(0x26e)]=_0x81c3d9['frustum']['clone'](this[_0x3f8f72(0x26e)]),a722_0x296224[_0x3f8f72(0x250)](_0x81c3d9[_0x3f8f72(0x22a)],this[_0x3f8f72(0x22a)]),a722_0xf1d54b[_0x3f8f72(0x250)](_0x81c3d9[_0x3f8f72(0x268)],this[_0x3f8f72(0x268)]),a722_0xf1d54b[_0x3f8f72(0x250)](_0x81c3d9[_0x3f8f72(0x2a9)],this[_0x3f8f72(0x2a9)]),a722_0xf1d54b[_0x3f8f72(0x250)](_0x81c3d9[_0x3f8f72(0x265)],this['upWC']),a722_0xf1d54b[_0x3f8f72(0x250)](_0x81c3d9[_0x3f8f72(0x1fa)],this[_0x3f8f72(0x1fa)]);};var scaleBiasMatrix=new a722_0x4f2421(0.5,0x0,0x0,0.5,0x0,0.5,0x0,0.5,0x0,0x0,0.5,0.5,0x0,0x0,0x0,0x1);ShadowMapCamera[a722_0x11832e(0x24f)][a722_0x11832e(0x205)]=function(){var _0x4442ee=a722_0x11832e,_0x392e94=this[_0x4442ee(0x23d)],_0xa6eb9d=this[_0x4442ee(0x26e)][_0x4442ee(0x242)];return a722_0x4f2421['multiply'](_0xa6eb9d,_0x392e94,this['viewProjectionMatrix']),a722_0x4f2421[_0x4442ee(0x289)](scaleBiasMatrix,this[_0x4442ee(0x2c1)],this[_0x4442ee(0x2c1)]),this[_0x4442ee(0x2c1)];};var scratchSplits=new Array(0x5),scratchFrustum=new a722_0x2fab3d(),scratchCascadeDistances=new Array(0x4),scratchMin=new a722_0xf1d54b(),scratchMax=new a722_0xf1d54b();function computeCascades(_0x437576,_0x1685f2){var _0x3b4af4=a722_0x11832e,_0x19a5f6=_0x437576[_0x3b4af4(0x2dd)],_0x2bc385=_0x437576[_0x3b4af4(0x27a)],_0x207811=_0x2bc385[_0x3b4af4(0x26e)]['near'],_0x29d086=_0x2bc385['frustum'][_0x3b4af4(0x201)],_0x101d89=_0x437576[_0x3b4af4(0x25f)],_0x403292,_0x5ae637=_0x29d086-_0x207811,_0x2b7d4c=_0x29d086/_0x207811,_0x5b5030=0.9,_0x16722e=![];_0x1685f2[_0x3b4af4(0x231)][_0x3b4af4(0x1f1)]<0xc8&&(_0x16722e=!![],_0x5b5030=0.9);var _0x54df43=scratchCascadeDistances,_0x490e23=scratchSplits;_0x490e23[0x0]=_0x207811,_0x490e23[_0x101d89]=_0x29d086;for(_0x403292=0x0;_0x403292<_0x101d89;++_0x403292){var _0x7a848a=(_0x403292+0x1)/_0x101d89,_0x17e190=_0x207811*Math[_0x3b4af4(0x200)](_0x2b7d4c,_0x7a848a),_0x314785=_0x207811+_0x5ae637*_0x7a848a,_0x387a7c=a722_0x5a8167[_0x3b4af4(0x23c)](_0x314785,_0x17e190,_0x5b5030);_0x490e23[_0x403292+0x1]=_0x387a7c,_0x54df43[_0x403292]=_0x387a7c-_0x490e23[_0x403292];}if(_0x16722e){for(_0x403292=0x0;_0x403292<_0x101d89;++_0x403292){_0x54df43[_0x403292]=Math[_0x3b4af4(0x28b)](_0x54df43[_0x403292],_0x437576['_maximumCascadeDistances'][_0x403292]);}var _0x1a21d9=_0x490e23[0x0];for(_0x403292=0x0;_0x403292<_0x101d89-0x1;++_0x403292){_0x1a21d9+=_0x54df43[_0x403292],_0x490e23[_0x403292+0x1]=_0x1a21d9;}}a722_0x122b78[_0x3b4af4(0x1eb)](_0x490e23,0x0,_0x437576['_cascadeSplits'][0x0]),a722_0x122b78[_0x3b4af4(0x1eb)](_0x490e23,0x1,_0x437576[_0x3b4af4(0x2ce)][0x1]),a722_0x122b78['unpack'](_0x54df43,0x0,_0x437576[_0x3b4af4(0x2b6)]);var _0xd9034c=_0x19a5f6['frustum'],_0x32453f=_0xd9034c[_0x3b4af4(0x235)],_0x191c3d=_0xd9034c['right'],_0x1d458d=_0xd9034c['bottom'],_0x2747b9=_0xd9034c[_0x3b4af4(0x2a8)],_0x25c694=_0xd9034c[_0x3b4af4(0x22e)],_0x5170fe=_0xd9034c['far'],_0x1166e1=_0x19a5f6['positionWC'],_0x1c9240=_0x19a5f6['directionWC'],_0x414c22=_0x19a5f6[_0x3b4af4(0x265)],_0x496d28=_0x2bc385[_0x3b4af4(0x26e)][_0x3b4af4(0x250)](scratchFrustum),_0x5dc375=_0x19a5f6['getViewProjection']();for(_0x403292=0x0;_0x403292<_0x101d89;++_0x403292){_0x496d28[_0x3b4af4(0x22e)]=_0x490e23[_0x403292],_0x496d28[_0x3b4af4(0x201)]=_0x490e23[_0x403292+0x1];var _0x5b6df8=a722_0x4f2421[_0x3b4af4(0x289)](_0x496d28[_0x3b4af4(0x242)],_0x2bc385[_0x3b4af4(0x23d)],scratchMatrix),_0x39e7bc=a722_0x4f2421[_0x3b4af4(0x1ee)](_0x5b6df8,scratchMatrix),_0x580c04=a722_0x4f2421[_0x3b4af4(0x289)](_0x5dc375,_0x39e7bc,scratchMatrix),_0x1dccc7=a722_0xf1d54b['fromElements'](Number[_0x3b4af4(0x27b)],Number['MAX_VALUE'],Number['MAX_VALUE'],scratchMin),_0x5621bc=a722_0xf1d54b[_0x3b4af4(0x21f)](-Number[_0x3b4af4(0x27b)],-Number[_0x3b4af4(0x27b)],-Number[_0x3b4af4(0x27b)],scratchMax);for(var _0x516c57=0x0;_0x516c57<0x8;++_0x516c57){var _0x538f60=a722_0x122b78[_0x3b4af4(0x250)](frustumCornersNDC[_0x516c57],scratchFrustumCorners[_0x516c57]);a722_0x4f2421['multiplyByVector'](_0x580c04,_0x538f60,_0x538f60),a722_0xf1d54b[_0x3b4af4(0x27d)](_0x538f60,_0x538f60['w'],_0x538f60),a722_0xf1d54b[_0x3b4af4(0x223)](_0x538f60,_0x1dccc7,_0x1dccc7),a722_0xf1d54b['maximumByComponent'](_0x538f60,_0x5621bc,_0x5621bc);}_0x1dccc7['x']=Math[_0x3b4af4(0x210)](_0x1dccc7['x'],0x0),_0x1dccc7['y']=Math[_0x3b4af4(0x210)](_0x1dccc7['y'],0x0),_0x1dccc7['z']=0x0,_0x5621bc['x']=Math[_0x3b4af4(0x28b)](_0x5621bc['x'],0x1),_0x5621bc['y']=Math['min'](_0x5621bc['y'],0x1),_0x5621bc['z']=Math[_0x3b4af4(0x28b)](_0x5621bc['z'],0x1);var _0x5db22f=_0x437576[_0x3b4af4(0x1e4)][_0x403292],_0xb5be6c=_0x5db22f[_0x3b4af4(0x22d)];_0xb5be6c['clone'](_0x19a5f6);var _0x563196=_0xb5be6c[_0x3b4af4(0x26e)];_0x563196[_0x3b4af4(0x235)]=_0x32453f+_0x1dccc7['x']*(_0x191c3d-_0x32453f),_0x563196[_0x3b4af4(0x282)]=_0x32453f+_0x5621bc['x']*(_0x191c3d-_0x32453f),_0x563196['bottom']=_0x1d458d+_0x1dccc7['y']*(_0x2747b9-_0x1d458d),_0x563196[_0x3b4af4(0x2a8)]=_0x1d458d+_0x5621bc['y']*(_0x2747b9-_0x1d458d),_0x563196[_0x3b4af4(0x22e)]=_0x25c694+_0x1dccc7['z']*(_0x5170fe-_0x25c694),_0x563196[_0x3b4af4(0x201)]=_0x25c694+_0x5621bc['z']*(_0x5170fe-_0x25c694),_0x5db22f[_0x3b4af4(0x267)]=_0xb5be6c[_0x3b4af4(0x26e)][_0x3b4af4(0x2de)](_0x1166e1,_0x1c9240,_0x414c22);var _0x1fd2e6=_0x437576[_0x3b4af4(0x28f)][_0x403292];a722_0x4f2421['multiply'](_0xb5be6c[_0x3b4af4(0x205)](),_0x2bc385[_0x3b4af4(0x1fc)],_0x1fd2e6),a722_0x4f2421[_0x3b4af4(0x289)](_0x5db22f[_0x3b4af4(0x230)],_0x1fd2e6,_0x1fd2e6);}}var scratchLightView=new a722_0x4f2421(),scratchRight=new a722_0xf1d54b(),scratchUp=new a722_0xf1d54b(),scratchTranslation=new a722_0xf1d54b();function fitShadowMapToScene(_0x3a7c94,_0x4fb8d2){var _0x34dd24=a722_0x11832e,_0x25694c=_0x3a7c94[_0x34dd24(0x2dd)],_0x2d339e=_0x3a7c94['_sceneCamera'],_0x48a098=a722_0x4f2421[_0x34dd24(0x289)](_0x2d339e[_0x34dd24(0x26e)][_0x34dd24(0x242)],_0x2d339e[_0x34dd24(0x23d)],scratchMatrix),_0x3e3d14=a722_0x4f2421['inverse'](_0x48a098,scratchMatrix),_0x3d0a7b=_0x25694c[_0x34dd24(0x2a9)],_0x550b04=_0x2d339e[_0x34dd24(0x2a9)];a722_0xf1d54b[_0x34dd24(0x221)](_0x3d0a7b,_0x550b04,a722_0x5a8167['EPSILON10'])&&(_0x550b04=_0x2d339e[_0x34dd24(0x265)]);var _0x5984f6=a722_0xf1d54b[_0x34dd24(0x272)](_0x3d0a7b,_0x550b04,scratchRight);_0x550b04=a722_0xf1d54b[_0x34dd24(0x272)](_0x5984f6,_0x3d0a7b,scratchUp),a722_0xf1d54b[_0x34dd24(0x24c)](_0x550b04,_0x550b04),a722_0xf1d54b['normalize'](_0x5984f6,_0x5984f6);var _0x2ca250=a722_0xf1d54b['fromElements'](0x0,0x0,0x0,scratchTranslation),_0x2eeed3=a722_0x4f2421[_0x34dd24(0x2d7)](_0x2ca250,_0x3d0a7b,_0x550b04,_0x5984f6,scratchLightView),_0x22533d=a722_0x4f2421[_0x34dd24(0x289)](_0x2eeed3,_0x3e3d14,scratchMatrix),_0x3c13f9=a722_0xf1d54b['fromElements'](Number['MAX_VALUE'],Number[_0x34dd24(0x27b)],Number[_0x34dd24(0x27b)],scratchMin),_0x337f8b=a722_0xf1d54b[_0x34dd24(0x21f)](-Number[_0x34dd24(0x27b)],-Number[_0x34dd24(0x27b)],-Number[_0x34dd24(0x27b)],scratchMax);for(var _0x16e76c=0x0;_0x16e76c<0x8;++_0x16e76c){var _0x41d273=a722_0x122b78['clone'](frustumCornersNDC[_0x16e76c],scratchFrustumCorners[_0x16e76c]);a722_0x4f2421[_0x34dd24(0x299)](_0x22533d,_0x41d273,_0x41d273),a722_0xf1d54b[_0x34dd24(0x27d)](_0x41d273,_0x41d273['w'],_0x41d273),a722_0xf1d54b['minimumByComponent'](_0x41d273,_0x3c13f9,_0x3c13f9),a722_0xf1d54b['maximumByComponent'](_0x41d273,_0x337f8b,_0x337f8b);}_0x337f8b['z']+=0x3e8,_0x3c13f9['z']-=0xa;var _0x452a05=scratchTranslation;_0x452a05['x']=-(0.5*(_0x3c13f9['x']+_0x337f8b['x'])),_0x452a05['y']=-(0.5*(_0x3c13f9['y']+_0x337f8b['y'])),_0x452a05['z']=-_0x337f8b['z'];var _0x4334ab=a722_0x4f2421[_0x34dd24(0x213)](_0x452a05,scratchMatrix);_0x2eeed3=a722_0x4f2421[_0x34dd24(0x289)](_0x4334ab,_0x2eeed3,_0x2eeed3);var _0x497eaf=0.5*(_0x337f8b['x']-_0x3c13f9['x']),_0x454902=0.5*(_0x337f8b['y']-_0x3c13f9['y']),_0x533ad2=_0x337f8b['z']-_0x3c13f9['z'],_0x5a27e8=_0x25694c[_0x34dd24(0x26e)];_0x5a27e8[_0x34dd24(0x235)]=-_0x497eaf,_0x5a27e8[_0x34dd24(0x282)]=_0x497eaf,_0x5a27e8[_0x34dd24(0x20e)]=-_0x454902,_0x5a27e8[_0x34dd24(0x2a8)]=_0x454902,_0x5a27e8[_0x34dd24(0x22e)]=0.01,_0x5a27e8['far']=_0x533ad2,a722_0x4f2421[_0x34dd24(0x250)](_0x2eeed3,_0x25694c[_0x34dd24(0x23d)]),a722_0x4f2421[_0x34dd24(0x1ee)](_0x2eeed3,_0x25694c[_0x34dd24(0x1fc)]),a722_0x4f2421[_0x34dd24(0x2db)](_0x25694c['inverseViewMatrix'],_0x25694c[_0x34dd24(0x268)]),_0x4fb8d2['mapProjection']['ellipsoid'][_0x34dd24(0x233)](_0x25694c[_0x34dd24(0x268)],_0x25694c['positionCartographic']),a722_0xf1d54b[_0x34dd24(0x250)](_0x3d0a7b,_0x25694c['directionWC']),a722_0xf1d54b[_0x34dd24(0x250)](_0x550b04,_0x25694c[_0x34dd24(0x265)]),a722_0xf1d54b[_0x34dd24(0x250)](_0x5984f6,_0x25694c[_0x34dd24(0x1fa)]);}var directions=[new a722_0xf1d54b(-0x1,0x0,0x0),new a722_0xf1d54b(0x0,-0x1,0x0),new a722_0xf1d54b(0x0,0x0,-0x1),new a722_0xf1d54b(0x1,0x0,0x0),new a722_0xf1d54b(0x0,0x1,0x0),new a722_0xf1d54b(0x0,0x0,0x1)],ups=[new a722_0xf1d54b(0x0,-0x1,0x0),new a722_0xf1d54b(0x0,0x0,-0x1),new a722_0xf1d54b(0x0,-0x1,0x0),new a722_0xf1d54b(0x0,-0x1,0x0),new a722_0xf1d54b(0x0,0x0,0x1),new a722_0xf1d54b(0x0,-0x1,0x0)],rights=[new a722_0xf1d54b(0x0,0x0,0x1),new a722_0xf1d54b(0x1,0x0,0x0),new a722_0xf1d54b(-0x1,0x0,0x0),new a722_0xf1d54b(0x0,0x0,-0x1),new a722_0xf1d54b(0x1,0x0,0x0),new a722_0xf1d54b(0x1,0x0,0x0)];function computeOmnidirectional(_0x5511fa,_0x14a0c4){var _0x225603=a722_0x11832e,_0x1e631e=new a722_0x2fab3d();_0x1e631e['fov']=a722_0x5a8167[_0x225603(0x1fb)],_0x1e631e[_0x225603(0x22e)]=0x1,_0x1e631e[_0x225603(0x201)]=_0x5511fa[_0x225603(0x2cd)],_0x1e631e[_0x225603(0x27e)]=0x1;for(var _0x4ac7a9=0x0;_0x4ac7a9<0x6;++_0x4ac7a9){var _0x3ce48a=_0x5511fa[_0x225603(0x1e4)][_0x4ac7a9][_0x225603(0x22d)];_0x3ce48a['positionWC']=_0x5511fa[_0x225603(0x2dd)]['positionWC'],_0x3ce48a[_0x225603(0x22a)]=_0x14a0c4['mapProjection']['ellipsoid'][_0x225603(0x233)](_0x3ce48a[_0x225603(0x268)],_0x3ce48a[_0x225603(0x22a)]),_0x3ce48a[_0x225603(0x2a9)]=directions[_0x4ac7a9],_0x3ce48a['upWC']=ups[_0x4ac7a9],_0x3ce48a[_0x225603(0x1fa)]=rights[_0x4ac7a9],a722_0x4f2421[_0x225603(0x2d7)](_0x3ce48a[_0x225603(0x268)],_0x3ce48a['directionWC'],_0x3ce48a['upWC'],_0x3ce48a[_0x225603(0x1fa)],_0x3ce48a[_0x225603(0x23d)]),a722_0x4f2421['inverse'](_0x3ce48a[_0x225603(0x23d)],_0x3ce48a[_0x225603(0x1fc)]),_0x3ce48a[_0x225603(0x26e)]=_0x1e631e;}}var scratchCartesian1=new a722_0xf1d54b(),scratchCartesian2=new a722_0xf1d54b(),scratchBoundingSphere=new a722_0x3597d3(),scratchCenter=scratchBoundingSphere[a722_0x11832e(0x2c9)];function checkVisibility(_0xa290aa,_0x2c1ef5){var _0x313b86=a722_0x11832e,_0x199600=_0xa290aa[_0x313b86(0x27a)],_0x555e80=_0xa290aa[_0x313b86(0x2dd)],_0x45a2c5=scratchBoundingSphere;if(_0xa290aa[_0x313b86(0x24b)]){if(_0x199600[_0x313b86(0x26e)]['near']>=_0xa290aa[_0x313b86(0x2c7)]){_0xa290aa[_0x313b86(0x2a7)]=!![],_0xa290aa[_0x313b86(0x225)]=![];return;}var _0x57aae3=_0x2c1ef5[_0x313b86(0x224)]['ellipsoid']['geodeticSurfaceNormal'](_0x199600[_0x313b86(0x268)],scratchCartesian1),_0x1d4067=a722_0xf1d54b['negate'](_0x555e80['directionWC'],scratchCartesian2),_0x37ac84=a722_0xf1d54b[_0x313b86(0x23f)](_0x57aae3,_0x1d4067);if(_0xa290aa['fadingEnabled']){var _0x12da72=a722_0x5a8167['clamp'](_0x37ac84/0.1,0x0,0x1);_0xa290aa[_0x313b86(0x277)]=a722_0x5a8167['lerp'](0x1,_0xa290aa[_0x313b86(0x28a)],_0x12da72);}else _0xa290aa['_darkness']=_0xa290aa[_0x313b86(0x28a)];if(_0x37ac84<0x0){_0xa290aa[_0x313b86(0x2a7)]=!![],_0xa290aa[_0x313b86(0x225)]=![];return;}_0xa290aa[_0x313b86(0x225)]=!![],_0xa290aa[_0x313b86(0x2a7)]=![];}else{if(_0xa290aa['_isPointLight'])_0x45a2c5[_0x313b86(0x2c9)]=_0x555e80['positionWC'],_0x45a2c5[_0x313b86(0x2a3)]=_0xa290aa[_0x313b86(0x2cd)],_0xa290aa[_0x313b86(0x2a7)]=_0x2c1ef5[_0x313b86(0x267)]['computeVisibility'](_0x45a2c5)===a722_0x4cfefd[_0x313b86(0x204)],_0xa290aa[_0x313b86(0x225)]=!_0xa290aa[_0x313b86(0x2a7)]&&!_0xa290aa[_0x313b86(0x2d2)][_0x313b86(0x247)](_0x45a2c5),a722_0x3597d3[_0x313b86(0x250)](_0x45a2c5,_0xa290aa[_0x313b86(0x2d2)]);else{var _0x46b42a=_0x555e80[_0x313b86(0x26e)][_0x313b86(0x201)]/0x2,_0x5da59a=a722_0xf1d54b[_0x313b86(0x239)](_0x555e80[_0x313b86(0x268)],a722_0xf1d54b[_0x313b86(0x2a1)](_0x555e80['directionWC'],_0x46b42a,scratchCenter),scratchCenter);_0x45a2c5[_0x313b86(0x2c9)]=_0x5da59a,_0x45a2c5['radius']=_0x46b42a,_0xa290aa['_outOfView']=_0x2c1ef5[_0x313b86(0x267)][_0x313b86(0x1ec)](_0x45a2c5)===a722_0x4cfefd[_0x313b86(0x204)],_0xa290aa[_0x313b86(0x225)]=!_0xa290aa[_0x313b86(0x2a7)]&&!_0xa290aa[_0x313b86(0x2d2)][_0x313b86(0x247)](_0x45a2c5),a722_0x3597d3[_0x313b86(0x250)](_0x45a2c5,_0xa290aa[_0x313b86(0x2d2)]);}}}function updateCameras(_0x4ea1b2,_0x5dccd9){var _0x4b4f95=a722_0x11832e,_0x424c6a=_0x5dccd9['camera'],_0x1a2e21=_0x4ea1b2[_0x4b4f95(0x2c8)],_0x508833=_0x4ea1b2[_0x4b4f95(0x27a)],_0x30de6e=_0x4ea1b2[_0x4b4f95(0x2dd)];if(_0x4ea1b2['_cascadesEnabled'])a722_0xf1d54b[_0x4b4f95(0x250)](_0x1a2e21[_0x4b4f95(0x2a9)],_0x30de6e[_0x4b4f95(0x2a9)]);else _0x4ea1b2['_isPointLight']?a722_0xf1d54b[_0x4b4f95(0x250)](_0x1a2e21[_0x4b4f95(0x268)],_0x30de6e[_0x4b4f95(0x268)]):_0x30de6e['clone'](_0x1a2e21);var _0x5d06da=_0x4ea1b2[_0x4b4f95(0x1e5)];a722_0x4f2421[_0x4b4f95(0x294)](_0x424c6a[_0x4b4f95(0x23d)],_0x30de6e[_0x4b4f95(0x2a9)],_0x5d06da),a722_0xf1d54b[_0x4b4f95(0x24c)](_0x5d06da,_0x5d06da),a722_0xf1d54b['negate'](_0x5d06da,_0x5d06da),a722_0x4f2421[_0x4b4f95(0x2a6)](_0x424c6a[_0x4b4f95(0x23d)],_0x30de6e[_0x4b4f95(0x268)],_0x4ea1b2[_0x4b4f95(0x29b)]),_0x4ea1b2[_0x4b4f95(0x29b)]['w']=_0x4ea1b2[_0x4b4f95(0x2cd)];var _0x55d34f,_0x3bff17;_0x4ea1b2[_0x4b4f95(0x208)]?(_0x55d34f=Math[_0x4b4f95(0x28b)](_0x5dccd9['shadowState']['nearPlane'],_0x4ea1b2[_0x4b4f95(0x2c7)]),_0x3bff17=Math['min'](_0x5dccd9[_0x4b4f95(0x231)][_0x4b4f95(0x2ca)],_0x4ea1b2[_0x4b4f95(0x2c7)]),_0x3bff17=Math[_0x4b4f95(0x210)](_0x3bff17,_0x55d34f+0x1)):(_0x55d34f=_0x424c6a[_0x4b4f95(0x26e)][_0x4b4f95(0x22e)],_0x3bff17=_0x4ea1b2[_0x4b4f95(0x2c7)]),_0x4ea1b2[_0x4b4f95(0x27a)]=a722_0x2a403c[_0x4b4f95(0x250)](_0x424c6a,_0x508833),_0x424c6a[_0x4b4f95(0x26e)][_0x4b4f95(0x250)](_0x4ea1b2['_sceneCamera'][_0x4b4f95(0x26e)]),_0x4ea1b2[_0x4b4f95(0x27a)][_0x4b4f95(0x26e)][_0x4b4f95(0x22e)]=_0x55d34f,_0x4ea1b2[_0x4b4f95(0x27a)]['frustum'][_0x4b4f95(0x201)]=_0x3bff17,_0x4ea1b2[_0x4b4f95(0x2da)]=_0x3bff17-_0x55d34f,checkVisibility(_0x4ea1b2,_0x5dccd9),!_0x4ea1b2[_0x4b4f95(0x2ae)]&&_0x4ea1b2[_0x4b4f95(0x2a7)]&&(_0x4ea1b2[_0x4b4f95(0x225)]=!![]),_0x4ea1b2[_0x4b4f95(0x2ae)]=_0x4ea1b2['_outOfView'];}ShadowMap[a722_0x11832e(0x24f)][a722_0x11832e(0x279)]=function(_0x574202){var _0x3b824f=a722_0x11832e;updateCameras(this,_0x574202);if(this[_0x3b824f(0x225)]){updateFramebuffer(this,_0x574202['context']);this[_0x3b824f(0x1fe)]&&computeOmnidirectional(this,_0x574202);this['_cascadesEnabled']&&(fitShadowMapToScene(this,_0x574202),this[_0x3b824f(0x25f)]>0x1&&computeCascades(this,_0x574202));if(!this[_0x3b824f(0x1fe)]){var _0x432f3a=this[_0x3b824f(0x2dd)],_0x41dc34=_0x432f3a[_0x3b824f(0x268)],_0x2386e4=_0x432f3a[_0x3b824f(0x2a9)],_0x1327d6=_0x432f3a[_0x3b824f(0x265)];this[_0x3b824f(0x1f7)]=_0x432f3a[_0x3b824f(0x26e)][_0x3b824f(0x2de)](_0x41dc34,_0x2386e4,_0x1327d6),this[_0x3b824f(0x1e4)][_0x3b824f(0x2d1)]===0x1&&this[_0x3b824f(0x1e4)][0x0]['camera'][_0x3b824f(0x250)](_0x432f3a);}else this['_shadowMapCullingVolume']=a722_0x2afbf5[_0x3b824f(0x1f6)](this['_boundingSphere']);}if(this['_passes'][_0x3b824f(0x2d1)]===0x1){var _0x4d9f7e=this['_sceneCamera'][_0x3b824f(0x1fc)];a722_0x4f2421[_0x3b824f(0x289)](this[_0x3b824f(0x2dd)][_0x3b824f(0x205)](),_0x4d9f7e,this[_0x3b824f(0x26a)]);}this[_0x3b824f(0x1f5)]&&applyDebugSettings(this,_0x574202);},ShadowMap[a722_0x11832e(0x24f)][a722_0x11832e(0x2a0)]=function(_0x38121c,_0x569178){clearFramebuffer(this,_0x38121c,_0x569178);};var scratchTexelStepSize=new a722_0x3f8994();function combineUniforms(_0x252b06,_0x46d07a,_0x4ca941){var _0x5123d5=a722_0x11832e,_0x45eb37=_0x252b06[_0x5123d5(0x1fe)]?_0x252b06[_0x5123d5(0x1f4)]:_0x4ca941?_0x252b06['_terrainBias']:_0x252b06[_0x5123d5(0x27c)],_0x8bc71f={'shadowMap_texture':function(){var _0x46fdc5=_0x5123d5;return _0x252b06[_0x46fdc5(0x29e)];},'shadowMap_textureCube':function(){var _0x28d26c=_0x5123d5;return _0x252b06[_0x28d26c(0x29e)];},'shadowMap_matrix':function(){var _0x3b70fa=_0x5123d5;return _0x252b06[_0x3b70fa(0x26a)];},'shadowMap_cascadeSplits':function(){var _0x137b73=_0x5123d5;return _0x252b06[_0x137b73(0x2ce)];},'shadowMap_cascadeMatrices':function(){return _0x252b06['_cascadeMatrices'];},'shadowMap_lightDirectionEC':function(){var _0x45a56e=_0x5123d5;return _0x252b06[_0x45a56e(0x1e5)];},'shadowMap_lightPositionEC':function(){var _0xe70f15=_0x5123d5;return _0x252b06[_0xe70f15(0x29b)];},'shadowMap_cascadeDistances':function(){var _0x50339b=_0x5123d5;return _0x252b06[_0x50339b(0x2b6)];},'shadowMap_texelSizeDepthBiasAndNormalShadingSmooth':function(){var _0x55e902=_0x5123d5,_0x1bd296=scratchTexelStepSize;return _0x1bd296['x']=0x1/_0x252b06[_0x55e902(0x245)]['x'],_0x1bd296['y']=0x1/_0x252b06[_0x55e902(0x245)]['y'],a722_0x122b78[_0x55e902(0x21f)](_0x1bd296['x'],_0x1bd296['y'],_0x45eb37[_0x55e902(0x20c)],_0x45eb37[_0x55e902(0x24e)],this[_0x55e902(0x228)]);},'shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness':function(){var _0x2d1b14=_0x5123d5;return a722_0x122b78[_0x2d1b14(0x21f)](_0x45eb37[_0x2d1b14(0x26f)],_0x252b06[_0x2d1b14(0x2da)],_0x252b06['maximumDistance'],_0x252b06[_0x2d1b14(0x277)],this[_0x2d1b14(0x25b)]);},'combinedUniforms1':new a722_0x122b78(),'combinedUniforms2':new a722_0x122b78()};return a722_0x481a0e(_0x46d07a,_0x8bc71f,![]);}function createCastDerivedCommand(_0x1132be,_0x1e2831,_0xe5f766,_0x24a87e,_0x46508f,_0x1b851b){var _0x2c67a6=a722_0x11832e,_0x33cfc4,_0x209640,_0x184e3a;a722_0x6d4899(_0x1b851b)&&(_0x33cfc4=_0x1b851b[_0x2c67a6(0x297)],_0x209640=_0x1b851b[_0x2c67a6(0x229)],_0x184e3a=_0x1b851b['uniformMap']);_0x1b851b=a722_0x3d55c4[_0x2c67a6(0x2a5)](_0xe5f766,_0x1b851b),_0x1b851b['castShadows']=!![],_0x1b851b[_0x2c67a6(0x24a)]=![];if(!a722_0x6d4899(_0x33cfc4)||_0x46508f!==_0xe5f766[_0x2c67a6(0x297)]['id']||_0x1e2831){var _0x374ff4=_0xe5f766[_0x2c67a6(0x297)],_0x5794d6=_0xe5f766['pass']===a722_0x569a90[_0x2c67a6(0x2af)],_0x3c739d=_0xe5f766['pass']!==a722_0x569a90[_0x2c67a6(0x285)],_0x45407f=_0x1132be[_0x2c67a6(0x1fe)],_0x4fc437=_0x1132be[_0x2c67a6(0x2bb)],_0x2ef430=a722_0x489bc1[_0x2c67a6(0x1ea)](_0x45407f,_0x5794d6,_0x4fc437,_0x3c739d);_0x33cfc4=_0x24a87e[_0x2c67a6(0x254)]['getDerivedShaderProgram'](_0x374ff4,_0x2ef430);if(!a722_0x6d4899(_0x33cfc4)){var _0x52cd14=_0x374ff4[_0x2c67a6(0x251)],_0x5b4624=_0x374ff4['fragmentShaderSource'],_0x400fac=a722_0x489bc1[_0x2c67a6(0x226)](_0x52cd14,_0x45407f,_0x5794d6),_0x121b13=a722_0x489bc1[_0x2c67a6(0x262)](_0x5b4624,_0x45407f,_0x4fc437,_0x3c739d);_0x33cfc4=_0x24a87e[_0x2c67a6(0x254)][_0x2c67a6(0x236)](_0x374ff4,_0x2ef430,{'vertexShaderSource':_0x400fac,'fragmentShaderSource':_0x121b13,'attributeLocations':_0x374ff4['_attributeLocations']});}_0x209640=_0x1132be[_0x2c67a6(0x244)];if(_0x45407f)_0x209640=_0x1132be['_pointRenderState'];else _0x5794d6&&(_0x209640=_0x1132be[_0x2c67a6(0x2cc)]);var _0x255234=_0xe5f766[_0x2c67a6(0x229)]['cull'][_0x2c67a6(0x288)];!_0x255234&&(_0x209640=a722_0x25859a(_0x209640,![]),_0x209640[_0x2c67a6(0x212)]=a722_0x25859a(_0x209640[_0x2c67a6(0x212)],![]),_0x209640[_0x2c67a6(0x212)]['enabled']=![],_0x209640=a722_0x15589a[_0x2c67a6(0x2c3)](_0x209640)),_0x184e3a=combineUniforms(_0x1132be,_0xe5f766[_0x2c67a6(0x280)],_0x5794d6);}return _0x1b851b['shaderProgram']=_0x33cfc4,_0x1b851b[_0x2c67a6(0x229)]=_0x209640,_0x1b851b[_0x2c67a6(0x280)]=_0x184e3a,_0x1b851b;}ShadowMap[a722_0x11832e(0x246)]=function(_0x1ee508,_0x536ec8,_0x43ea22,_0x4ad99c,_0x13114d){var _0x450442=a722_0x11832e;!a722_0x6d4899(_0x13114d)&&(_0x13114d={});var _0x837163=_0x1ee508[_0x450442(0x2d1)]>0x0,_0x5d9733=_0x536ec8['shaderProgram'],_0x3c2154=_0x5d9733[_0x450442(0x251)],_0x57c144=_0x5d9733[_0x450442(0x2e0)],_0xd02513=_0x536ec8[_0x450442(0x298)]===a722_0x569a90['GLOBE'],_0x4fd403=![];_0xd02513&&(_0x4fd403=_0x536ec8[_0x450442(0x20a)][_0x450442(0x252)][_0x450442(0x2d3)]['encoding'][_0x450442(0x21d)]);if(_0x536ec8[_0x450442(0x24a)]&&_0x837163){var _0x571806,_0xbbb9fd;a722_0x6d4899(_0x13114d[_0x450442(0x253)])&&(_0x571806=_0x13114d[_0x450442(0x253)][_0x450442(0x297)],_0xbbb9fd=_0x13114d[_0x450442(0x253)][_0x450442(0x280)]);_0x13114d['receiveCommand']=a722_0x3d55c4['shallowClone'](_0x536ec8,_0x13114d[_0x450442(0x253)]),_0x13114d[_0x450442(0x293)]=![],_0x13114d['receiveShadows']=!![];var _0x3656cc=_0x13114d['receiveShaderCastShadows']!==_0x536ec8[_0x450442(0x293)],_0x3a8940=_0x13114d['receiveShaderProgramId']!==_0x536ec8[_0x450442(0x297)]['id'];if(!a722_0x6d4899(_0x571806)||_0x3a8940||_0x43ea22||_0x3656cc){var _0x4bed17=a722_0x489bc1[_0x450442(0x2b0)](_0x1ee508[0x0],_0x536ec8[_0x450442(0x293)],_0xd02513,_0x4fd403);_0x571806=_0x4ad99c[_0x450442(0x254)][_0x450442(0x2c6)](_0x5d9733,_0x4bed17);if(!a722_0x6d4899(_0x571806)){var _0x114005=a722_0x489bc1['createShadowReceiveVertexShader'](_0x3c2154,_0xd02513,_0x4fd403),_0x504d1b=a722_0x489bc1[_0x450442(0x2d9)](_0x57c144,_0x1ee508[0x0],_0x536ec8[_0x450442(0x293)],_0xd02513,_0x4fd403);_0x571806=_0x4ad99c['shaderCache']['createDerivedShaderProgram'](_0x5d9733,_0x4bed17,{'vertexShaderSource':_0x114005,'fragmentShaderSource':_0x504d1b,'attributeLocations':_0x5d9733[_0x450442(0x1f8)]});}_0xbbb9fd=combineUniforms(_0x1ee508[0x0],_0x536ec8[_0x450442(0x280)],_0xd02513);}_0x13114d[_0x450442(0x253)]['shaderProgram']=_0x571806,_0x13114d[_0x450442(0x253)]['uniformMap']=_0xbbb9fd,_0x13114d[_0x450442(0x241)]=_0x536ec8[_0x450442(0x297)]['id'],_0x13114d[_0x450442(0x275)]=_0x536ec8[_0x450442(0x293)];}return _0x13114d;},ShadowMap['createCastDerivedCommand']=function(_0x3393aa,_0x5a2564,_0x3d24ff,_0x533afe,_0xcb3f30){var _0x5511cd=a722_0x11832e;!a722_0x6d4899(_0xcb3f30)&&(_0xcb3f30={});if(_0x5a2564[_0x5511cd(0x293)]){var _0x560fd7=_0xcb3f30[_0x5511cd(0x21e)];!a722_0x6d4899(_0x560fd7)&&(_0x560fd7=_0xcb3f30[_0x5511cd(0x21e)]=[]);var _0x9efe4c=_0xcb3f30[_0x5511cd(0x257)],_0x5b2591=_0x3393aa[_0x5511cd(0x2d1)];_0x560fd7[_0x5511cd(0x2d1)]=_0x5b2591;for(var _0x139d5b=0x0;_0x139d5b<_0x5b2591;++_0x139d5b){_0x560fd7[_0x139d5b]=createCastDerivedCommand(_0x3393aa[_0x139d5b],_0x3d24ff,_0x5a2564,_0x533afe,_0x9efe4c,_0x560fd7[_0x139d5b]);}_0xcb3f30['castShaderProgramId']=_0x5a2564[_0x5511cd(0x297)]['id'];}return _0xcb3f30;},ShadowMap[a722_0x11832e(0x24f)][a722_0x11832e(0x207)]=function(){return![];},ShadowMap[a722_0x11832e(0x24f)][a722_0x11832e(0x2c0)]=function(){var _0x23790c=a722_0x11832e;destroyFramebuffer(this),this['_debugLightFrustum']=this['_debugLightFrustum']&&this['_debugLightFrustum'][_0x23790c(0x2c0)](),this['_debugCameraFrustum']=this[_0x23790c(0x214)]&&this['_debugCameraFrustum'][_0x23790c(0x2c0)](),this['_debugShadowViewCommand']=this[_0x23790c(0x29a)]&&this['_debugShadowViewCommand'][_0x23790c(0x297)]&&this[_0x23790c(0x29a)]['shaderProgram'][_0x23790c(0x2c0)]();for(var _0x4a9cae=0x0;_0x4a9cae<this[_0x23790c(0x25f)];++_0x4a9cae){this[_0x23790c(0x270)][_0x4a9cae]=this[_0x23790c(0x270)][_0x4a9cae]&&this[_0x23790c(0x270)][_0x4a9cae][_0x23790c(0x2c0)]();}return a722_0xa8ce57(this);};export default ShadowMap;