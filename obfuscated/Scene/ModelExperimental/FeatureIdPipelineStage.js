function a625_0x5cff(){var _0x7219c3=['feature.id\x20=\x20int(v_activeFeatureId);','model','attribute','a_instanceFeatureId_','featureIdTextures','textureReader','FUNCTION_SIGNATURE_UPDATE_FEATURE','12eoZLwX','FLOAT','v_texCoord_','runtimeNode','feature.color\x20=\x20v_activeFeatureColor;','_resources','uniformMap','floor','hasFeatureIds','vec2','FEATURE_ID_TEXTURE','vec4','featureIdTextureIndex','STRUCT_ID_FEATURE','color','addFunctionLines','v_activeFeatureId','featureIdAttributes','4644708ifsCsa','addStructField','addFragmentLines','float','attributeIndex','instances','10659440SlLTkg','247592pxOGPw','a_featureId_','29800683sjGlDK','createVertexBuffer','FeatureStruct','addVarying','v_activeFeatureSt\x20=\x20feature.st;','length','push','updateFeatureStructVS','Feature','repeat','node','attributes','569495LPEgHB','24XyUKTz','updateFeatureStructFS','FUNCTION_ID_FEATURE_VARYINGS_FS','addFunction','context','v_activeFeatureColor\x20=\x20feature.color;','process','addAttribute','FEATURE_ID_CHANNEL','shaderBuilder','defaultTexture','v_activeFeatureId\x20=\x20float(feature.id);','FRAGMENT','FUNCTION_ID_FEATURE_VARYINGS_VS','feature.st\x20=\x20v_activeFeatureSt;','texture','instanceDivisor','STATIC_DRAW','texCoord','addUniform','v_activeFeatureSt','STRUCT_NAME_FEATURE','addDefine','4238928qqEDTL','POSITION','VERTEX','BOTH','8NzEXGo','addVertexLines','getSizeInBytes','vertexArrayDestroyable','prefix','18BZOWer','2235898HwczEn','count'];a625_0x5cff=function(){return _0x7219c3;};return a625_0x5cff();}var a625_0x1e2d53=a625_0x367f;(function(_0x5f4bb4,_0x4c2351){var _0x2cc1cd=a625_0x367f,_0x1bc582=_0x5f4bb4();while(!![]){try{var _0x4ccc72=parseInt(_0x2cc1cd(0xbd))/0x1*(-parseInt(_0x2cc1cd(0x93))/0x2)+parseInt(_0x2cc1cd(0x8c))/0x3+parseInt(_0x2cc1cd(0xcc))/0x4*(-parseInt(_0x2cc1cd(0xa1))/0x5)+parseInt(_0x2cc1cd(0xa2))/0x6*(parseInt(_0x2cc1cd(0xc3))/0x7)+-parseInt(_0x2cc1cd(0xb9))/0x8*(-parseInt(_0x2cc1cd(0xc2))/0x9)+parseInt(_0x2cc1cd(0x92))/0xa+-parseInt(_0x2cc1cd(0x95))/0xb;if(_0x4ccc72===_0x4c2351)break;else _0x1bc582['push'](_0x1bc582['shift']());}catch(_0xa1dfd6){_0x1bc582['push'](_0x1bc582['shift']());}}}(a625_0x5cff,0xde40e));import a625_0x5b6fa4 from'../../Core/ComponentDatatype.js';import a625_0x8f234 from'../../Core/defaultValue.js';import a625_0x21d202 from'../../Core/defined.js';import a625_0x49f69a from'../../Renderer/ShaderDestination.js';function a625_0x367f(_0x264f0d,_0x50c002){var _0x5cff30=a625_0x5cff();return a625_0x367f=function(_0x367fa0,_0x4f34de){_0x367fa0=_0x367fa0-0x83;var _0x12730c=_0x5cff30[_0x367fa0];return _0x12730c;},a625_0x367f(_0x264f0d,_0x50c002);}import a625_0x5904ce from'../../Renderer/Buffer.js';import a625_0x3faa00 from'../../Renderer/BufferUsage.js';import a625_0x592d21 from'./ModelExperimentalUtility.js';import a625_0x2d1eb4 from'../VertexAttributeSemantic.js';import a625_0x50de7f from'../../Shaders/ModelExperimental/FeatureStageCommon.js';import a625_0x2ba14e from'../../Shaders/ModelExperimental/FeatureStageFS.js';import a625_0x348678 from'../../Shaders/ModelExperimental/FeatureStageVS.js';var FeatureIdPipelineStage={};FeatureIdPipelineStage['name']='FeatureIdPipelineStage',FeatureIdPipelineStage[a625_0x1e2d53(0x87)]=a625_0x1e2d53(0x97),FeatureIdPipelineStage[a625_0x1e2d53(0xb7)]=a625_0x1e2d53(0x9d),FeatureIdPipelineStage[a625_0x1e2d53(0xaf)]=a625_0x1e2d53(0x9c),FeatureIdPipelineStage[a625_0x1e2d53(0xa4)]=a625_0x1e2d53(0xa3),FeatureIdPipelineStage[a625_0x1e2d53(0xcb)]='void\x20updateFeatureStruct(inout\x20Feature\x20feature)',FeatureIdPipelineStage[a625_0x1e2d53(0xa8)]=function(_0x1bdbfa,_0x5205af,_0x421137){var _0x3e682a=a625_0x1e2d53,_0x29ff85=_0x1bdbfa[_0x3e682a(0xab)];_0x1bdbfa[_0x3e682a(0xd4)]=!![],_0x29ff85[_0x3e682a(0xb8)]('HAS_FEATURES',undefined,a625_0x49f69a[_0x3e682a(0xbc)]),updateFeatureStruct(_0x29ff85);var _0xd33386=_0x5205af[_0x3e682a(0xc9)];_0xd33386[_0x3e682a(0x9a)]>0x0?processFeatureIdTextures(_0x1bdbfa,_0x421137,_0xd33386):processFeatureIdAttributes(_0x1bdbfa,_0x421137,_0x5205af),_0x29ff85[_0x3e682a(0x8e)]([a625_0x50de7f,a625_0x2ba14e]);};function getFeatureIdAttributeInfo(_0x24b0d4,_0x48ea83,_0x6298e5){var _0x394d33=a625_0x1e2d53,_0x3c0ab9,_0xae92df,_0x558734,_0x1b3df9=0x0;if(a625_0x21d202(_0x6298e5))_0xae92df=_0x6298e5['featureIdAttributes'][_0x24b0d4],_0x3c0ab9=_0x6298e5[_0x394d33(0xa0)][0x0][_0x394d33(0xc4)],_0x558734=_0x394d33(0xc8),_0x1b3df9=0x1;else{_0xae92df=_0x48ea83[_0x394d33(0x8b)][_0x24b0d4];var _0x3aa2d9=a625_0x592d21['getAttributeBySemantic'](_0x48ea83,a625_0x2d1eb4[_0x394d33(0xba)]);_0x3c0ab9=_0x3aa2d9[_0x394d33(0xc4)],_0x558734=_0x394d33(0x94);}return{'count':_0x3c0ab9,'attribute':_0xae92df,'prefix':_0x558734,'instanceDivisor':_0x1b3df9};}function updateFeatureStruct(_0x27030b){var _0x5af98a=a625_0x1e2d53;_0x27030b[_0x5af98a(0x8d)](FeatureIdPipelineStage[_0x5af98a(0x87)],'int','id'),_0x27030b['addStructField'](FeatureIdPipelineStage[_0x5af98a(0x87)],_0x5af98a(0x83),'st'),_0x27030b[_0x5af98a(0x8d)](FeatureIdPipelineStage[_0x5af98a(0x87)],'vec4',_0x5af98a(0x88));}function generateFeatureFunctions(_0xbdd55a){var _0x36b6ef=a625_0x1e2d53;_0xbdd55a['addFunction'](FeatureIdPipelineStage[_0x36b6ef(0xaf)],FeatureIdPipelineStage['FUNCTION_SIGNATURE_UPDATE_FEATURE'],a625_0x49f69a['VERTEX']),_0xbdd55a[_0x36b6ef(0x89)](FeatureIdPipelineStage['FUNCTION_ID_FEATURE_VARYINGS_VS'],[_0x36b6ef(0xad),_0x36b6ef(0x99),_0x36b6ef(0xa7)]),_0xbdd55a[_0x36b6ef(0xa5)](FeatureIdPipelineStage['FUNCTION_ID_FEATURE_VARYINGS_FS'],FeatureIdPipelineStage[_0x36b6ef(0xcb)],a625_0x49f69a[_0x36b6ef(0xae)]),_0xbdd55a[_0x36b6ef(0x89)](FeatureIdPipelineStage[_0x36b6ef(0xa4)],[_0x36b6ef(0xc5),_0x36b6ef(0xb0),_0x36b6ef(0xd0)]);}function processFeatureIdAttributes(_0x283a2c,_0x1b5a5b,_0x2d46e2){var _0x285aa0=a625_0x1e2d53,_0x5c39e0=_0x283a2c['shaderBuilder'],_0x3e2e90=_0x283a2c[_0x285aa0(0xc6)],_0x204977=_0x283a2c[_0x285aa0(0xcf)][_0x285aa0(0x9f)][_0x285aa0(0x91)],_0x57bf72=_0x3e2e90['featureIdAttributeIndex'],_0x1ed168=getFeatureIdAttributeInfo(_0x57bf72,_0x2d46e2,_0x204977),_0x2e1135=_0x1ed168[_0x285aa0(0xc7)],_0x4d0e4c=_0x1ed168[_0x285aa0(0xc1)],_0x1ec4d0;a625_0x21d202(_0x2e1135['setIndex'])?_0x1ec4d0=_0x2e1135['setIndex']:(_0x1ec4d0=_0x283a2c['featureIdVertexAttributeSetIndex']++,generateFeatureIdAttribute(_0x1ed168,_0x1ec4d0,_0x1b5a5b,_0x283a2c)),_0x5c39e0[_0x285aa0(0xb8)]('FEATURE_ID_ATTRIBUTE',_0x4d0e4c+_0x1ec4d0,a625_0x49f69a[_0x285aa0(0xbb)]),_0x5c39e0['addVarying'](_0x285aa0(0x8f),_0x285aa0(0x8a)),_0x5c39e0[_0x285aa0(0x98)]('vec2',_0x285aa0(0xb6)),_0x5c39e0[_0x285aa0(0x98)](_0x285aa0(0x85),'v_activeFeatureColor'),generateFeatureFunctions(_0x5c39e0),_0x5c39e0[_0x285aa0(0xbe)]([a625_0x50de7f,a625_0x348678]);}function processFeatureIdTextures(_0xae8e68,_0x30ac0d,_0x5c36d2){var _0xd11d2b=a625_0x1e2d53,_0x276799=_0xae8e68[_0xd11d2b(0xab)],_0x58d9ba=_0xae8e68[_0xd11d2b(0xd2)],_0x791937=_0xae8e68[_0xd11d2b(0xc6)][_0xd11d2b(0x86)],_0x21c0ad=_0x5c36d2[_0x791937],_0xdf2a5f=_0x21c0ad[_0xd11d2b(0xca)],_0x291461='u_featureIdTexture_'+_0x791937;_0x276799[_0xd11d2b(0xb8)](_0xd11d2b(0x84),_0x291461,a625_0x49f69a['FRAGMENT']),_0x276799[_0xd11d2b(0xb5)]('sampler2D',_0x291461,a625_0x49f69a[_0xd11d2b(0xae)]),_0x58d9ba[_0x291461]=function(){var _0x22be0f=_0xd11d2b;return a625_0x8f234(_0xdf2a5f[_0x22be0f(0xb1)],_0x30ac0d[_0x22be0f(0xa6)][_0x22be0f(0xac)]);},_0x276799[_0xd11d2b(0xb8)]('FEATURE_ID_TEXCOORD',_0xd11d2b(0xce)+_0xdf2a5f[_0xd11d2b(0xb4)],a625_0x49f69a[_0xd11d2b(0xae)]),_0x276799['addDefine'](_0xd11d2b(0xaa),_0xdf2a5f['channels'],a625_0x49f69a[_0xd11d2b(0xae)]);}function generateFeatureIdAttribute(_0x5cb07b,_0x58f7e8,_0x206ec1,_0x4c6e61){var _0x17a9c5=a625_0x1e2d53,_0x4c67bc=_0x4c6e61[_0x17a9c5(0xc6)],_0x265a90=_0x4c6e61[_0x17a9c5(0xab)],_0xd73cbd=_0x5cb07b[_0x17a9c5(0xc7)],_0x25c417=_0x5cb07b['prefix'],_0x4f3715,_0x3004cb;if(!a625_0x21d202(_0xd73cbd[_0x17a9c5(0x9e)]))_0x4f3715=_0xd73cbd['offset'];else{var _0xf5ea71=generateFeatureIdTypedArray(_0xd73cbd,_0x5cb07b[_0x17a9c5(0xc4)]);_0x3004cb=a625_0x5904ce[_0x17a9c5(0x96)]({'context':_0x206ec1[_0x17a9c5(0xa6)],'typedArray':_0xf5ea71,'usage':a625_0x3faa00[_0x17a9c5(0xb3)]}),_0x3004cb[_0x17a9c5(0xc0)]=![],_0x4c67bc[_0x17a9c5(0xd1)][_0x17a9c5(0x9b)](_0x3004cb);}var _0x8a73c5={'index':_0x4c6e61[_0x17a9c5(0x90)]++,'instanceDivisor':_0x5cb07b[_0x17a9c5(0xb2)],'value':_0x4f3715,'vertexBuffer':_0x3004cb,'normalize':![],'componentsPerAttribute':0x1,'componentDatatype':a625_0x5b6fa4[_0x17a9c5(0xcd)],'strideInBytes':a625_0x5b6fa4[_0x17a9c5(0xbf)](a625_0x5b6fa4[_0x17a9c5(0xcd)]),'offsetInBytes':0x0};_0x4c6e61[_0x17a9c5(0xa0)][_0x17a9c5(0x9b)](_0x8a73c5),_0x265a90[_0x17a9c5(0xa9)](_0x17a9c5(0x8f),_0x25c417+_0x58f7e8);}function generateFeatureIdTypedArray(_0x3dfce7,_0x41f982){var _0x3481a8=a625_0x1e2d53,_0x57e54c=_0x3dfce7['offset'],_0x5d3e38=_0x3dfce7['repeat'],_0x4ca4b6=new Float32Array(_0x41f982);for(var _0xb99a61=0x0;_0xb99a61<_0x41f982;_0xb99a61++){_0x4ca4b6[_0xb99a61]=_0x57e54c+Math[_0x3481a8(0xd3)](_0xb99a61/_0x5d3e38);}return _0x4ca4b6;}export default FeatureIdPipelineStage;