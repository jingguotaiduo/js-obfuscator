var a630_0x9035d0=a630_0xa31b;(function(_0x57fb58,_0x1a91bb){var _0x17b7e2=a630_0xa31b,_0x2b555d=_0x57fb58();while(!![]){try{var _0x25da22=-parseInt(_0x17b7e2(0x16c))/0x1*(parseInt(_0x17b7e2(0x186))/0x2)+parseInt(_0x17b7e2(0x1b0))/0x3+parseInt(_0x17b7e2(0x17a))/0x4*(parseInt(_0x17b7e2(0x1a5))/0x5)+-parseInt(_0x17b7e2(0x16d))/0x6+parseInt(_0x17b7e2(0x1af))/0x7+-parseInt(_0x17b7e2(0x195))/0x8+parseInt(_0x17b7e2(0x19c))/0x9;if(_0x25da22===_0x1a91bb)break;else _0x2b555d['push'](_0x2b555d['shift']());}catch(_0x12403c){_0x2b555d['push'](_0x2b555d['shift']());}}}(a630_0x43cb,0x2f7cc));import a630_0x13827b from'../../Core/defined.js';import a630_0x59073b from'../../Core/defaultValue.js';import a630_0x4b773a from'../../Renderer/ShaderDestination.js';import a630_0x5e3059 from'../AlphaMode.js';import a630_0x5b6403 from'./LightingModel.js';import a630_0x57602a from'../../Shaders/ModelExperimental/MaterialStageFS.js';import a630_0x4f54f from'../../Renderer/Pass.js';import a630_0x370358 from'../../Core/Matrix3.js';import a630_0x5c76f8 from'../../Core/Cartesian3.js';import a630_0x28a6bb from'../../Core/Cartesian4.js';import a630_0x19d0db from'../ModelComponents.js';var Material=a630_0x19d0db[a630_0x9035d0(0x177)],MetallicRoughness=a630_0x19d0db[a630_0x9035d0(0x185)],SpecularGlossiness=a630_0x19d0db[a630_0x9035d0(0x176)],MaterialPipelineStage={};MaterialPipelineStage['name']='MaterialPipelineStage',MaterialPipelineStage[a630_0x9035d0(0x161)]=function(_0x9cbec3,_0x2803d2,_0x481af6){var _0x4d14eb=a630_0x9035d0,_0x5175b4=_0x2803d2[_0x4d14eb(0x160)],_0x713df7=_0x9cbec3['uniformMap'],_0x228b6c=_0x9cbec3[_0x4d14eb(0x18b)],_0x3275b2=_0x481af6[_0x4d14eb(0x1aa)][_0x4d14eb(0x16a)],_0x217ad7=_0x481af6['context'][_0x4d14eb(0x16f)],_0xc60a8e=_0x481af6[_0x4d14eb(0x1aa)][_0x4d14eb(0x182)];processMaterialUniforms(_0x5175b4,_0x713df7,_0x228b6c,_0x3275b2,_0x217ad7,_0xc60a8e);a630_0x13827b(_0x5175b4['specularGlossiness'])?processSpecularGlossinessUniforms(_0x5175b4,_0x713df7,_0x228b6c,_0x3275b2):processMetallicRoughnessUniforms(_0x5175b4,_0x713df7,_0x228b6c,_0x3275b2);var _0x4f7aaa=_0x9cbec3[_0x4d14eb(0x190)];_0x5175b4[_0x4d14eb(0x199)]?_0x4f7aaa['lightingModel']=a630_0x5b6403[_0x4d14eb(0x1b5)]:_0x4f7aaa['lightingModel']=a630_0x5b6403[_0x4d14eb(0x188)];var _0x3db559=!_0x5175b4[_0x4d14eb(0x187)];_0x9cbec3[_0x4d14eb(0x19f)][_0x4d14eb(0x183)]={'enabled':_0x3db559};var _0x2848e3=_0x9cbec3[_0x4d14eb(0x197)];if(!a630_0x13827b(_0x2848e3['alphaMode'])){_0x2848e3[_0x4d14eb(0x162)]=_0x5175b4[_0x4d14eb(0x162)];if(_0x5175b4[_0x4d14eb(0x162)]===a630_0x5e3059['BLEND'])_0x2848e3['pass']=a630_0x4f54f['TRANSLUCENT'];else _0x5175b4[_0x4d14eb(0x162)]===a630_0x5e3059['MASK']&&(_0x2848e3['alphaCutoff']=_0x5175b4[_0x4d14eb(0x19e)]);}_0x228b6c[_0x4d14eb(0x16e)]([a630_0x57602a]);};function a630_0x43cb(){var _0x1f9b7a=['_processTextureTransform','u_metallicRoughnessTexture','HAS_BASE_COLOR_FACTOR','TEXCOORD_','1749972EYfekH','627153bXDZGa','EMISSIVE','addDefine','HAS_','specularGlossiness','UNLIT','mat3','u_diffuseFactor','baseColorFactor','u_emissiveFactor','material','process','alphaMode','DEFAULT_EMISSIVE_FACTOR','u_specularGlossinessTexture','v_texCoord_','u_specularFactor','transform','u_normalTexture','vec3','defaultTexture','_TEXTURE','5773hquXCZ','2173326JfzgeO','addFragmentLines','defaultNormalTexture','u_emissiveTexture','specularFactor','u_glossinessFactor','u_metallicFactor','vec4','float','SpecularGlossiness','Material','DEFAULT_METALLIC_FACTOR','emissiveFactor','53068zVUsmG','diffuseFactor','emissiveTexture','normalTexture','OCCLUSION','NORMAL','equals','texCoord','defaultEmissiveTexture','cull','SPECULAR_GLOSSINESS','MetallicRoughness','38RIKmpo','doubleSided','PBR','u_baseColorFactor','HAS_SPECULAR_FACTOR','shaderBuilder','metallicRoughness','DEFAULT_SPECULAR_FACTOR','HAS_EMISSIVE_FACTOR','DIFFUSE','lightingOptions','Transform','metallicRoughnessTexture','DEFAULT_ROUGHNESS_FACTOR','DEFAULT_DIFFUSE_FACTOR','351792YZIPRi','BASE_COLOR','alphaOptions','u_roughnessFactor','unlit','FRAGMENT','glossinessFactor','2142684jAefRB','roughnessFactor','alphaCutoff','renderStateOptions','_processTexture','diffuseTexture','HAS_ROUGHNESS_FACTOR','texture','specularGlossinessTexture','5myyNJl','metallicFactor','addUniform','sampler2D','DEFAULT_GLOSSINESS_FACTOR','context'];a630_0x43cb=function(){return _0x1f9b7a;};return a630_0x43cb();}function a630_0xa31b(_0x4c318a,_0x16a818){var _0x43cb78=a630_0x43cb();return a630_0xa31b=function(_0xa31b97,_0x5b9fd7){_0xa31b97=_0xa31b97-0x15e;var _0x2363ef=_0x43cb78[_0xa31b97];return _0x2363ef;},a630_0xa31b(_0x4c318a,_0x16a818);}function processTextureTransform(_0x4b480a,_0x1f5db3,_0x445982,_0x206539,_0x160733){var _0x445e79=a630_0x9035d0,_0x243497=_0x445e79(0x1b3)+_0x160733+'_TEXTURE_TRANSFORM';_0x4b480a[_0x445e79(0x1b2)](_0x243497,undefined,a630_0x4b773a[_0x445e79(0x19a)]);var _0x1af00a=_0x206539+_0x445e79(0x191);_0x4b480a['addUniform'](_0x445e79(0x1b6),_0x1af00a,a630_0x4b773a[_0x445e79(0x19a)]),_0x1f5db3[_0x1af00a]=function(){var _0x1d9ab1=_0x445e79;return _0x445982[_0x1d9ab1(0x167)];};}function processTexture(_0x35d8c1,_0x438245,_0x1398bc,_0x3151df,_0x280197,_0x52114f){var _0x446a33=a630_0x9035d0;_0x35d8c1[_0x446a33(0x1a7)](_0x446a33(0x1a8),_0x3151df,a630_0x4b773a[_0x446a33(0x19a)]),_0x438245[_0x3151df]=function(){var _0xfa04bf=_0x446a33;return a630_0x59073b(_0x1398bc[_0xfa04bf(0x1a3)],_0x52114f);};var _0x5f1f86=_0x446a33(0x1b3)+_0x280197+_0x446a33(0x16b);_0x35d8c1[_0x446a33(0x1b2)](_0x5f1f86,undefined,a630_0x4b773a['FRAGMENT']);var _0x2c9522=_0x1398bc[_0x446a33(0x181)],_0x5543ff=_0x446a33(0x165)+_0x2c9522,_0x723131=_0x446a33(0x1ae)+_0x280197;_0x35d8c1['addDefine'](_0x723131,_0x5543ff,a630_0x4b773a['FRAGMENT']);var _0x357f33=_0x1398bc[_0x446a33(0x167)];a630_0x13827b(_0x357f33)&&!a630_0x370358[_0x446a33(0x180)](_0x357f33,a630_0x370358['IDENTITY'])&&processTextureTransform(_0x35d8c1,_0x438245,_0x1398bc,_0x3151df,_0x280197);}function processMaterialUniforms(_0x55255f,_0xee7148,_0x435542,_0x167e00,_0x361b53,_0x521dda){var _0x1c400b=a630_0x9035d0,_0xa06a8c=_0x55255f[_0x1c400b(0x17c)];a630_0x13827b(_0xa06a8c)&&processTexture(_0x435542,_0xee7148,_0xa06a8c,_0x1c400b(0x170),_0x1c400b(0x1b1),_0x521dda);var _0x955cc=_0x55255f[_0x1c400b(0x179)];a630_0x13827b(_0x955cc)&&!a630_0x5c76f8[_0x1c400b(0x180)](_0x955cc,Material[_0x1c400b(0x163)])&&(_0x435542[_0x1c400b(0x1a7)](_0x1c400b(0x169),_0x1c400b(0x15f),a630_0x4b773a[_0x1c400b(0x19a)]),_0xee7148[_0x1c400b(0x15f)]=function(){return _0x55255f['emissiveFactor'];},_0x435542['addDefine'](_0x1c400b(0x18e),undefined,a630_0x4b773a[_0x1c400b(0x19a)]));var _0x49b4a7=_0x55255f[_0x1c400b(0x17d)];a630_0x13827b(_0x49b4a7)&&processTexture(_0x435542,_0xee7148,_0x49b4a7,_0x1c400b(0x168),_0x1c400b(0x17f),_0x361b53);var _0x4e2e2f=_0x55255f['occlusionTexture'];a630_0x13827b(_0x4e2e2f)&&processTexture(_0x435542,_0xee7148,_0x4e2e2f,'u_occlusionTexture',_0x1c400b(0x17e),_0x167e00);}function processSpecularGlossinessUniforms(_0x40a369,_0x304199,_0x3485a7,_0x5a5a97){var _0x1733fe=a630_0x9035d0,_0x1d9fc7=_0x40a369[_0x1733fe(0x1b4)];_0x3485a7[_0x1733fe(0x1b2)]('USE_SPECULAR_GLOSSINESS',undefined,a630_0x4b773a['FRAGMENT']);var _0x50fc32=_0x1d9fc7[_0x1733fe(0x1a1)];a630_0x13827b(_0x50fc32)&&processTexture(_0x3485a7,_0x304199,_0x50fc32,'u_diffuseTexture',_0x1733fe(0x18f),_0x5a5a97);var _0x9207a4=_0x1d9fc7[_0x1733fe(0x17b)];a630_0x13827b(_0x9207a4)&&!a630_0x28a6bb[_0x1733fe(0x180)](_0x9207a4,SpecularGlossiness[_0x1733fe(0x194)])&&(_0x3485a7[_0x1733fe(0x1a7)](_0x1733fe(0x174),_0x1733fe(0x1b7),a630_0x4b773a[_0x1733fe(0x19a)]),_0x304199[_0x1733fe(0x1b7)]=function(){var _0x438811=_0x1733fe;return _0x1d9fc7[_0x438811(0x17b)];},_0x3485a7[_0x1733fe(0x1b2)]('HAS_DIFFUSE_FACTOR',undefined,a630_0x4b773a[_0x1733fe(0x19a)]));var _0x164262=_0x1d9fc7[_0x1733fe(0x1a4)];a630_0x13827b(_0x164262)&&processTexture(_0x3485a7,_0x304199,_0x164262,_0x1733fe(0x164),_0x1733fe(0x184),_0x5a5a97);var _0x377d9e=_0x1d9fc7[_0x1733fe(0x171)];a630_0x13827b(_0x377d9e)&&!a630_0x5c76f8[_0x1733fe(0x180)](_0x377d9e,SpecularGlossiness[_0x1733fe(0x18d)])&&(_0x3485a7[_0x1733fe(0x1a7)]('vec3',_0x1733fe(0x166),a630_0x4b773a[_0x1733fe(0x19a)]),_0x304199['u_specularFactor']=function(){var _0xae7435=_0x1733fe;return _0x1d9fc7[_0xae7435(0x171)];},_0x3485a7[_0x1733fe(0x1b2)](_0x1733fe(0x18a),undefined,a630_0x4b773a[_0x1733fe(0x19a)]));var _0x5d31cb=_0x1d9fc7['glossinessFactor'];a630_0x13827b(_0x5d31cb)&&_0x5d31cb!==SpecularGlossiness[_0x1733fe(0x1a9)]&&(_0x3485a7[_0x1733fe(0x1a7)]('float',_0x1733fe(0x172),a630_0x4b773a[_0x1733fe(0x19a)]),_0x304199[_0x1733fe(0x172)]=function(){var _0x2fd465=_0x1733fe;return _0x1d9fc7[_0x2fd465(0x19b)];},_0x3485a7[_0x1733fe(0x1b2)]('HAS_GLOSSINESS_FACTOR',undefined,a630_0x4b773a['FRAGMENT']));}function processMetallicRoughnessUniforms(_0x238705,_0x1916dd,_0x2b15fd,_0x8d4601){var _0x2d1436=a630_0x9035d0,_0x353c75=_0x238705[_0x2d1436(0x18c)];_0x2b15fd['addDefine']('USE_METALLIC_ROUGHNESS',undefined,a630_0x4b773a['FRAGMENT']);var _0x430d74=_0x353c75['baseColorTexture'];a630_0x13827b(_0x430d74)&&processTexture(_0x2b15fd,_0x1916dd,_0x430d74,'u_baseColorTexture',_0x2d1436(0x196),_0x8d4601);var _0x1f8e17=_0x353c75[_0x2d1436(0x15e)];a630_0x13827b(_0x1f8e17)&&!a630_0x28a6bb[_0x2d1436(0x180)](_0x1f8e17,MetallicRoughness['DEFAULT_BASE_COLOR_FACTOR'])&&(_0x2b15fd[_0x2d1436(0x1a7)]('vec4','u_baseColorFactor',a630_0x4b773a[_0x2d1436(0x19a)]),_0x1916dd[_0x2d1436(0x189)]=function(){var _0x15dc73=_0x2d1436;return _0x353c75[_0x15dc73(0x15e)];},_0x2b15fd[_0x2d1436(0x1b2)](_0x2d1436(0x1ad),undefined,a630_0x4b773a[_0x2d1436(0x19a)]));var _0x47a6d2=_0x353c75[_0x2d1436(0x192)];a630_0x13827b(_0x47a6d2)&&processTexture(_0x2b15fd,_0x1916dd,_0x47a6d2,_0x2d1436(0x1ac),'METALLIC_ROUGHNESS',_0x8d4601);var _0xcad8c7=_0x353c75[_0x2d1436(0x1a6)];a630_0x13827b(_0xcad8c7)&&_0xcad8c7!==MetallicRoughness[_0x2d1436(0x178)]&&(_0x2b15fd['addUniform'](_0x2d1436(0x175),_0x2d1436(0x173),a630_0x4b773a[_0x2d1436(0x19a)]),_0x1916dd['u_metallicFactor']=function(){var _0x5ca1e6=_0x2d1436;return _0x353c75[_0x5ca1e6(0x1a6)];},_0x2b15fd[_0x2d1436(0x1b2)]('HAS_METALLIC_FACTOR',undefined,a630_0x4b773a[_0x2d1436(0x19a)]));var _0x5df448=_0x353c75[_0x2d1436(0x19d)];a630_0x13827b(_0x5df448)&&_0x5df448!==MetallicRoughness[_0x2d1436(0x193)]&&(_0x2b15fd[_0x2d1436(0x1a7)](_0x2d1436(0x175),_0x2d1436(0x198),a630_0x4b773a['FRAGMENT']),_0x1916dd[_0x2d1436(0x198)]=function(){var _0x251a16=_0x2d1436;return _0x353c75[_0x251a16(0x19d)];},_0x2b15fd['addDefine'](_0x2d1436(0x1a2),undefined,a630_0x4b773a[_0x2d1436(0x19a)]));}MaterialPipelineStage[a630_0x9035d0(0x1a0)]=processTexture,MaterialPipelineStage[a630_0x9035d0(0x1ab)]=processTextureTransform;export default MaterialPipelineStage;