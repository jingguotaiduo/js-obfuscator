var a626_0xc49024=a626_0x4950;(function(_0x1ce690,_0x55f9de){var _0x52289c=a626_0x4950,_0xfbe38e=_0x1ce690();while(!![]){try{var _0x271c4e=-parseInt(_0x52289c(0x22c))/0x1+-parseInt(_0x52289c(0x20d))/0x2*(-parseInt(_0x52289c(0x208))/0x3)+-parseInt(_0x52289c(0x225))/0x4*(-parseInt(_0x52289c(0x206))/0x5)+parseInt(_0x52289c(0x23f))/0x6*(-parseInt(_0x52289c(0x209))/0x7)+-parseInt(_0x52289c(0x1fa))/0x8*(parseInt(_0x52289c(0x212))/0x9)+parseInt(_0x52289c(0x20b))/0xa*(parseInt(_0x52289c(0x22d))/0xb)+-parseInt(_0x52289c(0x1f8))/0xc;if(_0x271c4e===_0x55f9de)break;else _0xfbe38e['push'](_0xfbe38e['shift']());}catch(_0x23ccc0){_0xfbe38e['push'](_0xfbe38e['shift']());}}}(a626_0x57ad,0x219ac));import a626_0x415a8b from'../../Core/defined.js';import a626_0x35e6cb from'../../Core/PrimitiveType.js';import a626_0x95e97f from'../AttributeType.js';import a626_0x5c3700 from'../VertexAttributeSemantic.js';import a626_0x1bcbf3 from'../../Shaders/ModelExperimental/GeometryStageFS.js';import a626_0x303b2b from'../../Shaders/ModelExperimental/GeometryStageVS.js';function a626_0x4950(_0x120ffa,_0x5da349){var _0x57ada1=a626_0x57ad();return a626_0x4950=function(_0x4950a9,_0x13dca4){_0x4950a9=_0x4950a9-0x1f2;var _0x50c767=_0x57ada1[_0x4950a9];return _0x50c767;},a626_0x4950(_0x120ffa,_0x5da349);}import a626_0x2279f7 from'./FeatureIdPipelineStage.js';import a626_0x4712ff from'../../Renderer/ShaderDestination.js';import a626_0x5531f1 from'./ModelExperimentalUtility.js';var GeometryPipelineStage={};GeometryPipelineStage[a626_0xc49024(0x220)]=a626_0xc49024(0x203),GeometryPipelineStage[a626_0xc49024(0x201)]=a626_0xc49024(0x1ff),GeometryPipelineStage[a626_0xc49024(0x21d)]=a626_0xc49024(0x1f9),GeometryPipelineStage['STRUCT_NAME_PROCESSED_ATTRIBUTES']='ProcessedAttributes',GeometryPipelineStage[a626_0xc49024(0x233)]=a626_0xc49024(0x236),GeometryPipelineStage[a626_0xc49024(0x213)]=a626_0xc49024(0x1fd),GeometryPipelineStage[a626_0xc49024(0x204)]=a626_0xc49024(0x228),GeometryPipelineStage['FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS']=a626_0xc49024(0x20e),GeometryPipelineStage['FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS']='void\x20setDynamicVaryings(inout\x20ProcessedAttributes\x20attributes)',GeometryPipelineStage[a626_0xc49024(0x21f)]=function(_0x1214e0,_0x148dd6){var _0x57dc76=a626_0xc49024,_0x1d084a=_0x1214e0[_0x57dc76(0x239)];_0x1d084a[_0x57dc76(0x230)](GeometryPipelineStage[_0x57dc76(0x201)],_0x57dc76(0x226),a626_0x4712ff[_0x57dc76(0x234)]),_0x1d084a[_0x57dc76(0x230)](GeometryPipelineStage[_0x57dc76(0x21d)],_0x57dc76(0x226),a626_0x4712ff['FRAGMENT']),_0x1d084a[_0x57dc76(0x230)](a626_0x2279f7['STRUCT_ID_FEATURE'],a626_0x2279f7[_0x57dc76(0x214)],a626_0x4712ff[_0x57dc76(0x215)]),_0x1d084a['addFunction'](GeometryPipelineStage[_0x57dc76(0x233)],GeometryPipelineStage['FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES'],a626_0x4712ff['VERTEX']),_0x1d084a[_0x57dc76(0x221)](_0x57dc76(0x219),_0x57dc76(0x237)),_0x1d084a['addVarying'](_0x57dc76(0x219),_0x57dc76(0x23b)),_0x1d084a[_0x57dc76(0x222)](GeometryPipelineStage[_0x57dc76(0x21d)],_0x57dc76(0x219),'positionWC'),_0x1d084a[_0x57dc76(0x222)](GeometryPipelineStage['STRUCT_ID_PROCESSED_ATTRIBUTES_FS'],_0x57dc76(0x219),'positionEC'),_0x1d084a[_0x57dc76(0x238)](GeometryPipelineStage[_0x57dc76(0x204)],GeometryPipelineStage[_0x57dc76(0x20c)],a626_0x4712ff[_0x57dc76(0x234)]),_0x1d084a[_0x57dc76(0x238)](GeometryPipelineStage[_0x57dc76(0x218)],GeometryPipelineStage[_0x57dc76(0x20c)],a626_0x4712ff['FRAGMENT']);var _0x198328;for(var _0x36c29d=0x0;_0x36c29d<_0x148dd6['attributes'][_0x57dc76(0x205)];_0x36c29d++){var _0x26f262=_0x148dd6[_0x57dc76(0x1f2)][_0x36c29d];_0x26f262[_0x57dc76(0x1fb)]===a626_0x5c3700[_0x57dc76(0x1f3)]?_0x198328=0x0:_0x198328=_0x1214e0[_0x57dc76(0x23c)]++,processAttribute(_0x1214e0,_0x26f262,_0x198328);}handleBitangents(_0x1d084a,_0x148dd6['attributes']),_0x148dd6['primitiveType']===a626_0x35e6cb[_0x57dc76(0x21a)]&&_0x1d084a[_0x57dc76(0x21c)](_0x57dc76(0x227)),_0x1d084a[_0x57dc76(0x22b)]([a626_0x303b2b]),_0x1d084a[_0x57dc76(0x210)]([a626_0x1bcbf3]);};function processAttribute(_0x25c601,_0x3eb2a5,_0x4f337f){var _0x12b1a2=a626_0xc49024,_0x23a095=_0x25c601[_0x12b1a2(0x239)],_0xcd0cf5=a626_0x5531f1['getAttributeInfo'](_0x3eb2a5);addAttributeToRenderResources(_0x25c601,_0x3eb2a5,_0x4f337f),addAttributeDeclaration(_0x23a095,_0xcd0cf5),addVaryingDeclaration(_0x23a095,_0xcd0cf5),a626_0x415a8b(_0x3eb2a5[_0x12b1a2(0x1fb)])&&addSemanticDefine(_0x23a095,_0x3eb2a5),updateAttributesStruct(_0x23a095,_0xcd0cf5),updateInitialzeAttributesFunction(_0x23a095,_0xcd0cf5),updateSetDynamicVaryingsFunction(_0x23a095,_0xcd0cf5);}function addSemanticDefine(_0x236fbf,_0x8a2196){var _0xee2a88=a626_0xc49024,_0x4cec49=_0x8a2196[_0xee2a88(0x1fb)],_0x2ba0c7=_0x8a2196[_0xee2a88(0x232)];switch(_0x4cec49){case a626_0x5c3700[_0xee2a88(0x22e)]:_0x236fbf[_0xee2a88(0x21c)](_0xee2a88(0x235));break;case a626_0x5c3700[_0xee2a88(0x207)]:_0x236fbf[_0xee2a88(0x21c)]('HAS_TANGENTS');break;case a626_0x5c3700['FEATURE_ID']:case a626_0x5c3700['TEXCOORD']:case a626_0x5c3700[_0xee2a88(0x216)]:_0x236fbf['addDefine']('HAS_'+_0x4cec49+'_'+_0x2ba0c7);}}function addAttributeToRenderResources(_0x1d15e4,_0x8ec2a8,_0xce1a7f){var _0x3476bf=a626_0xc49024,_0x43fc4d=_0x8ec2a8['quantization'],_0x2c2023,_0x2dedd8;a626_0x415a8b(_0x43fc4d)?(_0x2c2023=_0x43fc4d[_0x3476bf(0x22f)],_0x2dedd8=_0x43fc4d['componentDatatype']):(_0x2c2023=_0x8ec2a8[_0x3476bf(0x22f)],_0x2dedd8=_0x8ec2a8['componentDatatype']);var _0x1bd971=_0x8ec2a8[_0x3476bf(0x1fb)],_0x4312c7=_0x8ec2a8[_0x3476bf(0x232)];_0x1bd971===a626_0x5c3700[_0x3476bf(0x231)]&&_0x4312c7>=_0x1d15e4[_0x3476bf(0x240)]&&(_0x1d15e4[_0x3476bf(0x240)]=_0x4312c7+0x1);var _0x30e6ad={'index':_0xce1a7f,'value':a626_0x415a8b(_0x8ec2a8['buffer'])?undefined:_0x8ec2a8[_0x3476bf(0x1f7)],'vertexBuffer':_0x8ec2a8[_0x3476bf(0x1f5)],'componentsPerAttribute':a626_0x95e97f[_0x3476bf(0x20a)](_0x2c2023),'componentDatatype':_0x2dedd8,'offsetInBytes':_0x8ec2a8['byteOffset'],'strideInBytes':_0x8ec2a8['byteStride'],'normalize':_0x8ec2a8['normalized']};_0x1d15e4['attributes'][_0x3476bf(0x21b)](_0x30e6ad);}function addVaryingDeclaration(_0x2b00f2,_0x3dd20c){var _0x59cfd0=a626_0xc49024,_0x229491=_0x3dd20c[_0x59cfd0(0x1f4)],_0xf8d1ae='v_'+_0x229491,_0x215408;if(_0x229491==='normalMC')_0xf8d1ae='v_normalEC',_0x215408=_0x3dd20c[_0x59cfd0(0x21e)];else _0x229491===_0x59cfd0(0x223)?(_0x215408=_0x59cfd0(0x219),_0xf8d1ae=_0x59cfd0(0x1fe)):_0x215408=_0x3dd20c[_0x59cfd0(0x21e)];_0x2b00f2[_0x59cfd0(0x221)](_0x215408,_0xf8d1ae);}function addAttributeDeclaration(_0x31f174,_0x2feda3){var _0x3faf96=a626_0xc49024,_0x2642ca=_0x2feda3[_0x3faf96(0x229)][_0x3faf96(0x1fb)],_0x57cc5a=_0x2feda3[_0x3faf96(0x1f4)],_0x3532f1,_0x261894;_0x2feda3[_0x3faf96(0x202)]?(_0x3532f1=_0x3faf96(0x224)+_0x57cc5a,_0x261894=_0x2feda3[_0x3faf96(0x242)]):(_0x3532f1='a_'+_0x57cc5a,_0x261894=_0x2feda3[_0x3faf96(0x21e)]),_0x2642ca===a626_0x5c3700[_0x3faf96(0x1f3)]?_0x31f174['setPositionAttribute'](_0x261894,_0x3532f1):_0x31f174[_0x3faf96(0x1f6)](_0x261894,_0x3532f1);}function updateAttributesStruct(_0x272c7c,_0x13fc95){var _0x443cf1=a626_0xc49024,_0x1bf437=GeometryPipelineStage[_0x443cf1(0x201)],_0x5d4d63=GeometryPipelineStage['STRUCT_ID_PROCESSED_ATTRIBUTES_FS'],_0x223597=_0x13fc95[_0x443cf1(0x1f4)];if(_0x223597==='tangentMC')_0x272c7c[_0x443cf1(0x222)](_0x1bf437,_0x443cf1(0x219),_0x443cf1(0x223)),_0x272c7c['addStructField'](_0x5d4d63,_0x443cf1(0x219),'tangentEC');else _0x223597===_0x443cf1(0x217)?(_0x272c7c['addStructField'](_0x1bf437,_0x443cf1(0x219),_0x443cf1(0x217)),_0x272c7c[_0x443cf1(0x222)](_0x5d4d63,_0x443cf1(0x219),_0x443cf1(0x211))):(_0x272c7c[_0x443cf1(0x222)](_0x1bf437,_0x13fc95[_0x443cf1(0x21e)],_0x223597),_0x272c7c['addStructField'](_0x5d4d63,_0x13fc95[_0x443cf1(0x21e)],_0x223597));}function updateInitialzeAttributesFunction(_0x1d1e51,_0x4b7650){var _0x2fd764=a626_0xc49024;if(_0x4b7650['isQuantized'])return;var _0x4a1582=GeometryPipelineStage[_0x2fd764(0x233)],_0x6c771b=_0x4b7650['variableName'],_0x1f7d06;_0x6c771b===_0x2fd764(0x223)?_0x1f7d06=_0x2fd764(0x22a):_0x1f7d06=_0x2fd764(0x20f)+_0x6c771b+'\x20=\x20a_'+_0x6c771b+';',_0x1d1e51[_0x2fd764(0x1fc)](_0x4a1582,[_0x1f7d06]);}function updateSetDynamicVaryingsFunction(_0x20a6ac,_0x237889){var _0x314dd4=a626_0xc49024,_0x40ba97=_0x237889[_0x314dd4(0x229)][_0x314dd4(0x1fb)],_0x5d57d6=_0x237889[_0x314dd4(0x229)][_0x314dd4(0x232)];if(a626_0x415a8b(_0x40ba97)&&!a626_0x415a8b(_0x5d57d6))return;var _0x3434f9=GeometryPipelineStage[_0x314dd4(0x204)],_0x5dca2d=_0x237889[_0x314dd4(0x1f4)],_0x3683ab='v_'+_0x5dca2d+_0x314dd4(0x23d)+_0x5dca2d+';';_0x20a6ac[_0x314dd4(0x1fc)](_0x3434f9,[_0x3683ab]),_0x3434f9=GeometryPipelineStage[_0x314dd4(0x218)],_0x3683ab='attributes.'+_0x5dca2d+'\x20=\x20v_'+_0x5dca2d+';',_0x20a6ac['addFunctionLines'](_0x3434f9,[_0x3683ab]);}function a626_0x57ad(){var _0x21d546=['variableName','buffer','addAttribute','constant','3565752doRyby','ProcessedAttributesFS','24tYCvZO','semantic','addFunctionLines','void\x20initializeAttributes(out\x20ProcessedAttributes\x20attributes)','v_tangentEC','ProcessedAttributesVS','v_bitangentEC','STRUCT_ID_PROCESSED_ATTRIBUTES_VS','isQuantized','GeometryPipelineStage','FUNCTION_ID_SET_DYNAMIC_VARYINGS_VS','length','6485CyBLHb','TANGENT','307083CLZQxy','221823dnrAZI','getNumberOfComponents','1354750wdoFHX','FUNCTION_SIGNATURE_SET_DYNAMIC_VARYINGS','4okrUea','setDynamicVaryingsFS','attributes.','addFragmentLines','normalEC','202509osugcK','FUNCTION_SIGNATURE_INITIALIZE_ATTRIBUTES','STRUCT_NAME_FEATURE','BOTH','COLOR','normalMC','FUNCTION_ID_SET_DYNAMIC_VARYINGS_FS','vec3','POINTS','push','addDefine','STRUCT_ID_PROCESSED_ATTRIBUTES_FS','glslType','process','name','addVarying','addStructField','tangentMC','a_quantized_','804jvrLcF','ProcessedAttributes','PRIMITIVE_TYPE_POINTS','setDynamicVaryingsVS','attribute','attributes.tangentMC\x20=\x20a_tangentMC.xyz;','addVertexLines','3534zMqVLh','11rIwvTQ','NORMAL','type','addStruct','FEATURE_ID','setIndex','FUNCTION_ID_INITIALIZE_ATTRIBUTES','VERTEX','HAS_NORMALS','initializeAttributes','v_positionWC','addFunction','shaderBuilder','bitangentEC','v_positionEC','attributeIndex','\x20=\x20attributes.','attributes.bitangentMC\x20=\x20normalize(cross(a_normalMC,\x20a_tangentMC.xyz)\x20*\x20a_tangentMC.w);','18YViPQT','featureIdVertexAttributeSetIndex','bitangentMC','quantizedGlslType','attributes','POSITION'];a626_0x57ad=function(){return _0x21d546;};return a626_0x57ad();}function handleBitangents(_0x4760ab,_0x5ccc91){var _0x1e40cf=a626_0xc49024,_0x47a8a3=![],_0x1b06d1=![];for(var _0x3f1727=0x0;_0x3f1727<_0x5ccc91[_0x1e40cf(0x205)];_0x3f1727++){var _0x401096=_0x5ccc91[_0x3f1727];if(_0x401096[_0x1e40cf(0x1fb)]===a626_0x5c3700[_0x1e40cf(0x22e)])_0x47a8a3=!![];else _0x401096[_0x1e40cf(0x1fb)]===a626_0x5c3700[_0x1e40cf(0x207)]&&(_0x1b06d1=!![]);}if(!_0x47a8a3||!_0x1b06d1)return;_0x4760ab['addDefine']('HAS_BITANGENTS'),_0x4760ab[_0x1e40cf(0x1fc)](GeometryPipelineStage['FUNCTION_ID_INITIALIZE_ATTRIBUTES'],[_0x1e40cf(0x23e)]),_0x4760ab['addVarying'](_0x1e40cf(0x219),_0x1e40cf(0x200)),_0x4760ab['addStructField'](GeometryPipelineStage[_0x1e40cf(0x201)],_0x1e40cf(0x219),_0x1e40cf(0x241)),_0x4760ab[_0x1e40cf(0x222)](GeometryPipelineStage[_0x1e40cf(0x21d)],_0x1e40cf(0x219),_0x1e40cf(0x23a));}export default GeometryPipelineStage;