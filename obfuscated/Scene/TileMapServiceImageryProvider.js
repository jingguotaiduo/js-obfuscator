var a748_0x4e0503=a748_0x1b3a;(function(_0x4d0849,_0x2be63f){var _0x5abbf4=a748_0x1b3a,_0x31b810=_0x4d0849();while(!![]){try{var _0x235829=-parseInt(_0x5abbf4(0x143))/0x1+-parseInt(_0x5abbf4(0x129))/0x2+parseInt(_0x5abbf4(0x166))/0x3+-parseInt(_0x5abbf4(0x13a))/0x4*(parseInt(_0x5abbf4(0x12e))/0x5)+parseInt(_0x5abbf4(0x153))/0x6*(-parseInt(_0x5abbf4(0x16a))/0x7)+-parseInt(_0x5abbf4(0x144))/0x8*(parseInt(_0x5abbf4(0x12b))/0x9)+parseInt(_0x5abbf4(0x124))/0xa;if(_0x235829===_0x2be63f)break;else _0x31b810['push'](_0x31b810['shift']());}catch(_0x1b49fe){_0x31b810['push'](_0x31b810['shift']());}}}(a748_0x3619,0x56820));import a748_0x41dd2d from'../Core/Cartesian2.js';import a748_0x3678f7 from'../Core/Cartographic.js';import a748_0x531228 from'../Core/defaultValue.js';import a748_0x38c887 from'../Core/defined.js';import a748_0x358271 from'../Core/DeveloperError.js';import a748_0x1bca7d from'../Core/GeographicProjection.js';import a748_0x2f25ef from'../Core/GeographicTilingScheme.js';import a748_0x5ddbe0 from'../Core/Rectangle.js';import a748_0x7afd from'../Core/Resource.js';import a748_0x159e43 from'../Core/RuntimeError.js';import a748_0x141b89 from'../Core/TileProviderError.js';function a748_0x3619(){var _0x61bcc8=['tilemapresource.xml','_tmsResource','test','mercator','latitude','tileHeight','maximumLevel','item','bind','longitude','profile','1226436xRZORM','then','_deferred','maxy','{z}/{x}/{reverseY}.','tileDiscardPolicy','fileExtension','retry','appendForwardSlash','fromDegrees','_xmlResource','promise','ellipsoid','_requestMetadata','EMPTY_OBJECT','call','push','minx','rectangle','1963809nwhbkD','clone','childNodes','_metadataSuccess','14ZSmzVI','url','geodetic','width','tileWidth','unproject','create','_metadataFailure','18903060tWDHdF','_metadataError','prototype','fetchXML','length','1032564pVDcBf','positionToTileXY','486ibbCue','reject','errorEvent','85tMpXcy','abs','maxx','east','projection','credit','createIfNeeded','north','_options','specifies\x20an\x20unsupported\x20profile\x20attribute,\x20','nodeName','height','27836VmRVmV','otherwise','miny','extension','south','resolve','tilingScheme','getAttribute','png','642762LUXgIf','74728YJqCTK','order','getDerivedResource','handleError'];a748_0x3619=function(){return _0x61bcc8;};return a748_0x3619();}import a748_0xa8d028 from'../Core/WebMercatorTilingScheme.js';import a748_0x3ab473 from'../ThirdParty/when.js';import a748_0x3c04be from'./UrlTemplateImageryProvider.js';function TileMapServiceImageryProvider(_0x505e44){var _0x56d3d1=a748_0x1b3a;_0x505e44=a748_0x531228(_0x505e44,a748_0x531228[_0x56d3d1(0x161)]);if(!a748_0x38c887(_0x505e44['url']))throw new a748_0x358271('options.url\x20is\x20required.');var _0x977af8=a748_0x3ab473['defer']();a748_0x3c04be[_0x56d3d1(0x162)](this,_0x977af8[_0x56d3d1(0x15e)]),this['_tmsResource']=undefined,this[_0x56d3d1(0x15d)]=undefined,this['_options']=_0x505e44,this['_deferred']=_0x977af8,this[_0x56d3d1(0x125)]=undefined,this[_0x56d3d1(0x169)]=this[_0x56d3d1(0x169)][_0x56d3d1(0x150)](this),this[_0x56d3d1(0x123)]=this[_0x56d3d1(0x123)][_0x56d3d1(0x150)](this),this[_0x56d3d1(0x160)]=this['_requestMetadata'][_0x56d3d1(0x150)](this);var _0x296841,_0x10320=this;a748_0x3ab473(_0x505e44[_0x56d3d1(0x16b)])[_0x56d3d1(0x154)](function(_0x119a4e){var _0x461546=_0x56d3d1;_0x296841=a748_0x7afd[_0x461546(0x134)](_0x119a4e),_0x296841[_0x461546(0x15b)](),_0x10320[_0x461546(0x149)]=_0x296841,_0x10320[_0x461546(0x15d)]=_0x296841[_0x461546(0x146)]({'url':_0x461546(0x148)}),_0x10320[_0x461546(0x160)]();})[_0x56d3d1(0x13b)](function(_0x46a074){var _0x5f3cba=_0x56d3d1;_0x977af8[_0x5f3cba(0x12c)](_0x46a074);});}a748_0x38c887(Object[a748_0x4e0503(0x170)])&&(TileMapServiceImageryProvider[a748_0x4e0503(0x126)]=Object[a748_0x4e0503(0x170)](a748_0x3c04be[a748_0x4e0503(0x126)]),TileMapServiceImageryProvider['prototype']['constructor']=TileMapServiceImageryProvider);TileMapServiceImageryProvider[a748_0x4e0503(0x126)][a748_0x4e0503(0x160)]=function(){var _0x2454b2=a748_0x4e0503;this[_0x2454b2(0x15d)][_0x2454b2(0x127)]()[_0x2454b2(0x154)](this[_0x2454b2(0x169)])['otherwise'](this['_metadataFailure']);};function a748_0x1b3a(_0x24a348,_0x1b457a){var _0x36192e=a748_0x3619();return a748_0x1b3a=function(_0x1b3a60,_0x3e5d1d){_0x1b3a60=_0x1b3a60-0x123;var _0x57fc25=_0x36192e[_0x1b3a60];return _0x57fc25;},a748_0x1b3a(_0x24a348,_0x1b457a);}function confineRectangleToTilingScheme(_0x476ffd,_0x5d8aa3){var _0xaf0c5f=a748_0x4e0503;return _0x476ffd['west']<_0x5d8aa3[_0xaf0c5f(0x165)]['west']&&(_0x476ffd['west']=_0x5d8aa3[_0xaf0c5f(0x165)]['west']),_0x476ffd['east']>_0x5d8aa3[_0xaf0c5f(0x165)]['east']&&(_0x476ffd['east']=_0x5d8aa3['rectangle'][_0xaf0c5f(0x131)]),_0x476ffd[_0xaf0c5f(0x13e)]<_0x5d8aa3[_0xaf0c5f(0x165)]['south']&&(_0x476ffd[_0xaf0c5f(0x13e)]=_0x5d8aa3['rectangle']['south']),_0x476ffd['north']>_0x5d8aa3[_0xaf0c5f(0x165)][_0xaf0c5f(0x135)]&&(_0x476ffd['north']=_0x5d8aa3[_0xaf0c5f(0x165)][_0xaf0c5f(0x135)]),_0x476ffd;}function calculateSafeMinimumDetailLevel(_0x30f95a,_0xae3973,_0x30c98c){var _0x5151cd=a748_0x4e0503,_0x60a984=_0x30f95a['positionToTileXY'](a748_0x5ddbe0['southwest'](_0xae3973),_0x30c98c),_0x1c36fe=_0x30f95a[_0x5151cd(0x12a)](a748_0x5ddbe0['northeast'](_0xae3973),_0x30c98c),_0x3e4b89=(Math[_0x5151cd(0x12f)](_0x1c36fe['x']-_0x60a984['x'])+0x1)*(Math['abs'](_0x1c36fe['y']-_0x60a984['y'])+0x1);if(_0x3e4b89>0x4)return 0x0;return _0x30c98c;}TileMapServiceImageryProvider[a748_0x4e0503(0x126)]['_metadataSuccess']=function(_0x1d8549){var _0x1c6759=a748_0x4e0503,_0x182e74=/tileformat/i,_0x432e74=/tileset/i,_0x1cd4de=/tilesets/i,_0x211e78=/boundingbox/i,_0x2d9f56,_0x3b5b1c,_0x2cee94,_0x2b5cc0=[],_0x3097e9=this[_0x1c6759(0x15d)],_0x40b6b8=this['_metadataError'],_0x27121d=this[_0x1c6759(0x155)],_0x5cc63a=this['_requestMetadata'],_0x3b44e8=_0x1d8549[_0x1c6759(0x168)][0x0]['childNodes'];for(var _0x204c54=0x0;_0x204c54<_0x3b44e8[_0x1c6759(0x128)];_0x204c54++){if(_0x182e74[_0x1c6759(0x14a)](_0x3b44e8[_0x1c6759(0x14f)](_0x204c54)[_0x1c6759(0x138)]))_0x2d9f56=_0x3b44e8[_0x1c6759(0x14f)](_0x204c54);else{if(_0x1cd4de[_0x1c6759(0x14a)](_0x3b44e8[_0x1c6759(0x14f)](_0x204c54)['nodeName'])){_0x2cee94=_0x3b44e8['item'](_0x204c54);var _0x56bbb5=_0x3b44e8['item'](_0x204c54)['childNodes'];for(var _0x45a31a=0x0;_0x45a31a<_0x56bbb5[_0x1c6759(0x128)];_0x45a31a++){_0x432e74[_0x1c6759(0x14a)](_0x56bbb5[_0x1c6759(0x14f)](_0x45a31a)[_0x1c6759(0x138)])&&_0x2b5cc0[_0x1c6759(0x163)](_0x56bbb5[_0x1c6759(0x14f)](_0x45a31a));}}else _0x211e78[_0x1c6759(0x14a)](_0x3b44e8[_0x1c6759(0x14f)](_0x204c54)[_0x1c6759(0x138)])&&(_0x3b5b1c=_0x3b44e8[_0x1c6759(0x14f)](_0x204c54));}}var _0x19196c;if(!a748_0x38c887(_0x2cee94)||!a748_0x38c887(_0x3b5b1c)){_0x19196c='Unable\x20to\x20find\x20expected\x20tilesets\x20or\x20bbox\x20attributes\x20in\x20'+_0x3097e9[_0x1c6759(0x16b)]+'.',_0x40b6b8=a748_0x141b89[_0x1c6759(0x147)](_0x40b6b8,this,this[_0x1c6759(0x12d)],_0x19196c,undefined,undefined,undefined,_0x5cc63a);!_0x40b6b8[_0x1c6759(0x15a)]&&_0x27121d[_0x1c6759(0x12c)](new a748_0x159e43(_0x19196c));this[_0x1c6759(0x125)]=_0x40b6b8;return;}var _0x3f5e67=this[_0x1c6759(0x136)],_0x1f4221=a748_0x531228(_0x3f5e67[_0x1c6759(0x159)],_0x2d9f56['getAttribute'](_0x1c6759(0x13d))),_0x1d0772=a748_0x531228(_0x3f5e67[_0x1c6759(0x16e)],parseInt(_0x2d9f56[_0x1c6759(0x141)](_0x1c6759(0x16d)),0xa)),_0x18e434=a748_0x531228(_0x3f5e67[_0x1c6759(0x14d)],parseInt(_0x2d9f56[_0x1c6759(0x141)](_0x1c6759(0x139)),0xa)),_0x3668c6=a748_0x531228(_0x3f5e67['minimumLevel'],parseInt(_0x2b5cc0[0x0][_0x1c6759(0x141)](_0x1c6759(0x145)),0xa)),_0x4930e8=a748_0x531228(_0x3f5e67[_0x1c6759(0x14e)],parseInt(_0x2b5cc0[_0x2b5cc0[_0x1c6759(0x128)]-0x1]['getAttribute'](_0x1c6759(0x145)),0xa)),_0x41196a=_0x2cee94[_0x1c6759(0x141)](_0x1c6759(0x152)),_0x2a20ee=_0x3f5e67[_0x1c6759(0x140)];if(!a748_0x38c887(_0x2a20ee)){if(_0x41196a===_0x1c6759(0x16c)||_0x41196a==='global-geodetic')_0x2a20ee=new a748_0x2f25ef({'ellipsoid':_0x3f5e67['ellipsoid']});else{if(_0x41196a===_0x1c6759(0x14b)||_0x41196a==='global-mercator')_0x2a20ee=new a748_0xa8d028({'ellipsoid':_0x3f5e67[_0x1c6759(0x15f)]});else{_0x19196c=_0x3097e9[_0x1c6759(0x16b)]+_0x1c6759(0x137)+_0x41196a+'.',_0x40b6b8=a748_0x141b89[_0x1c6759(0x147)](_0x40b6b8,this,this[_0x1c6759(0x12d)],_0x19196c,undefined,undefined,undefined,_0x5cc63a);!_0x40b6b8['retry']&&_0x27121d[_0x1c6759(0x12c)](new a748_0x159e43(_0x19196c));this[_0x1c6759(0x125)]=_0x40b6b8;return;}}}var _0x1bf0d4=a748_0x5ddbe0[_0x1c6759(0x167)](_0x3f5e67[_0x1c6759(0x165)]);if(!a748_0x38c887(_0x1bf0d4)){var _0x391447,_0x3bfd18,_0xf62981,_0x123315,_0x15b09a=a748_0x531228(_0x3f5e67['flipXY'],![]);_0x15b09a?(_0xf62981=new a748_0x41dd2d(parseFloat(_0x3b5b1c['getAttribute']('miny')),parseFloat(_0x3b5b1c[_0x1c6759(0x141)](_0x1c6759(0x164)))),_0x123315=new a748_0x41dd2d(parseFloat(_0x3b5b1c[_0x1c6759(0x141)](_0x1c6759(0x156))),parseFloat(_0x3b5b1c[_0x1c6759(0x141)](_0x1c6759(0x130))))):(_0xf62981=new a748_0x41dd2d(parseFloat(_0x3b5b1c[_0x1c6759(0x141)](_0x1c6759(0x164))),parseFloat(_0x3b5b1c[_0x1c6759(0x141)](_0x1c6759(0x13c)))),_0x123315=new a748_0x41dd2d(parseFloat(_0x3b5b1c[_0x1c6759(0x141)](_0x1c6759(0x130))),parseFloat(_0x3b5b1c[_0x1c6759(0x141)]('maxy'))));var _0x216cfa=_0x41196a===_0x1c6759(0x16c)||_0x41196a==='mercator';if(_0x2a20ee['projection']instanceof a748_0x1bca7d||_0x216cfa)_0x391447=a748_0x3678f7[_0x1c6759(0x15c)](_0xf62981['x'],_0xf62981['y']),_0x3bfd18=a748_0x3678f7[_0x1c6759(0x15c)](_0x123315['x'],_0x123315['y']);else{var _0xfed3e9=_0x2a20ee[_0x1c6759(0x132)];_0x391447=_0xfed3e9[_0x1c6759(0x16f)](_0xf62981),_0x3bfd18=_0xfed3e9[_0x1c6759(0x16f)](_0x123315);}_0x1bf0d4=new a748_0x5ddbe0(_0x391447[_0x1c6759(0x151)],_0x391447[_0x1c6759(0x14c)],_0x3bfd18[_0x1c6759(0x151)],_0x3bfd18['latitude']);}_0x1bf0d4=confineRectangleToTilingScheme(_0x1bf0d4,_0x2a20ee),_0x3668c6=calculateSafeMinimumDetailLevel(_0x2a20ee,_0x1bf0d4,_0x3668c6);var _0x33665e=this[_0x1c6759(0x149)][_0x1c6759(0x146)]({'url':_0x1c6759(0x157)+_0x1f4221});_0x27121d[_0x1c6759(0x13f)]({'url':_0x33665e,'tilingScheme':_0x2a20ee,'rectangle':_0x1bf0d4,'tileWidth':_0x1d0772,'tileHeight':_0x18e434,'minimumLevel':_0x3668c6,'maximumLevel':_0x4930e8,'tileDiscardPolicy':_0x3f5e67[_0x1c6759(0x158)],'credit':_0x3f5e67[_0x1c6759(0x133)]});},TileMapServiceImageryProvider['prototype'][a748_0x4e0503(0x123)]=function(_0x507bed){var _0xf16dfb=a748_0x4e0503,_0x5cc792=this[_0xf16dfb(0x136)],_0x216480=a748_0x531228(_0x5cc792[_0xf16dfb(0x159)],_0xf16dfb(0x142)),_0x38eefa=a748_0x531228(_0x5cc792[_0xf16dfb(0x16e)],0x100),_0x387ecf=a748_0x531228(_0x5cc792[_0xf16dfb(0x14d)],0x100),_0x4c785e=_0x5cc792[_0xf16dfb(0x14e)],_0x268d28=a748_0x38c887(_0x5cc792[_0xf16dfb(0x140)])?_0x5cc792['tilingScheme']:new a748_0xa8d028({'ellipsoid':_0x5cc792[_0xf16dfb(0x15f)]}),_0x246884=a748_0x531228(_0x5cc792['rectangle'],_0x268d28[_0xf16dfb(0x165)]);_0x246884=confineRectangleToTilingScheme(_0x246884,_0x268d28);var _0x178549=calculateSafeMinimumDetailLevel(_0x268d28,_0x246884,_0x5cc792[_0xf16dfb(0x14e)]),_0x4acc76=this[_0xf16dfb(0x149)]['getDerivedResource']({'url':'{z}/{x}/{reverseY}.'+_0x216480});this[_0xf16dfb(0x155)][_0xf16dfb(0x13f)]({'url':_0x4acc76,'tilingScheme':_0x268d28,'rectangle':_0x246884,'tileWidth':_0x38eefa,'tileHeight':_0x387ecf,'minimumLevel':_0x178549,'maximumLevel':_0x4c785e,'tileDiscardPolicy':_0x5cc792[_0xf16dfb(0x158)],'credit':_0x5cc792['credit']});};export default TileMapServiceImageryProvider;