var a673_0x4f3996=a673_0x3618;(function(_0x24693b,_0x5eb4f4){var _0x154829=a673_0x3618,_0x12fb1f=_0x24693b();while(!![]){try{var _0x1fab37=parseInt(_0x154829(0xb6))/0x1*(-parseInt(_0x154829(0x9f))/0x2)+parseInt(_0x154829(0xd5))/0x3+parseInt(_0x154829(0x70))/0x4*(parseInt(_0x154829(0xa8))/0x5)+-parseInt(_0x154829(0xc8))/0x6+-parseInt(_0x154829(0xda))/0x7*(-parseInt(_0x154829(0xd9))/0x8)+parseInt(_0x154829(0xac))/0x9+-parseInt(_0x154829(0x74))/0xa;if(_0x1fab37===_0x5eb4f4)break;else _0x12fb1f['push'](_0x12fb1f['shift']());}catch(_0x2cb659){_0x12fb1f['push'](_0x12fb1f['shift']());}}}(a673_0x2f61,0xd7352));import a673_0x421759 from'../Core/Cartesian2.js';import a673_0x4559fd from'../Core/Cartesian3.js';import a673_0xcf627b from'../Core/Check.js';import a673_0x29cb5c from'../Core/Color.js';import a673_0x2897e8 from'../Core/defaultValue.js';import a673_0x390917 from'../Core/defined.js';import a673_0x2c5945 from'../Core/destroyObject.js';function a673_0x2f61(){var _0x516b74=['bursts','speed','show','1089520lhGmsj','object','destroy','scale','clone','height','green','_combinedMatrix','multiplyByPoint','bool','blue','lerp','EMPTY_OBJECT','add','_bursts','ceil','_minimumMass','mod','startColor','_previousTime','modelMatrix','_minimumParticleLife','defineProperties','color','MAX_VALUE','sizeInMeters','defined','normalizedAge','_matrixDirty','updateCallback','WHITE','particleLife','startScale','normalize','minimum','push','IDENTITY','_particlePool','imageSize','_particleEstimate','_maximumSpeed','_emitterModelMatrix','update','244IBXvmS','_age','_minimumSpeed','_lifetime','length','_emitter','endColor','emitterModelMatrix','endScale','110hhsQxL','maximumSpeed','multiply','_maximumImageSize','12461319kXCZtk','width','value.y','_sizeInMeters','minimumSpeed','_particles','number','_isComplete','_maximumMass','greaterThanOrEquals','12052kGxZLO','_billboardCollection','minimumMass','_startScale','value.x','emissionRate','randomBetween','minimumImageSize','typeOf','mass','_emissionRate','_maximumParticleLife','emit','_carryOver','_minimumImageSize','_updateParticlePool','pop','_normalizedAge','1052508YwDAlD','isDestroyed','image','_complete','_startColor','_currentTime','maximum','_endColor','velocity','_modelMatrix','maximumParticleLife','red','prototype','280668xLinTH','equals','frameNumber','floor','4784024CviTNQ','7bKsSmo','_billboard','value','minimumParticleLife','loop','alpha','time','life','subtract','position','remove','101828FOyLRT'];a673_0x2f61=function(){return _0x516b74;};return a673_0x2f61();}import a673_0x1678b3 from'../Core/Event.js';import a673_0x38f498 from'../Core/JulianDate.js';import a673_0x5d013d from'../Core/Math.js';import a673_0x3439f6 from'../Core/Matrix4.js';import a673_0x3f0238 from'./BillboardCollection.js';import a673_0x1bcdbd from'./CircleEmitter.js';import a673_0x4f34f0 from'./Particle.js';var defaultImageSize=new a673_0x421759(0x1,0x1);function ParticleSystem(_0x5e536d){var _0x5d365e=a673_0x3618;_0x5e536d=a673_0x2897e8(_0x5e536d,a673_0x2897e8[_0x5d365e(0x80)]),this[_0x5d365e(0x73)]=a673_0x2897e8(_0x5e536d[_0x5d365e(0x73)],!![]),this['updateCallback']=_0x5e536d[_0x5d365e(0x91)],this['loop']=a673_0x2897e8(_0x5e536d[_0x5d365e(0x69)],!![]),this['image']=a673_0x2897e8(_0x5e536d[_0x5d365e(0xca)],undefined);var _0x4af5f0=_0x5e536d['emitter'];!a673_0x390917(_0x4af5f0)&&(_0x4af5f0=new a673_0x1bcdbd(0.5)),this[_0x5d365e(0xa4)]=_0x4af5f0,this[_0x5d365e(0x82)]=_0x5e536d[_0x5d365e(0x71)],this[_0x5d365e(0xd1)]=a673_0x3439f6[_0x5d365e(0x78)](a673_0x2897e8(_0x5e536d[_0x5d365e(0x88)],a673_0x3439f6[_0x5d365e(0x98)])),this['_emitterModelMatrix']=a673_0x3439f6[_0x5d365e(0x78)](a673_0x2897e8(_0x5e536d[_0x5d365e(0xa6)],a673_0x3439f6[_0x5d365e(0x98)])),this[_0x5d365e(0x90)]=!![],this['_combinedMatrix']=new a673_0x3439f6(),this[_0x5d365e(0xcc)]=a673_0x29cb5c[_0x5d365e(0x78)](a673_0x2897e8(_0x5e536d[_0x5d365e(0x8b)],a673_0x2897e8(_0x5e536d[_0x5d365e(0x86)],a673_0x29cb5c[_0x5d365e(0x92)]))),this['_endColor']=a673_0x29cb5c[_0x5d365e(0x78)](a673_0x2897e8(_0x5e536d[_0x5d365e(0x8b)],a673_0x2897e8(_0x5e536d['endColor'],a673_0x29cb5c['WHITE']))),this[_0x5d365e(0xb9)]=a673_0x2897e8(_0x5e536d['scale'],a673_0x2897e8(_0x5e536d['startScale'],0x1)),this['_endScale']=a673_0x2897e8(_0x5e536d[_0x5d365e(0x77)],a673_0x2897e8(_0x5e536d[_0x5d365e(0xa7)],0x1)),this[_0x5d365e(0xc0)]=a673_0x2897e8(_0x5e536d[_0x5d365e(0xbb)],0x5),this[_0x5d365e(0xa1)]=a673_0x2897e8(_0x5e536d[_0x5d365e(0x72)],a673_0x2897e8(_0x5e536d[_0x5d365e(0xb0)],0x1)),this['_maximumSpeed']=a673_0x2897e8(_0x5e536d[_0x5d365e(0x72)],a673_0x2897e8(_0x5e536d[_0x5d365e(0xa9)],0x1)),this[_0x5d365e(0x89)]=a673_0x2897e8(_0x5e536d[_0x5d365e(0x93)],a673_0x2897e8(_0x5e536d[_0x5d365e(0xdd)],0x5)),this['_maximumParticleLife']=a673_0x2897e8(_0x5e536d['particleLife'],a673_0x2897e8(_0x5e536d[_0x5d365e(0xd2)],0x5)),this[_0x5d365e(0x84)]=a673_0x2897e8(_0x5e536d['mass'],a673_0x2897e8(_0x5e536d[_0x5d365e(0xb8)],0x1)),this[_0x5d365e(0xb4)]=a673_0x2897e8(_0x5e536d[_0x5d365e(0xbf)],a673_0x2897e8(_0x5e536d['maximumMass'],0x1)),this[_0x5d365e(0xc4)]=a673_0x421759[_0x5d365e(0x78)](a673_0x2897e8(_0x5e536d[_0x5d365e(0x9a)],a673_0x2897e8(_0x5e536d[_0x5d365e(0xbd)],defaultImageSize))),this[_0x5d365e(0xab)]=a673_0x421759[_0x5d365e(0x78)](a673_0x2897e8(_0x5e536d[_0x5d365e(0x9a)],a673_0x2897e8(_0x5e536d['maximumImageSize'],defaultImageSize))),this[_0x5d365e(0xaf)]=a673_0x2897e8(_0x5e536d[_0x5d365e(0x8d)],![]),this['_lifetime']=a673_0x2897e8(_0x5e536d['lifetime'],Number[_0x5d365e(0x8c)]),this[_0x5d365e(0xb7)]=undefined,this[_0x5d365e(0xb1)]=[],this[_0x5d365e(0x99)]=[],this[_0x5d365e(0x87)]=undefined,this['_currentTime']=0x0,this[_0x5d365e(0xc3)]=0x0,this[_0x5d365e(0xcb)]=new a673_0x1678b3(),this['_isComplete']=![],this[_0x5d365e(0xc5)]=!![],this[_0x5d365e(0x9b)]=0x0;}Object[a673_0x4f3996(0x8a)](ParticleSystem['prototype'],{'emitter':{'get':function(){var _0x34d15c=a673_0x4f3996;return this[_0x34d15c(0xa4)];},'set':function(_0x181854){var _0xfe8e9a=a673_0x4f3996;a673_0xcf627b[_0xfe8e9a(0x8e)](_0xfe8e9a(0xdc),_0x181854),this[_0xfe8e9a(0xa4)]=_0x181854;}},'bursts':{'get':function(){var _0x188e63=a673_0x4f3996;return this[_0x188e63(0x82)];},'set':function(_0xd6acab){var _0x123c67=a673_0x4f3996;this[_0x123c67(0x82)]=_0xd6acab,this[_0x123c67(0xc5)]=!![];}},'modelMatrix':{'get':function(){var _0x4b6e8c=a673_0x4f3996;return this[_0x4b6e8c(0xd1)];},'set':function(_0x245b54){var _0x458712=a673_0x4f3996;a673_0xcf627b[_0x458712(0x8e)](_0x458712(0xdc),_0x245b54),this['_matrixDirty']=this[_0x458712(0x90)]||!a673_0x3439f6[_0x458712(0xd6)](this[_0x458712(0xd1)],_0x245b54),a673_0x3439f6[_0x458712(0x78)](_0x245b54,this['_modelMatrix']);}},'emitterModelMatrix':{'get':function(){var _0x394ad8=a673_0x4f3996;return this[_0x394ad8(0x9d)];},'set':function(_0x2c3aa7){var _0x306f92=a673_0x4f3996;a673_0xcf627b[_0x306f92(0x8e)](_0x306f92(0xdc),_0x2c3aa7),this[_0x306f92(0x90)]=this[_0x306f92(0x90)]||!a673_0x3439f6['equals'](this[_0x306f92(0x9d)],_0x2c3aa7),a673_0x3439f6[_0x306f92(0x78)](_0x2c3aa7,this['_emitterModelMatrix']);}},'startColor':{'get':function(){var _0x2c497e=a673_0x4f3996;return this[_0x2c497e(0xcc)];},'set':function(_0xe25f0d){var _0x29f98d=a673_0x4f3996;a673_0xcf627b[_0x29f98d(0x8e)](_0x29f98d(0xdc),_0xe25f0d),a673_0x29cb5c[_0x29f98d(0x78)](_0xe25f0d,this[_0x29f98d(0xcc)]);}},'endColor':{'get':function(){var _0x4fba62=a673_0x4f3996;return this[_0x4fba62(0xcf)];},'set':function(_0x34f218){var _0x157107=a673_0x4f3996;a673_0xcf627b['defined'](_0x157107(0xdc),_0x34f218),a673_0x29cb5c['clone'](_0x34f218,this[_0x157107(0xcf)]);}},'startScale':{'get':function(){var _0x572efc=a673_0x4f3996;return this[_0x572efc(0xb9)];},'set':function(_0x26dd19){var _0x5b23fd=a673_0x4f3996;a673_0xcf627b[_0x5b23fd(0xbe)][_0x5b23fd(0xb2)][_0x5b23fd(0xb5)](_0x5b23fd(0xdc),_0x26dd19,0x0),this['_startScale']=_0x26dd19;}},'endScale':{'get':function(){return this['_endScale'];},'set':function(_0x444033){var _0x1fe63b=a673_0x4f3996;a673_0xcf627b[_0x1fe63b(0xbe)]['number'][_0x1fe63b(0xb5)]('value',_0x444033,0x0),this['_endScale']=_0x444033;}},'emissionRate':{'get':function(){var _0x456581=a673_0x4f3996;return this[_0x456581(0xc0)];},'set':function(_0x3c4fc8){var _0x262cc6=a673_0x4f3996;a673_0xcf627b[_0x262cc6(0xbe)][_0x262cc6(0xb2)][_0x262cc6(0xb5)](_0x262cc6(0xdc),_0x3c4fc8,0x0),this[_0x262cc6(0xc0)]=_0x3c4fc8,this[_0x262cc6(0xc5)]=!![];}},'minimumSpeed':{'get':function(){var _0x25d311=a673_0x4f3996;return this[_0x25d311(0xa1)];},'set':function(_0x3e2677){var _0x4fc7f1=a673_0x4f3996;a673_0xcf627b[_0x4fc7f1(0xbe)][_0x4fc7f1(0xb2)]['greaterThanOrEquals'](_0x4fc7f1(0xdc),_0x3e2677,0x0),this['_minimumSpeed']=_0x3e2677;}},'maximumSpeed':{'get':function(){var _0x5f1908=a673_0x4f3996;return this[_0x5f1908(0x9c)];},'set':function(_0xa1f378){var _0xdffd9d=a673_0x4f3996;a673_0xcf627b[_0xdffd9d(0xbe)][_0xdffd9d(0xb2)][_0xdffd9d(0xb5)](_0xdffd9d(0xdc),_0xa1f378,0x0),this[_0xdffd9d(0x9c)]=_0xa1f378;}},'minimumParticleLife':{'get':function(){var _0x3b3e85=a673_0x4f3996;return this[_0x3b3e85(0x89)];},'set':function(_0x4ba63a){var _0x100426=a673_0x4f3996;a673_0xcf627b[_0x100426(0xbe)][_0x100426(0xb2)][_0x100426(0xb5)]('value',_0x4ba63a,0x0),this['_minimumParticleLife']=_0x4ba63a;}},'maximumParticleLife':{'get':function(){var _0x2af837=a673_0x4f3996;return this[_0x2af837(0xc1)];},'set':function(_0x334e43){var _0x27ab35=a673_0x4f3996;a673_0xcf627b[_0x27ab35(0xbe)]['number'][_0x27ab35(0xb5)](_0x27ab35(0xdc),_0x334e43,0x0),this[_0x27ab35(0xc1)]=_0x334e43,this[_0x27ab35(0xc5)]=!![];}},'minimumMass':{'get':function(){var _0x5f2db3=a673_0x4f3996;return this[_0x5f2db3(0x84)];},'set':function(_0x2306fd){var _0x248696=a673_0x4f3996;a673_0xcf627b[_0x248696(0xbe)][_0x248696(0xb2)][_0x248696(0xb5)](_0x248696(0xdc),_0x2306fd,0x0),this['_minimumMass']=_0x2306fd;}},'maximumMass':{'get':function(){var _0x53fa27=a673_0x4f3996;return this[_0x53fa27(0xb4)];},'set':function(_0x91df99){var _0x32f51f=a673_0x4f3996;a673_0xcf627b[_0x32f51f(0xbe)][_0x32f51f(0xb2)][_0x32f51f(0xb5)](_0x32f51f(0xdc),_0x91df99,0x0),this[_0x32f51f(0xb4)]=_0x91df99;}},'minimumImageSize':{'get':function(){return this['_minimumImageSize'];},'set':function(_0x52f620){var _0x344bae=a673_0x4f3996;a673_0xcf627b['typeOf'][_0x344bae(0x75)](_0x344bae(0xdc),_0x52f620),a673_0xcf627b[_0x344bae(0xbe)]['number'][_0x344bae(0xb5)](_0x344bae(0xba),_0x52f620['x'],0x0),a673_0xcf627b[_0x344bae(0xbe)]['number'][_0x344bae(0xb5)]('value.y',_0x52f620['y'],0x0),this[_0x344bae(0xc4)]=_0x52f620;}},'maximumImageSize':{'get':function(){var _0x505aba=a673_0x4f3996;return this[_0x505aba(0xab)];},'set':function(_0x614090){var _0x51210e=a673_0x4f3996;a673_0xcf627b[_0x51210e(0xbe)]['object']('value',_0x614090),a673_0xcf627b['typeOf'][_0x51210e(0xb2)]['greaterThanOrEquals']('value.x',_0x614090['x'],0x0),a673_0xcf627b[_0x51210e(0xbe)]['number']['greaterThanOrEquals'](_0x51210e(0xae),_0x614090['y'],0x0),this['_maximumImageSize']=_0x614090;}},'sizeInMeters':{'get':function(){return this['_sizeInMeters'];},'set':function(_0x576448){var _0x5ac6f2=a673_0x4f3996;a673_0xcf627b[_0x5ac6f2(0xbe)][_0x5ac6f2(0x7d)](_0x5ac6f2(0xdc),_0x576448),this[_0x5ac6f2(0xaf)]=_0x576448;}},'lifetime':{'get':function(){var _0x429799=a673_0x4f3996;return this[_0x429799(0xa2)];},'set':function(_0x4cdd49){var _0x388ac0=a673_0x4f3996;a673_0xcf627b[_0x388ac0(0xbe)]['number']['greaterThanOrEquals'](_0x388ac0(0xdc),_0x4cdd49,0x0),this[_0x388ac0(0xa2)]=_0x4cdd49;}},'complete':{'get':function(){var _0x287124=a673_0x4f3996;return this[_0x287124(0xcb)];}},'isComplete':{'get':function(){var _0x1f7405=a673_0x4f3996;return this[_0x1f7405(0xb3)];}}});function updateParticlePool(_0x7206e6){var _0x2b9b8d=a673_0x4f3996,_0x1fbf79=_0x7206e6['_emissionRate'],_0x23b2b5=_0x7206e6[_0x2b9b8d(0xc1)],_0xd1b00f=0x0,_0x5509a7=_0x7206e6[_0x2b9b8d(0x82)];if(a673_0x390917(_0x5509a7)){var _0xf3e67d=_0x5509a7[_0x2b9b8d(0xa3)];for(var _0x5da741=0x0;_0x5da741<_0xf3e67d;++_0x5da741){_0xd1b00f+=_0x5509a7[_0x5da741][_0x2b9b8d(0xce)];}}var _0x37efc3=_0x7206e6['_billboardCollection'],_0x571461=_0x7206e6[_0x2b9b8d(0xca)],_0x3a2630=Math[_0x2b9b8d(0x83)](_0x1fbf79*_0x23b2b5+_0xd1b00f),_0x275a5e=_0x7206e6['_particles'],_0x227a1a=_0x7206e6[_0x2b9b8d(0x99)],_0x267c7a=Math['max'](_0x3a2630-_0x275a5e[_0x2b9b8d(0xa3)]-_0x227a1a[_0x2b9b8d(0xa3)],0x0);for(var _0x4c9ec9=0x0;_0x4c9ec9<_0x267c7a;++_0x4c9ec9){var _0x216504=new a673_0x4f34f0();_0x216504[_0x2b9b8d(0xdb)]=_0x37efc3['add']({'image':_0x571461}),_0x227a1a[_0x2b9b8d(0x97)](_0x216504);}_0x7206e6[_0x2b9b8d(0x9b)]=_0x3a2630;}function getOrCreateParticle(_0x395a71){var _0x5eb5aa=a673_0x4f3996,_0x1b1faa=_0x395a71[_0x5eb5aa(0x99)][_0x5eb5aa(0xc6)]();return!a673_0x390917(_0x1b1faa)&&(_0x1b1faa=new a673_0x4f34f0()),_0x1b1faa;}function addParticleToPool(_0x559611,_0x56edb9){var _0x2a143c=a673_0x4f3996;_0x559611[_0x2a143c(0x99)]['push'](_0x56edb9);}function freeParticlePool(_0x3544c1){var _0x1c582a=a673_0x4f3996,_0x58f681=_0x3544c1[_0x1c582a(0xb1)],_0x4be7ce=_0x3544c1[_0x1c582a(0x99)],_0x230aa5=_0x3544c1[_0x1c582a(0xb7)],_0x21913f=_0x58f681[_0x1c582a(0xa3)],_0x4fae98=_0x4be7ce['length'],_0x7f2fdb=_0x3544c1[_0x1c582a(0x9b)],_0x5e8ba4=_0x4fae98-Math['max'](_0x7f2fdb-_0x21913f-_0x4fae98,0x0);for(var _0x453de6=_0x5e8ba4;_0x453de6<_0x4fae98;++_0x453de6){var _0x5050ac=_0x4be7ce[_0x453de6];_0x230aa5[_0x1c582a(0x6f)](_0x5050ac[_0x1c582a(0xdb)]);}_0x4be7ce[_0x1c582a(0xa3)]=_0x5e8ba4;}function removeBillboard(_0x4cadfd){var _0x795b9a=a673_0x4f3996;a673_0x390917(_0x4cadfd['_billboard'])&&(_0x4cadfd[_0x795b9a(0xdb)][_0x795b9a(0x73)]=![]);}function a673_0x3618(_0x1525a5,_0x3e6e1a){var _0x2f6148=a673_0x2f61();return a673_0x3618=function(_0x361839,_0x7c7d2f){_0x361839=_0x361839-0x69;var _0x26877f=_0x2f6148[_0x361839];return _0x26877f;},a673_0x3618(_0x1525a5,_0x3e6e1a);}function updateBillboard(_0x5ea4b8,_0x368c33){var _0xf93c2=a673_0x4f3996,_0x4b9bc8=_0x368c33[_0xf93c2(0xdb)];!a673_0x390917(_0x4b9bc8)&&(_0x4b9bc8=_0x368c33[_0xf93c2(0xdb)]=_0x5ea4b8[_0xf93c2(0xb7)][_0xf93c2(0x81)]({'image':_0x368c33[_0xf93c2(0xca)]}));_0x4b9bc8[_0xf93c2(0xad)]=_0x368c33['imageSize']['x'],_0x4b9bc8[_0xf93c2(0x79)]=_0x368c33[_0xf93c2(0x9a)]['y'],_0x4b9bc8['position']=_0x368c33[_0xf93c2(0x6e)],_0x4b9bc8['sizeInMeters']=_0x5ea4b8[_0xf93c2(0x8d)],_0x4b9bc8[_0xf93c2(0x73)]=!![];var _0x532879=a673_0x5d013d[_0xf93c2(0x7f)](_0x368c33['startColor'][_0xf93c2(0xd3)],_0x368c33[_0xf93c2(0xa5)][_0xf93c2(0xd3)],_0x368c33['normalizedAge']),_0x301bba=a673_0x5d013d[_0xf93c2(0x7f)](_0x368c33['startColor'][_0xf93c2(0x7a)],_0x368c33['endColor'][_0xf93c2(0x7a)],_0x368c33[_0xf93c2(0x8f)]),_0x21f601=a673_0x5d013d[_0xf93c2(0x7f)](_0x368c33[_0xf93c2(0x86)]['blue'],_0x368c33[_0xf93c2(0xa5)][_0xf93c2(0x7e)],_0x368c33[_0xf93c2(0x8f)]),_0x36cf0e=a673_0x5d013d[_0xf93c2(0x7f)](_0x368c33[_0xf93c2(0x86)][_0xf93c2(0x6a)],_0x368c33[_0xf93c2(0xa5)][_0xf93c2(0x6a)],_0x368c33[_0xf93c2(0x8f)]);_0x4b9bc8[_0xf93c2(0x8b)]=new a673_0x29cb5c(_0x532879,_0x301bba,_0x21f601,_0x36cf0e),_0x4b9bc8[_0xf93c2(0x77)]=a673_0x5d013d['lerp'](_0x368c33[_0xf93c2(0x94)],_0x368c33[_0xf93c2(0xa7)],_0x368c33['normalizedAge']);}function addParticle(_0x173b0c,_0x5d60b0){var _0x155a52=a673_0x4f3996;_0x5d60b0[_0x155a52(0x86)]=a673_0x29cb5c[_0x155a52(0x78)](_0x173b0c['_startColor'],_0x5d60b0[_0x155a52(0x86)]),_0x5d60b0[_0x155a52(0xa5)]=a673_0x29cb5c['clone'](_0x173b0c[_0x155a52(0xcf)],_0x5d60b0['endColor']),_0x5d60b0[_0x155a52(0x94)]=_0x173b0c['_startScale'],_0x5d60b0['endScale']=_0x173b0c['_endScale'],_0x5d60b0['image']=_0x173b0c[_0x155a52(0xca)],_0x5d60b0[_0x155a52(0x6c)]=a673_0x5d013d[_0x155a52(0xbc)](_0x173b0c[_0x155a52(0x89)],_0x173b0c[_0x155a52(0xc1)]),_0x5d60b0['mass']=a673_0x5d013d[_0x155a52(0xbc)](_0x173b0c[_0x155a52(0x84)],_0x173b0c['_maximumMass']),_0x5d60b0['imageSize']['x']=a673_0x5d013d[_0x155a52(0xbc)](_0x173b0c[_0x155a52(0xc4)]['x'],_0x173b0c[_0x155a52(0xab)]['x']),_0x5d60b0[_0x155a52(0x9a)]['y']=a673_0x5d013d[_0x155a52(0xbc)](_0x173b0c[_0x155a52(0xc4)]['y'],_0x173b0c[_0x155a52(0xab)]['y']),_0x5d60b0[_0x155a52(0xc7)]=0x0,_0x5d60b0[_0x155a52(0xa0)]=0x0;var _0xa07b5f=a673_0x5d013d['randomBetween'](_0x173b0c['_minimumSpeed'],_0x173b0c[_0x155a52(0x9c)]);a673_0x4559fd['multiplyByScalar'](_0x5d60b0[_0x155a52(0xd0)],_0xa07b5f,_0x5d60b0[_0x155a52(0xd0)]),_0x173b0c['_particles']['push'](_0x5d60b0);}function calculateNumberToEmit(_0x2068f1,_0x4d7185){var _0xe41e84=a673_0x4f3996;if(_0x2068f1['_isComplete'])return 0x0;_0x4d7185=a673_0x5d013d[_0xe41e84(0x85)](_0x4d7185,_0x2068f1[_0xe41e84(0xa2)]);var _0x23ddba=_0x4d7185*_0x2068f1[_0xe41e84(0xc0)],_0x2edcd8=Math[_0xe41e84(0xd8)](_0x23ddba);_0x2068f1[_0xe41e84(0xc3)]+=_0x23ddba-_0x2edcd8;_0x2068f1['_carryOver']>0x1&&(_0x2edcd8++,_0x2068f1[_0xe41e84(0xc3)]-=0x1);if(a673_0x390917(_0x2068f1['bursts'])){var _0x465663=_0x2068f1[_0xe41e84(0x71)][_0xe41e84(0xa3)];for(var _0x294a05=0x0;_0x294a05<_0x465663;_0x294a05++){var _0x217c15=_0x2068f1[_0xe41e84(0x71)][_0x294a05],_0x29f678=_0x2068f1[_0xe41e84(0xcd)];a673_0x390917(_0x217c15)&&!_0x217c15['_complete']&&_0x29f678>_0x217c15[_0xe41e84(0x6b)]&&(_0x2edcd8+=a673_0x5d013d[_0xe41e84(0xbc)](_0x217c15[_0xe41e84(0x96)],_0x217c15[_0xe41e84(0xce)]),_0x217c15[_0xe41e84(0xcb)]=!![]);}}return _0x2edcd8;}var rotatedVelocityScratch=new a673_0x4559fd();ParticleSystem[a673_0x4f3996(0xd4)][a673_0x4f3996(0x9e)]=function(_0x3661d5){var _0x48403c=a673_0x4f3996;if(!this[_0x48403c(0x73)])return;!a673_0x390917(this['_billboardCollection'])&&(this[_0x48403c(0xb7)]=new a673_0x3f0238());this[_0x48403c(0xc5)]&&(updateParticlePool(this),this[_0x48403c(0xc5)]=![]);var _0x1f2312=0x0;this[_0x48403c(0x87)]&&(_0x1f2312=a673_0x38f498['secondsDifference'](_0x3661d5[_0x48403c(0x6b)],this[_0x48403c(0x87)]));_0x1f2312<0x0&&(_0x1f2312=0x0);var _0x5d6736=this[_0x48403c(0xb1)],_0x438ab2=this[_0x48403c(0xa4)],_0x5029dc=this[_0x48403c(0x91)],_0x271734,_0x248616,_0x2f4300=_0x5d6736[_0x48403c(0xa3)];for(_0x271734=0x0;_0x271734<_0x2f4300;++_0x271734){_0x248616=_0x5d6736[_0x271734],!_0x248616[_0x48403c(0x9e)](_0x1f2312,_0x5029dc)?(removeBillboard(_0x248616),addParticleToPool(this,_0x248616),_0x5d6736[_0x271734]=_0x5d6736[_0x2f4300-0x1],--_0x271734,--_0x2f4300):updateBillboard(this,_0x248616);}_0x5d6736[_0x48403c(0xa3)]=_0x2f4300;var _0x7a2000=calculateNumberToEmit(this,_0x1f2312);if(_0x7a2000>0x0&&a673_0x390917(_0x438ab2)){this[_0x48403c(0x90)]&&(this[_0x48403c(0x7b)]=a673_0x3439f6[_0x48403c(0xaa)](this[_0x48403c(0x88)],this['emitterModelMatrix'],this[_0x48403c(0x7b)]),this[_0x48403c(0x90)]=![]);var _0x40e32a=this[_0x48403c(0x7b)];for(_0x271734=0x0;_0x271734<_0x7a2000;_0x271734++){_0x248616=getOrCreateParticle(this),this[_0x48403c(0xa4)][_0x48403c(0xc2)](_0x248616),a673_0x4559fd[_0x48403c(0x81)](_0x248616[_0x48403c(0x6e)],_0x248616['velocity'],rotatedVelocityScratch),a673_0x3439f6[_0x48403c(0x7c)](_0x40e32a,rotatedVelocityScratch,rotatedVelocityScratch),_0x248616['position']=a673_0x3439f6[_0x48403c(0x7c)](_0x40e32a,_0x248616[_0x48403c(0x6e)],_0x248616[_0x48403c(0x6e)]),a673_0x4559fd[_0x48403c(0x6d)](rotatedVelocityScratch,_0x248616[_0x48403c(0x6e)],_0x248616[_0x48403c(0xd0)]),a673_0x4559fd[_0x48403c(0x95)](_0x248616[_0x48403c(0xd0)],_0x248616[_0x48403c(0xd0)]),addParticle(this,_0x248616),updateBillboard(this,_0x248616);}}this[_0x48403c(0xb7)]['update'](_0x3661d5),this[_0x48403c(0x87)]=a673_0x38f498[_0x48403c(0x78)](_0x3661d5[_0x48403c(0x6b)],this[_0x48403c(0x87)]),this[_0x48403c(0xcd)]+=_0x1f2312;if(this['_lifetime']!==Number[_0x48403c(0x8c)]&&this[_0x48403c(0xcd)]>this[_0x48403c(0xa2)]){if(this[_0x48403c(0x69)]){this[_0x48403c(0xcd)]=a673_0x5d013d['mod'](this[_0x48403c(0xcd)],this[_0x48403c(0xa2)]);if(this[_0x48403c(0x71)]){var _0x2ed006=this[_0x48403c(0x71)][_0x48403c(0xa3)];for(_0x271734=0x0;_0x271734<_0x2ed006;_0x271734++){this[_0x48403c(0x71)][_0x271734][_0x48403c(0xcb)]=![];}}}else this[_0x48403c(0xb3)]=!![],this[_0x48403c(0xcb)]['raiseEvent'](this);}_0x3661d5[_0x48403c(0xd7)]%0x78===0x0&&freeParticlePool(this);},ParticleSystem['prototype'][a673_0x4f3996(0xc9)]=function(){return![];},ParticleSystem[a673_0x4f3996(0xd4)][a673_0x4f3996(0x76)]=function(){var _0x37c0ab=a673_0x4f3996;return this['_billboardCollection']=this[_0x37c0ab(0xb7)]&&this['_billboardCollection'][_0x37c0ab(0x76)](),a673_0x2c5945(this);};export default ParticleSystem;