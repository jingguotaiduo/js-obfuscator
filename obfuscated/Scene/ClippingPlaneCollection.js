var a471_0xe57031=a471_0x2ab8;(function(_0x4bb9a7,_0x51f9dd){var _0x3e9631=a471_0x2ab8,_0x255b48=_0x4bb9a7();while(!![]){try{var _0x476257=parseInt(_0x3e9631(0x1a8))/0x1*(parseInt(_0x3e9631(0x178))/0x2)+-parseInt(_0x3e9631(0x187))/0x3+-parseInt(_0x3e9631(0x1a3))/0x4+-parseInt(_0x3e9631(0x1a9))/0x5+-parseInt(_0x3e9631(0x1a7))/0x6+parseInt(_0x3e9631(0x1a2))/0x7*(parseInt(_0x3e9631(0x19e))/0x8)+parseInt(_0x3e9631(0x197))/0x9;if(_0x476257===_0x51f9dd)break;else _0x255b48['push'](_0x255b48['shift']());}catch(_0x2571cd){_0x255b48['push'](_0x255b48['shift']());}}}(a471_0x2c76,0xc5d79));import a471_0x5a8ed0 from'../Core/AttributeCompression.js';import a471_0x4a1ea2 from'../Core/Cartesian2.js';import a471_0x4c5ded from'../Core/Cartesian3.js';import a471_0x54ad1f from'../Core/Cartesian4.js';import a471_0x491868 from'../Core/Check.js';import a471_0x279a08 from'../Core/Color.js';import a471_0x8302d0 from'../Core/defaultValue.js';import a471_0x40251c from'../Core/defined.js';import a471_0x3d9922 from'../Core/destroyObject.js';import a471_0x5abfcc from'../Core/DeveloperError.js';import a471_0x39f28d from'../Core/Event.js';import a471_0x4612a3 from'../Core/Intersect.js';import a471_0x435010 from'../Core/Matrix4.js';import a471_0x3b7e03 from'../Core/PixelFormat.js';import a471_0x5d11ff from'../Core/Plane.js';import a471_0x1638ad from'../Renderer/ContextLimits.js';function a471_0x2ab8(_0x3e6f6a,_0x39f475){var _0x2c766a=a471_0x2c76();return a471_0x2ab8=function(_0x2ab8e0,_0x40ef00){_0x2ab8e0=_0x2ab8e0-0x169;var _0x17e88c=_0x2c766a[_0x2ab8e0];return _0x17e88c;},a471_0x2ab8(_0x3e6f6a,_0x39f475);}import a471_0x2aa496 from'../Renderer/PixelDatatype.js';import a471_0x4febaa from'../Renderer/Sampler.js';function a471_0x2c76(){var _0x365869=['destroy','min','ClippingPlaneCollection\x20should\x20only\x20be\x20assigned\x20to\x20one\x20object','defineProperties','multiply','472692RTBeVX','octEncodeToCartesian4','packFloat','EMPTY_OBJECT','texture','normal','NEAREST','INSIDE','computeIntersectionWithBoundingVolume','planeRemoved','get','add','setOwner','_unionClippingRegions','planes','_float32View','7688259FPsHdG','OUTSIDE','equals','ceil','modelMatrix','height','_uint8View','656Nkvior','useFloatTexture','typeOf','edgeWidth','99302guYpNK','620620PpaUlz','_dirtyIndex','getTextureResolution','remove','6099618LHsigH','1QBassM','4447215ZPZmcC','removeAll','planeAdded','contains','_planes','intersectPlane','clone','maximumTextureSize','enabled','prototype','copyFrom','_owner','raiseEvent','onChangeCallback','_clippingPlanesTexture','width','push','_multipleDirtyPlanes','distance','2023246lPuBxy','length','number','edgeColor','unionClippingRegions','index','IDENTITY','floor','context','_enabled'];a471_0x2c76=function(){return _0x365869;};return a471_0x2c76();}import a471_0x5b3945 from'../Renderer/Texture.js';import a471_0x40378b from'./ClippingPlane.js';function ClippingPlaneCollection(_0x55f61e){var _0x549b99=a471_0x2ab8;_0x55f61e=a471_0x8302d0(_0x55f61e,a471_0x8302d0[_0x549b99(0x18a)]),this[_0x549b99(0x169)]=[],this[_0x549b99(0x1a4)]=-0x1,this[_0x549b99(0x176)]=![],this[_0x549b99(0x181)]=a471_0x8302d0(_0x55f61e[_0x549b99(0x16d)],!![]),this[_0x549b99(0x19b)]=a471_0x435010[_0x549b99(0x16b)](a471_0x8302d0(_0x55f61e['modelMatrix'],a471_0x435010[_0x549b99(0x17e)])),this[_0x549b99(0x17b)]=a471_0x279a08[_0x549b99(0x16b)](a471_0x8302d0(_0x55f61e[_0x549b99(0x17b)],a471_0x279a08['WHITE'])),this[_0x549b99(0x1a1)]=a471_0x8302d0(_0x55f61e['edgeWidth'],0x0),this[_0x549b99(0x1ab)]=new a471_0x39f28d(),this['planeRemoved']=new a471_0x39f28d(),this[_0x549b99(0x170)]=undefined;var _0x3c6845=a471_0x8302d0(_0x55f61e[_0x549b99(0x17c)],![]);this['_unionClippingRegions']=_0x3c6845,this['_testIntersection']=_0x3c6845?unionIntersectFunction:defaultIntersectFunction,this['_uint8View']=undefined,this[_0x549b99(0x196)]=undefined,this[_0x549b99(0x173)]=undefined;var _0x3e87ac=_0x55f61e[_0x549b99(0x195)];if(a471_0x40251c(_0x3e87ac)){var _0x2791e3=_0x3e87ac[_0x549b99(0x179)];for(var _0x545fea=0x0;_0x545fea<_0x2791e3;++_0x545fea){this[_0x549b99(0x192)](_0x3e87ac[_0x545fea]);}}}function unionIntersectFunction(_0x38ea1a){var _0x2a24c7=a471_0x2ab8;return _0x38ea1a===a471_0x4612a3[_0x2a24c7(0x198)];}function defaultIntersectFunction(_0x2b589e){return _0x2b589e===a471_0x4612a3['INSIDE'];}Object[a471_0xe57031(0x185)](ClippingPlaneCollection[a471_0xe57031(0x16e)],{'length':{'get':function(){var _0x5447c1=a471_0xe57031;return this['_planes'][_0x5447c1(0x179)];}},'unionClippingRegions':{'get':function(){var _0x44f26d=a471_0xe57031;return this[_0x44f26d(0x194)];},'set':function(_0x4daf46){var _0x2d6968=a471_0xe57031;if(this['_unionClippingRegions']===_0x4daf46)return;this[_0x2d6968(0x194)]=_0x4daf46,this['_testIntersection']=_0x4daf46?unionIntersectFunction:defaultIntersectFunction;}},'enabled':{'get':function(){var _0x4dacc4=a471_0xe57031;return this[_0x4dacc4(0x181)];},'set':function(_0x78a6db){var _0x3228b9=a471_0xe57031;if(this[_0x3228b9(0x181)]===_0x78a6db)return;this[_0x3228b9(0x181)]=_0x78a6db;}},'texture':{'get':function(){var _0x73a1a0=a471_0xe57031;return this[_0x73a1a0(0x173)];}},'owner':{'get':function(){var _0x557368=a471_0xe57031;return this[_0x557368(0x170)];}},'clippingPlanesState':{'get':function(){var _0x353377=a471_0xe57031;return this[_0x353377(0x194)]?this[_0x353377(0x169)][_0x353377(0x179)]:-this['_planes'][_0x353377(0x179)];}}});function setIndexDirty(_0x17d380,_0x5801b7){var _0x195785=a471_0xe57031;_0x17d380['_multipleDirtyPlanes']=_0x17d380[_0x195785(0x176)]||_0x17d380[_0x195785(0x1a4)]!==-0x1&&_0x17d380[_0x195785(0x1a4)]!==_0x5801b7,_0x17d380['_dirtyIndex']=_0x5801b7;}ClippingPlaneCollection[a471_0xe57031(0x16e)]['add']=function(_0x5dc760){var _0x4ba256=a471_0xe57031,_0x6f72a9=this['_planes'][_0x4ba256(0x179)],_0x215474=this;_0x5dc760[_0x4ba256(0x172)]=function(_0x1f2e78){setIndexDirty(_0x215474,_0x1f2e78);},_0x5dc760[_0x4ba256(0x17d)]=_0x6f72a9,setIndexDirty(this,_0x6f72a9),this[_0x4ba256(0x169)][_0x4ba256(0x175)](_0x5dc760),this[_0x4ba256(0x1ab)]['raiseEvent'](_0x5dc760,_0x6f72a9);},ClippingPlaneCollection[a471_0xe57031(0x16e)][a471_0xe57031(0x191)]=function(_0x11a696){var _0x57d26a=a471_0xe57031;return a471_0x491868[_0x57d26a(0x1a0)][_0x57d26a(0x17a)](_0x57d26a(0x17d),_0x11a696),this[_0x57d26a(0x169)][_0x11a696];};function indexOf(_0xa8854f,_0x17001d){var _0x2a0a12=a471_0xe57031,_0x5c9db3=_0xa8854f[_0x2a0a12(0x179)];for(var _0x2d1247=0x0;_0x2d1247<_0x5c9db3;++_0x2d1247){if(a471_0x5d11ff[_0x2a0a12(0x199)](_0xa8854f[_0x2d1247],_0x17001d))return _0x2d1247;}return-0x1;}ClippingPlaneCollection[a471_0xe57031(0x16e)][a471_0xe57031(0x1ac)]=function(_0x1cf7a2){var _0x4a8409=a471_0xe57031;return indexOf(this[_0x4a8409(0x169)],_0x1cf7a2)!==-0x1;},ClippingPlaneCollection[a471_0xe57031(0x16e)][a471_0xe57031(0x1a6)]=function(_0x32d013){var _0x50d16c=a471_0xe57031,_0x2122dc=this[_0x50d16c(0x169)],_0x138a3b=indexOf(_0x2122dc,_0x32d013);if(_0x138a3b===-0x1)return![];_0x32d013 instanceof a471_0x40378b&&(_0x32d013[_0x50d16c(0x172)]=undefined,_0x32d013[_0x50d16c(0x17d)]=-0x1);var _0x5c38cd=_0x2122dc['length']-0x1;for(var _0x5484eb=_0x138a3b;_0x5484eb<_0x5c38cd;++_0x5484eb){var _0x3e3ce7=_0x2122dc[_0x5484eb+0x1];_0x2122dc[_0x5484eb]=_0x3e3ce7,_0x3e3ce7 instanceof a471_0x40378b&&(_0x3e3ce7[_0x50d16c(0x17d)]=_0x5484eb);}return this[_0x50d16c(0x176)]=!![],_0x2122dc[_0x50d16c(0x179)]=_0x5c38cd,this['planeRemoved'][_0x50d16c(0x171)](_0x32d013,_0x138a3b),!![];},ClippingPlaneCollection[a471_0xe57031(0x16e)][a471_0xe57031(0x1aa)]=function(){var _0x50769b=a471_0xe57031,_0x5cfd78=this[_0x50769b(0x169)],_0x25fb69=_0x5cfd78[_0x50769b(0x179)];for(var _0x54886e=0x0;_0x54886e<_0x25fb69;++_0x54886e){var _0x14e622=_0x5cfd78[_0x54886e];_0x14e622 instanceof a471_0x40378b&&(_0x14e622['onChangeCallback']=undefined,_0x14e622[_0x50769b(0x17d)]=-0x1),this[_0x50769b(0x190)][_0x50769b(0x171)](_0x14e622,_0x54886e);}this['_multipleDirtyPlanes']=!![],this[_0x50769b(0x169)]=[];};var distanceEncodeScratch=new a471_0x54ad1f(),oct32EncodeScratch=new a471_0x54ad1f();function packPlanesAsUint8(_0x28d54b,_0x3bf3a9,_0x4e052c){var _0x4276c7=a471_0xe57031,_0x2ad2e4=_0x28d54b[_0x4276c7(0x19d)],_0x12effd=_0x28d54b[_0x4276c7(0x169)],_0x513de7=0x0;for(var _0x14e69d=_0x3bf3a9;_0x14e69d<_0x4e052c;++_0x14e69d){var _0x845ad8=_0x12effd[_0x14e69d],_0x1199bc=a471_0x5a8ed0[_0x4276c7(0x188)](_0x845ad8[_0x4276c7(0x18c)],oct32EncodeScratch);_0x2ad2e4[_0x513de7]=_0x1199bc['x'],_0x2ad2e4[_0x513de7+0x1]=_0x1199bc['y'],_0x2ad2e4[_0x513de7+0x2]=_0x1199bc['z'],_0x2ad2e4[_0x513de7+0x3]=_0x1199bc['w'];var _0x28c7f8=a471_0x54ad1f[_0x4276c7(0x189)](_0x845ad8[_0x4276c7(0x177)],distanceEncodeScratch);_0x2ad2e4[_0x513de7+0x4]=_0x28c7f8['x'],_0x2ad2e4[_0x513de7+0x5]=_0x28c7f8['y'],_0x2ad2e4[_0x513de7+0x6]=_0x28c7f8['z'],_0x2ad2e4[_0x513de7+0x7]=_0x28c7f8['w'],_0x513de7+=0x8;}}function packPlanesAsFloats(_0x51e72e,_0x1dbaeb,_0xab5da1){var _0x5cf6ae=a471_0xe57031,_0x390803=_0x51e72e[_0x5cf6ae(0x196)],_0x3a7818=_0x51e72e[_0x5cf6ae(0x169)],_0x29c4a8=0x0;for(var _0x2d58a6=_0x1dbaeb;_0x2d58a6<_0xab5da1;++_0x2d58a6){var _0x170678=_0x3a7818[_0x2d58a6],_0x1425fe=_0x170678[_0x5cf6ae(0x18c)];_0x390803[_0x29c4a8]=_0x1425fe['x'],_0x390803[_0x29c4a8+0x1]=_0x1425fe['y'],_0x390803[_0x29c4a8+0x2]=_0x1425fe['z'],_0x390803[_0x29c4a8+0x3]=_0x170678[_0x5cf6ae(0x177)],_0x29c4a8+=0x4;}}function computeTextureResolution(_0x2d8bd3,_0x3bfde6){var _0x3b4002=a471_0xe57031,_0x59852f=a471_0x1638ad[_0x3b4002(0x16c)];return _0x3bfde6['x']=Math[_0x3b4002(0x183)](_0x2d8bd3,_0x59852f),_0x3bfde6['y']=Math[_0x3b4002(0x19a)](_0x2d8bd3/_0x3bfde6['x']),_0x3bfde6;}var textureResolutionScratch=new a471_0x4a1ea2();ClippingPlaneCollection['prototype']['update']=function(_0xffb5b6){var _0x560412=a471_0xe57031,_0x4096a5=this[_0x560412(0x173)],_0x726c67=_0xffb5b6[_0x560412(0x180)],_0x265c13=ClippingPlaneCollection[_0x560412(0x19f)](_0x726c67),_0x288c22=_0x265c13?this[_0x560412(0x179)]:this[_0x560412(0x179)]*0x2;if(a471_0x40251c(_0x4096a5)){var _0x3dbf07=_0x4096a5[_0x560412(0x174)]*_0x4096a5[_0x560412(0x19c)];(_0x3dbf07<_0x288c22||_0x288c22<0.25*_0x3dbf07)&&(_0x4096a5['destroy'](),_0x4096a5=undefined,this['_clippingPlanesTexture']=undefined);}if(this['length']===0x0)return;if(!a471_0x40251c(_0x4096a5)){var _0x6ac26=computeTextureResolution(_0x288c22,textureResolutionScratch);_0x6ac26['y']*=0x2,_0x265c13?(_0x4096a5=new a471_0x5b3945({'context':_0x726c67,'width':_0x6ac26['x'],'height':_0x6ac26['y'],'pixelFormat':a471_0x3b7e03['RGBA'],'pixelDatatype':a471_0x2aa496['FLOAT'],'sampler':a471_0x4febaa[_0x560412(0x18d)],'flipY':![]}),this[_0x560412(0x196)]=new Float32Array(_0x6ac26['x']*_0x6ac26['y']*0x4)):(_0x4096a5=new a471_0x5b3945({'context':_0x726c67,'width':_0x6ac26['x'],'height':_0x6ac26['y'],'pixelFormat':a471_0x3b7e03['RGBA'],'pixelDatatype':a471_0x2aa496['UNSIGNED_BYTE'],'sampler':a471_0x4febaa[_0x560412(0x18d)],'flipY':![]}),this[_0x560412(0x19d)]=new Uint8Array(_0x6ac26['x']*_0x6ac26['y']*0x4)),this[_0x560412(0x173)]=_0x4096a5,this[_0x560412(0x176)]=!![];}var _0x2355f5=this['_dirtyIndex'];if(!this[_0x560412(0x176)]&&_0x2355f5===-0x1)return;if(!this[_0x560412(0x176)]){var _0x572b8b=0x0,_0xadde61=0x0;_0x265c13?(_0xadde61=Math[_0x560412(0x17f)](_0x2355f5/_0x4096a5[_0x560412(0x174)]),_0x572b8b=Math['floor'](_0x2355f5-_0xadde61*_0x4096a5[_0x560412(0x174)]),packPlanesAsFloats(this,_0x2355f5,_0x2355f5+0x1),_0x4096a5[_0x560412(0x16f)]({'source':{'width':0x1,'height':0x1,'arrayBufferView':this['_float32View']},'xOffset':_0x572b8b,'yOffset':_0xadde61})):(_0xadde61=Math[_0x560412(0x17f)](_0x2355f5*0x2/_0x4096a5['width']),_0x572b8b=Math[_0x560412(0x17f)](_0x2355f5*0x2-_0xadde61*_0x4096a5[_0x560412(0x174)]),packPlanesAsUint8(this,_0x2355f5,_0x2355f5+0x1),_0x4096a5[_0x560412(0x16f)]({'source':{'width':0x2,'height':0x1,'arrayBufferView':this['_uint8View']},'xOffset':_0x572b8b,'yOffset':_0xadde61}));}else _0x265c13?(packPlanesAsFloats(this,0x0,this[_0x560412(0x169)]['length']),_0x4096a5[_0x560412(0x16f)]({'source':{'width':_0x4096a5[_0x560412(0x174)],'height':_0x4096a5[_0x560412(0x19c)],'arrayBufferView':this['_float32View']}})):(packPlanesAsUint8(this,0x0,this[_0x560412(0x169)][_0x560412(0x179)]),_0x4096a5[_0x560412(0x16f)]({'source':{'width':_0x4096a5[_0x560412(0x174)],'height':_0x4096a5[_0x560412(0x19c)],'arrayBufferView':this[_0x560412(0x19d)]}}));this[_0x560412(0x176)]=![],this[_0x560412(0x1a4)]=-0x1;};var scratchMatrix=new a471_0x435010(),scratchPlane=new a471_0x5d11ff(a471_0x4c5ded['UNIT_X'],0x0);ClippingPlaneCollection['prototype'][a471_0xe57031(0x18f)]=function(_0x515e67,_0x2dcea8){var _0x561760=a471_0xe57031,_0x3062ea=this[_0x561760(0x169)],_0x3e11e2=_0x3062ea[_0x561760(0x179)],_0x133e4e=this[_0x561760(0x19b)];a471_0x40251c(_0x2dcea8)&&(_0x133e4e=a471_0x435010[_0x561760(0x186)](_0x2dcea8,_0x133e4e,scratchMatrix));var _0x4d6b25=a471_0x4612a3[_0x561760(0x18e)];!this[_0x561760(0x17c)]&&_0x3e11e2>0x0&&(_0x4d6b25=a471_0x4612a3[_0x561760(0x198)]);for(var _0x5885fa=0x0;_0x5885fa<_0x3e11e2;++_0x5885fa){var _0x27251f=_0x3062ea[_0x5885fa];a471_0x5d11ff['transform'](_0x27251f,_0x133e4e,scratchPlane);var _0x44b4e9=_0x515e67[_0x561760(0x16a)](scratchPlane);if(_0x44b4e9===a471_0x4612a3['INTERSECTING'])_0x4d6b25=_0x44b4e9;else{if(this['_testIntersection'](_0x44b4e9))return _0x44b4e9;}}return _0x4d6b25;},ClippingPlaneCollection[a471_0xe57031(0x193)]=function(_0x27ac07,_0x365fdf,_0xb5012){var _0xcbc607=a471_0xe57031;if(_0x27ac07===_0x365fdf[_0xb5012])return;_0x365fdf[_0xb5012]=_0x365fdf[_0xb5012]&&_0x365fdf[_0xb5012]['destroy']();if(a471_0x40251c(_0x27ac07)){if(a471_0x40251c(_0x27ac07[_0xcbc607(0x170)]))throw new a471_0x5abfcc(_0xcbc607(0x184));_0x27ac07['_owner']=_0x365fdf,_0x365fdf[_0xb5012]=_0x27ac07;}},ClippingPlaneCollection['useFloatTexture']=function(_0x2b8faf){return _0x2b8faf['floatingPointTexture'];},ClippingPlaneCollection[a471_0xe57031(0x1a5)]=function(_0x2e6803,_0x44d525,_0x35ec99){var _0x4693d3=a471_0xe57031,_0x21f809=_0x2e6803[_0x4693d3(0x18b)];if(a471_0x40251c(_0x21f809))return _0x35ec99['x']=_0x21f809[_0x4693d3(0x174)],_0x35ec99['y']=_0x21f809[_0x4693d3(0x19c)],_0x35ec99;var _0x561c0a=ClippingPlaneCollection[_0x4693d3(0x19f)](_0x44d525)?_0x2e6803[_0x4693d3(0x179)]:_0x2e6803['length']*0x2,_0x389d89=computeTextureResolution(_0x561c0a,_0x35ec99);return _0x389d89['y']*=0x2,_0x389d89;},ClippingPlaneCollection[a471_0xe57031(0x16e)]['isDestroyed']=function(){return![];},ClippingPlaneCollection['prototype'][a471_0xe57031(0x182)]=function(){var _0x3c3cdc=a471_0xe57031;return this[_0x3c3cdc(0x173)]=this['_clippingPlanesTexture']&&this[_0x3c3cdc(0x173)][_0x3c3cdc(0x182)](),a471_0x3d9922(this);};export default ClippingPlaneCollection;