var a582_0x19697f=a582_0x1c3a;(function(_0x187adb,_0x27c362){var _0x107f81=a582_0x1c3a,_0x1186ba=_0x187adb();while(!![]){try{var _0x457d11=parseInt(_0x107f81(0x134))/0x1+-parseInt(_0x107f81(0x127))/0x2*(-parseInt(_0x107f81(0x12c))/0x3)+-parseInt(_0x107f81(0x11c))/0x4*(parseInt(_0x107f81(0x12d))/0x5)+parseInt(_0x107f81(0x14e))/0x6+parseInt(_0x107f81(0x15a))/0x7*(parseInt(_0x107f81(0x144))/0x8)+-parseInt(_0x107f81(0x156))/0x9*(-parseInt(_0x107f81(0x149))/0xa)+-parseInt(_0x107f81(0x12a))/0xb;if(_0x457d11===_0x27c362)break;else _0x1186ba['push'](_0x1186ba['shift']());}catch(_0x4b2791){_0x1186ba['push'](_0x1186ba['shift']());}}}(a582_0x1c4a,0x8e660));function a582_0x1c3a(_0x14a76f,_0xdea658){var _0x1c4af0=a582_0x1c4a();return a582_0x1c3a=function(_0x1c3a27,_0x1f414b){_0x1c3a27=_0x1c3a27-0x113;var _0xeb1478=_0x1c4af0[_0x1c3a27];return _0xeb1478;},a582_0x1c3a(_0x14a76f,_0xdea658);}import a582_0x511091 from'../Core/Color.js';import a582_0xce7d98 from'../Core/defined.js';import a582_0x4406f2 from'../Core/destroyObject.js';import a582_0x2d2c22 from'../Core/PixelFormat.js';import a582_0x11adcc from'../Renderer/ClearCommand.js';import a582_0x53d2ce from'../Renderer/Framebuffer.js';import a582_0x40c49a from'../Renderer/PixelDatatype.js';import a582_0x527ffb from'../Renderer/RenderState.js';import a582_0x4f06b6 from'../Renderer/Sampler.js';import a582_0x113ee3 from'../Renderer/ShaderSource.js';import a582_0x589ccb from'../Renderer/Texture.js';import a582_0x5c8cae from'../Renderer/TextureMagnificationFilter.js';import a582_0x425101 from'../Renderer/TextureMinificationFilter.js';import a582_0x16e195 from'../Renderer/TextureWrap.js';import a582_0x1968d4 from'../Shaders/PostProcessStages/PassThrough.js';import a582_0x20f696 from'./BlendingState.js';import a582_0x54badc from'./StencilConstants.js';import a582_0x4bbdb0 from'./StencilFunction.js';import a582_0x16a842 from'./StencilOperation.js';function InvertClassification(){var _0x51be5b=a582_0x1c3a;this[_0x51be5b(0x14a)]=undefined,this['_previousFramebuffer']=undefined,this[_0x51be5b(0x11a)]=undefined,this['_classifiedTexture']=undefined,this[_0x51be5b(0x115)]=undefined,this['_fbo']=undefined,this['_fboClassified']=undefined,this[_0x51be5b(0x117)]=undefined,this['_rsClassified']=undefined,this[_0x51be5b(0x13d)]=undefined,this[_0x51be5b(0x137)]=undefined,this[_0x51be5b(0x15d)]=undefined,this[_0x51be5b(0x113)]=new a582_0x11adcc({'color':new a582_0x511091(0x0,0x0,0x0,0x0),'owner':this}),this[_0x51be5b(0x128)]=new a582_0x11adcc({'color':new a582_0x511091(0x0,0x0,0x0,0x0),'depth':0x1,'stencil':0x0});var _0x3f66bf=this;this[_0x51be5b(0x121)]={'colorTexture':function(){var _0x2254dd=_0x51be5b;return _0x3f66bf[_0x2254dd(0x11a)];},'depthTexture':function(){return _0x3f66bf['_depthStencilTexture'];},'classifiedTexture':function(){var _0x13bfb4=_0x51be5b;return _0x3f66bf[_0x13bfb4(0x132)];}};}Object['defineProperties'](InvertClassification['prototype'],{'unclassifiedCommand':{'get':function(){var _0x246cc1=a582_0x1c3a;return this[_0x246cc1(0x13d)];}}}),InvertClassification['isTranslucencySupported']=function(_0x4dd7fc){var _0xdfe2fe=a582_0x1c3a;return _0x4dd7fc[_0xdfe2fe(0x114)]&&_0x4dd7fc['fragmentDepth'];};var rsUnclassified={'depthMask':![],'stencilTest':{'enabled':!![],'frontFunction':a582_0x4bbdb0[a582_0x19697f(0x133)],'frontOperation':{'fail':a582_0x16a842[a582_0x19697f(0x118)],'zFail':a582_0x16a842['KEEP'],'zPass':a582_0x16a842[a582_0x19697f(0x118)]},'backFunction':a582_0x4bbdb0[a582_0x19697f(0x139)],'reference':0x0,'mask':a582_0x54badc[a582_0x19697f(0x14f)]},'blending':a582_0x20f696['ALPHA_BLEND']},rsClassified={'depthMask':![],'stencilTest':{'enabled':!![],'frontFunction':a582_0x4bbdb0[a582_0x19697f(0x12b)],'frontOperation':{'fail':a582_0x16a842[a582_0x19697f(0x118)],'zFail':a582_0x16a842[a582_0x19697f(0x118)],'zPass':a582_0x16a842['KEEP']},'backFunction':a582_0x4bbdb0[a582_0x19697f(0x139)],'reference':0x0,'mask':a582_0x54badc['CLASSIFICATION_MASK']},'blending':a582_0x20f696[a582_0x19697f(0x11e)]},rsDefault={'depthMask':!![],'depthTest':{'enabled':!![]},'stencilTest':a582_0x54badc['setCesium3DTileBit'](),'stencilMask':a582_0x54badc[a582_0x19697f(0x123)],'blending':a582_0x20f696['ALPHA_BLEND']},translucentFS=a582_0x19697f(0x145)+a582_0x19697f(0x155)+a582_0x19697f(0x148)+a582_0x19697f(0x13b)+a582_0x19697f(0x122)+a582_0x19697f(0x15c)+'{\x0a'+'\x20\x20\x20\x20vec4\x20color\x20=\x20texture2D(colorTexture,\x20v_textureCoordinates);\x0a'+a582_0x19697f(0x129)+a582_0x19697f(0x12f)+'\x20\x20\x20\x20\x20\x20\x20\x20discard;\x0a'+a582_0x19697f(0x151)+'\x20\x20\x20\x20bool\x20isClassified\x20=\x20all(equal(texture2D(classifiedTexture,\x20v_textureCoordinates),\x20vec4(0.0)));\x0a'+a582_0x19697f(0x13f)+a582_0x19697f(0x14c)+'\x20\x20\x20\x20if\x20(isClassified)\x0a'+a582_0x19697f(0x12f)+'\x20\x20\x20\x20\x20\x20\x20\x20discard;\x0a'+a582_0x19697f(0x151)+a582_0x19697f(0x126)+a582_0x19697f(0x119)+a582_0x19697f(0x158)+a582_0x19697f(0x12f)+'\x20\x20\x20\x20\x20\x20\x20\x20discard;\x0a'+a582_0x19697f(0x151)+a582_0x19697f(0x150)+a582_0x19697f(0x143)+a582_0x19697f(0x154)+'}\x0a',opaqueFS=a582_0x19697f(0x155)+'varying\x20vec2\x20v_textureCoordinates;\x0a'+'void\x20main()\x0a'+'{\x0a'+a582_0x19697f(0x13e)+a582_0x19697f(0x129)+a582_0x19697f(0x12f)+'\x20\x20\x20\x20\x20\x20\x20\x20discard;\x0a'+a582_0x19697f(0x151)+a582_0x19697f(0x13f)+'\x20\x20\x20\x20gl_FragColor\x20=\x20color\x20*\x20czm_invertClassificationColor;\x0a'+a582_0x19697f(0x126)+a582_0x19697f(0x157)+a582_0x19697f(0x150)+'}\x0a';InvertClassification[a582_0x19697f(0x13c)]['update']=function(_0x13e7d7){var _0x31edf3=a582_0x19697f,_0x370317=this[_0x31edf3(0x11a)],_0x141e09=!a582_0xce7d98(_0x370317)||this[_0x31edf3(0x14a)]!==this[_0x31edf3(0x14b)];this[_0x31edf3(0x14b)]=this['previousFramebuffer'];var _0x1e2143=_0x13e7d7[_0x31edf3(0x124)],_0x2ff6a8=_0x13e7d7[_0x31edf3(0x14d)],_0x511b74=!a582_0xce7d98(_0x370317)||_0x370317['width']!==_0x1e2143||_0x370317[_0x31edf3(0x15b)]!==_0x2ff6a8;(_0x511b74||_0x141e09)&&(this[_0x31edf3(0x11a)]=this[_0x31edf3(0x11a)]&&this['_texture']['destroy'](),this[_0x31edf3(0x132)]=this[_0x31edf3(0x132)]&&this['_classifiedTexture'][_0x31edf3(0x131)](),this['_depthStencilTexture']=this[_0x31edf3(0x115)]&&this['_depthStencilTexture'][_0x31edf3(0x131)](),this[_0x31edf3(0x11a)]=new a582_0x589ccb({'context':_0x13e7d7,'width':_0x1e2143,'height':_0x2ff6a8,'pixelFormat':a582_0x2d2c22[_0x31edf3(0x159)],'pixelDatatype':a582_0x40c49a[_0x31edf3(0x13a)],'sampler':new a582_0x4f06b6({'wrapS':a582_0x16e195['CLAMP_TO_EDGE'],'wrapT':a582_0x16e195[_0x31edf3(0x116)],'minificationFilter':a582_0x425101[_0x31edf3(0x125)],'magnificationFilter':a582_0x5c8cae[_0x31edf3(0x125)]})}),!a582_0xce7d98(this[_0x31edf3(0x14b)])&&(this[_0x31edf3(0x132)]=new a582_0x589ccb({'context':_0x13e7d7,'width':_0x1e2143,'height':_0x2ff6a8,'pixelFormat':a582_0x2d2c22[_0x31edf3(0x159)],'pixelDatatype':a582_0x40c49a[_0x31edf3(0x13a)],'sampler':new a582_0x4f06b6({'wrapS':a582_0x16e195['CLAMP_TO_EDGE'],'wrapT':a582_0x16e195['CLAMP_TO_EDGE'],'minificationFilter':a582_0x425101[_0x31edf3(0x125)],'magnificationFilter':a582_0x5c8cae[_0x31edf3(0x125)]})}),this['_depthStencilTexture']=new a582_0x589ccb({'context':_0x13e7d7,'width':_0x1e2143,'height':_0x2ff6a8,'pixelFormat':a582_0x2d2c22[_0x31edf3(0x147)],'pixelDatatype':a582_0x40c49a[_0x31edf3(0x12e)]})));if(!a582_0xce7d98(this['_fbo'])||_0x511b74||_0x141e09){this[_0x31edf3(0x146)]=this[_0x31edf3(0x146)]&&this['_fbo'][_0x31edf3(0x131)](),this[_0x31edf3(0x11f)]=this[_0x31edf3(0x11f)]&&this[_0x31edf3(0x11f)]['destroy']();var _0x23e026,_0x51fae4;a582_0xce7d98(this['_previousFramebuffer'])?(_0x23e026=this[_0x31edf3(0x14b)][_0x31edf3(0x153)],_0x51fae4=this[_0x31edf3(0x14b)][_0x31edf3(0x135)]):_0x23e026=this[_0x31edf3(0x115)],this['_fbo']=new a582_0x53d2ce({'context':_0x13e7d7,'colorTextures':[this[_0x31edf3(0x11a)]],'depthStencilTexture':_0x23e026,'depthStencilRenderbuffer':_0x51fae4,'destroyAttachments':![]}),!a582_0xce7d98(this[_0x31edf3(0x14b)])&&(this['_fboClassified']=new a582_0x53d2ce({'context':_0x13e7d7,'colorTextures':[this['_classifiedTexture']],'depthStencilTexture':_0x23e026,'destroyAttachments':![]}));}!a582_0xce7d98(this[_0x31edf3(0x117)])&&(this[_0x31edf3(0x117)]=a582_0x527ffb['fromCache'](rsUnclassified),this['_rsClassified']=a582_0x527ffb[_0x31edf3(0x136)](rsClassified),this[_0x31edf3(0x130)]=a582_0x527ffb[_0x31edf3(0x136)](rsDefault));if(!a582_0xce7d98(this[_0x31edf3(0x13d)])||_0x141e09){a582_0xce7d98(this['_unclassifiedCommand'])&&(this[_0x31edf3(0x13d)][_0x31edf3(0x152)]=this['_unclassifiedCommand'][_0x31edf3(0x152)]&&this[_0x31edf3(0x13d)]['shaderProgram']['destroy'](),this[_0x31edf3(0x137)]['shaderProgram']=this['_classifiedCommand'][_0x31edf3(0x152)]&&this[_0x31edf3(0x137)][_0x31edf3(0x152)][_0x31edf3(0x131)]());var _0xb98e96=a582_0xce7d98(this[_0x31edf3(0x14b)])?opaqueFS:translucentFS,_0x55231e=new a582_0x113ee3({'defines':[_0x31edf3(0x141)],'sources':[_0xb98e96]}),_0xdaaf70=new a582_0x113ee3({'sources':[_0xb98e96]});this[_0x31edf3(0x13d)]=_0x13e7d7[_0x31edf3(0x138)](_0x55231e,{'renderState':a582_0xce7d98(this['_previousFramebuffer'])?this[_0x31edf3(0x117)]:this[_0x31edf3(0x130)],'uniformMap':this[_0x31edf3(0x121)],'owner':this}),this[_0x31edf3(0x137)]=_0x13e7d7[_0x31edf3(0x138)](_0xdaaf70,{'renderState':a582_0xce7d98(this['_previousFramebuffer'])?this[_0x31edf3(0x120)]:this[_0x31edf3(0x130)],'uniformMap':this[_0x31edf3(0x121)],'owner':this}),a582_0xce7d98(this['_translucentCommand'])&&(this[_0x31edf3(0x15d)][_0x31edf3(0x152)]=this[_0x31edf3(0x15d)][_0x31edf3(0x152)]&&this[_0x31edf3(0x15d)][_0x31edf3(0x152)][_0x31edf3(0x131)]()),!a582_0xce7d98(this[_0x31edf3(0x14b)])&&(this[_0x31edf3(0x15d)]=_0x13e7d7['createViewportQuadCommand'](a582_0x1968d4,{'renderState':this[_0x31edf3(0x117)],'uniformMap':this['_uniformMap'],'owner':this}));}},InvertClassification[a582_0x19697f(0x13c)]['clear']=function(_0x586563,_0x4d9f7a){var _0x414e08=a582_0x19697f,_0x2a8fc3=_0x4d9f7a['framebuffer'];a582_0xce7d98(this[_0x414e08(0x14b)])?(_0x4d9f7a[_0x414e08(0x11d)]=this[_0x414e08(0x146)],this['_clearColorCommand']['execute'](_0x586563,_0x4d9f7a)):(_0x4d9f7a['framebuffer']=this[_0x414e08(0x146)],this[_0x414e08(0x128)]['execute'](_0x586563,_0x4d9f7a),_0x4d9f7a['framebuffer']=this['_fboClassified'],this[_0x414e08(0x128)]['execute'](_0x586563,_0x4d9f7a)),_0x4d9f7a[_0x414e08(0x11d)]=_0x2a8fc3;},InvertClassification[a582_0x19697f(0x13c)]['executeClassified']=function(_0x3900ee,_0x204a1c){var _0x573e4a=a582_0x19697f;if(!a582_0xce7d98(this[_0x573e4a(0x14b)])){var _0x54b42e=_0x204a1c[_0x573e4a(0x11d)];_0x204a1c['framebuffer']=this[_0x573e4a(0x11f)],this[_0x573e4a(0x15d)][_0x573e4a(0x142)](_0x3900ee,_0x204a1c),_0x204a1c[_0x573e4a(0x11d)]=_0x54b42e;}this['_classifiedCommand'][_0x573e4a(0x142)](_0x3900ee,_0x204a1c);},InvertClassification[a582_0x19697f(0x13c)][a582_0x19697f(0x140)]=function(_0x4af126,_0x201dcc){var _0x345dd5=a582_0x19697f;this['_unclassifiedCommand'][_0x345dd5(0x142)](_0x4af126,_0x201dcc);},InvertClassification[a582_0x19697f(0x13c)][a582_0x19697f(0x11b)]=function(){return![];},InvertClassification[a582_0x19697f(0x13c)][a582_0x19697f(0x131)]=function(){var _0x416297=a582_0x19697f;return this[_0x416297(0x146)]=this[_0x416297(0x146)]&&this[_0x416297(0x146)][_0x416297(0x131)](),this['_texture']=this['_texture']&&this['_texture'][_0x416297(0x131)](),this['_depthStencilTexture']=this[_0x416297(0x115)]&&this[_0x416297(0x115)][_0x416297(0x131)](),a582_0xce7d98(this[_0x416297(0x13d)])&&(this[_0x416297(0x13d)][_0x416297(0x152)]=this[_0x416297(0x13d)][_0x416297(0x152)]&&this['_unclassifiedCommand'][_0x416297(0x152)][_0x416297(0x131)](),this[_0x416297(0x137)][_0x416297(0x152)]=this[_0x416297(0x137)][_0x416297(0x152)]&&this[_0x416297(0x137)][_0x416297(0x152)][_0x416297(0x131)]()),a582_0x4406f2(this);};function a582_0x1c4a(){var _0x4aedc4=['33684XwDOch','height','void\x20main()\x0a','_translucentCommand','_clearColorCommand','depthTexture','_depthStencilTexture','CLAMP_TO_EDGE','_rsUnclassified','KEEP','\x20\x20\x20\x20vec4\x20highlightColor\x20=\x20vec4(1.0);\x0a','_texture','isDestroyed','3236mLpqnz','framebuffer','ALPHA_BLEND','_fboClassified','_rsClassified','_uniformMap','varying\x20vec2\x20v_textureCoordinates;\x0a','CESIUM_3D_TILE_MASK','drawingBufferWidth','LINEAR','#else\x0a','2122cSviss','_clearCommand','\x20\x20\x20\x20if\x20(color.a\x20==\x200.0)\x0a','23472218hYaXuI','NOT_EQUAL','447FuNWqb','795iSeHfL','UNSIGNED_INT_24_8','\x20\x20\x20\x20{\x0a','_rsDefault','destroy','_classifiedTexture','EQUAL','1120109UmXYjq','depthStencilRenderbuffer','fromCache','_classifiedCommand','createViewportQuadCommand','NEVER','UNSIGNED_BYTE','uniform\x20sampler2D\x20classifiedTexture;\x0a','prototype','_unclassifiedCommand','\x20\x20\x20\x20vec4\x20color\x20=\x20texture2D(colorTexture,\x20v_textureCoordinates);\x0a','#ifdef\x20UNCLASSIFIED\x0a','executeUnclassified','UNCLASSIFIED','execute','\x20\x20\x20\x20gl_FragColor\x20=\x20color\x20*\x20highlightColor;\x0a','336dJXpUr','#extension\x20GL_EXT_frag_depth\x20:\x20enable\x0a','_fbo','DEPTH_STENCIL','uniform\x20sampler2D\x20depthTexture;\x0a','2329550mUNQId','previousFramebuffer','_previousFramebuffer','\x20\x20\x20\x20vec4\x20highlightColor\x20=\x20czm_invertClassificationColor;\x0a','drawingBufferHeight','3999396JCxYUC','CLASSIFICATION_MASK','#endif\x0a','\x20\x20\x20\x20}\x0a','shaderProgram','depthStencilTexture','\x20\x20\x20\x20gl_FragDepthEXT\x20=\x20texture2D(depthTexture,\x20v_textureCoordinates).r;\x0a','uniform\x20sampler2D\x20colorTexture;\x0a','27wEKlDm','\x20\x20\x20\x20gl_FragColor\x20=\x20color;\x0a','\x20\x20\x20\x20if\x20(!isClassified)\x0a','RGBA'];a582_0x1c4a=function(){return _0x4aedc4;};return a582_0x1c4a();}export default InvertClassification;