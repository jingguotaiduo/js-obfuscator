var a529_0xf14bfb=a529_0x1d40;(function(_0x2b8d6f,_0x42ecca){var _0x198e7d=a529_0x1d40,_0x28031a=_0x2b8d6f();while(!![]){try{var _0x3d1dad=parseInt(_0x198e7d(0x93))/0x1+-parseInt(_0x198e7d(0xb5))/0x2+parseInt(_0x198e7d(0xa7))/0x3*(parseInt(_0x198e7d(0xc6))/0x4)+parseInt(_0x198e7d(0x98))/0x5+-parseInt(_0x198e7d(0xbb))/0x6+-parseInt(_0x198e7d(0xba))/0x7+parseInt(_0x198e7d(0xa0))/0x8;if(_0x3d1dad===_0x42ecca)break;else _0x28031a['push'](_0x28031a['shift']());}catch(_0x4724d8){_0x28031a['push'](_0x28031a['shift']());}}}(a529_0x1bd8,0xf227c));import a529_0x941a0f from'../Core/Check.js';import a529_0x15118e from'../Core/defaultValue.js';import a529_0x2d2f67 from'../Core/defined.js';function a529_0x1bd8(){var _0x364f27=['glTF','1604925QUAALs','then','resolve','LOADING','_typedArray','options.gltfResource','options.resourceCache','isDestroyed','19543744VFWcoA','push','defer','_resourceCache','gltfJson','getDerivedResource','func','2199777MqPxYE','options.baseResource','create','asset','uri','_cacheKey','version','resourceCache','all','loadExternalBuffer','_baseResource','load','_gltf','extras','3459846pYAspz','url','_promise','source','length','2548392oCOBTG','7854090RptuEr','getError','cacheKey','otherwise','typedArray','typeOf','constructor','_bufferLoaders','2.0','unload','_gltfResource','4wTvRRA','fetchArrayBuffer','FAILED','buffer','_fetchGltf','prototype','UNLOADED','_gltfJson','READY','_state','defineProperties','promise','897650qAdGqy','object','gltfResource','_pipeline'];a529_0x1bd8=function(){return _0x364f27;};return a529_0x1bd8();}import a529_0x11ecc4 from'../Core/getJsonFromTypedArray.js';import a529_0xb087d8 from'../Core/getMagic.js';import a529_0x2a9709 from'../Core/isDataUri.js';import a529_0x42b854 from'../Core/Resource.js';import a529_0x1b5507 from'./GltfPipeline/addDefaults.js';import a529_0x4b3378 from'./GltfPipeline/addPipelineExtras.js';import a529_0x4692a0 from'./GltfPipeline/ForEach.js';import a529_0x32a646 from'./GltfPipeline/parseGlb.js';import a529_0x222450 from'./GltfPipeline/removePipelineExtras.js';import a529_0x35b1de from'./GltfPipeline/updateVersion.js';import a529_0x512363 from'../ThirdParty/when.js';import a529_0x1c4f13 from'./ResourceLoader.js';import a529_0x328666 from'./ResourceLoaderState.js';export default function GltfJsonLoader(_0xf6504){var _0x14958f=a529_0x1d40;_0xf6504=a529_0x15118e(_0xf6504,a529_0x15118e['EMPTY_OBJECT']);var _0x128ab7=_0xf6504[_0x14958f(0xae)],_0x42306d=_0xf6504[_0x14958f(0x95)],_0x3f8be5=_0xf6504['baseResource'],_0x443f1d=_0xf6504['typedArray'],_0x584adf=_0xf6504[_0x14958f(0xa4)],_0x2c232e=_0xf6504[_0x14958f(0xbd)];a529_0x941a0f[_0x14958f(0xc0)][_0x14958f(0xa6)](_0x14958f(0x9e),_0x128ab7),a529_0x941a0f[_0x14958f(0xc0)][_0x14958f(0x94)](_0x14958f(0x9d),_0x42306d),a529_0x941a0f[_0x14958f(0xc0)]['object'](_0x14958f(0xa8),_0x3f8be5),this[_0x14958f(0xa3)]=_0x128ab7,this['_gltfResource']=_0x42306d,this[_0x14958f(0xb1)]=_0x3f8be5,this[_0x14958f(0x9c)]=_0x443f1d,this[_0x14958f(0xcd)]=_0x584adf,this[_0x14958f(0xac)]=_0x2c232e,this[_0x14958f(0xb3)]=undefined,this[_0x14958f(0xc2)]=[],this[_0x14958f(0x90)]=a529_0x328666[_0x14958f(0xcc)],this[_0x14958f(0xb7)]=a529_0x512363[_0x14958f(0xa2)]();}a529_0x2d2f67(Object[a529_0xf14bfb(0xa9)])&&(GltfJsonLoader[a529_0xf14bfb(0xcb)]=Object[a529_0xf14bfb(0xa9)](a529_0x1c4f13[a529_0xf14bfb(0xcb)]),GltfJsonLoader[a529_0xf14bfb(0xcb)][a529_0xf14bfb(0xc1)]=GltfJsonLoader);Object[a529_0xf14bfb(0x91)](GltfJsonLoader['prototype'],{'promise':{'get':function(){var _0x2d8151=a529_0xf14bfb;return this[_0x2d8151(0xb7)][_0x2d8151(0x92)];}},'cacheKey':{'get':function(){var _0x7bb8da=a529_0xf14bfb;return this[_0x7bb8da(0xac)];}},'gltf':{'get':function(){var _0x439de8=a529_0xf14bfb;return this[_0x439de8(0xb3)];}}}),GltfJsonLoader[a529_0xf14bfb(0xcb)][a529_0xf14bfb(0xb2)]=function(){var _0x53efb9=a529_0xf14bfb;this[_0x53efb9(0x90)]=a529_0x328666[_0x53efb9(0x9b)];var _0x32433b;if(a529_0x2d2f67(this[_0x53efb9(0xcd)]))_0x32433b=processGltfJson(this,this['_gltfJson']);else a529_0x2d2f67(this[_0x53efb9(0x9c)])?_0x32433b=processGltfTypedArray(this,this[_0x53efb9(0x9c)]):_0x32433b=loadFromUri(this);var _0x3c58d3=this;return _0x32433b[_0x53efb9(0x99)](function(_0x3d58ca){var _0x497cf8=_0x53efb9;if(_0x3c58d3[_0x497cf8(0x9f)]())return;_0x3c58d3[_0x497cf8(0xb3)]=_0x3d58ca,_0x3c58d3[_0x497cf8(0x90)]=a529_0x328666[_0x497cf8(0x8f)],_0x3c58d3[_0x497cf8(0xb7)][_0x497cf8(0x9a)](_0x3c58d3);})[_0x53efb9(0xbe)](function(_0x3b3769){if(_0x3c58d3['isDestroyed']())return;handleError(_0x3c58d3,_0x3b3769);});};function a529_0x1d40(_0xcc726a,_0x52d474){var _0x1bd8e0=a529_0x1bd8();return a529_0x1d40=function(_0x1d40de,_0x1cacfc){_0x1d40de=_0x1d40de-0x8f;var _0x4ad7d5=_0x1bd8e0[_0x1d40de];return _0x4ad7d5;},a529_0x1d40(_0xcc726a,_0x52d474);}function loadFromUri(_0xeb8881){var _0x4c1420=a529_0xf14bfb;return _0xeb8881[_0x4c1420(0xca)]()[_0x4c1420(0x99)](function(_0x3c841c){var _0x26392e=_0x4c1420;if(_0xeb8881[_0x26392e(0x9f)]())return;var _0x437259=new Uint8Array(_0x3c841c);return processGltfTypedArray(_0xeb8881,_0x437259);});}function handleError(_0x40e063,_0x23407a){var _0x6a360b=a529_0xf14bfb;_0x40e063[_0x6a360b(0xc4)](),_0x40e063[_0x6a360b(0x90)]=a529_0x328666[_0x6a360b(0xc8)];var _0x15af44='Failed\x20to\x20load\x20glTF:\x20'+_0x40e063['_gltfResource'][_0x6a360b(0xb6)];_0x40e063['_promise']['reject'](_0x40e063[_0x6a360b(0xbc)](_0x15af44,_0x23407a));}function upgradeVersion(_0x28ed56,_0x3d26a3){var _0x33c6c2=a529_0xf14bfb;if(_0x3d26a3[_0x33c6c2(0xaa)][_0x33c6c2(0xad)]===_0x33c6c2(0xc3))return a529_0x512363[_0x33c6c2(0x9a)]();var _0x534e9b=[];return a529_0x4692a0['buffer'](_0x3d26a3,function(_0x4d4541){var _0x4a1982=_0x33c6c2;if(!a529_0x2d2f67(_0x4d4541[_0x4a1982(0xb4)]['_pipeline']['source'])&&a529_0x2d2f67(_0x4d4541[_0x4a1982(0xab)])){var _0x4c241a=_0x28ed56[_0x4a1982(0xb1)][_0x4a1982(0xa5)]({'url':_0x4d4541[_0x4a1982(0xab)]}),_0x18f2d8=_0x28ed56[_0x4a1982(0xa3)],_0x4271fb=_0x18f2d8[_0x4a1982(0xb0)]({'resource':_0x4c241a});_0x28ed56[_0x4a1982(0xc2)][_0x4a1982(0xa1)](_0x4271fb),_0x534e9b[_0x4a1982(0xa1)](_0x4271fb[_0x4a1982(0x92)]['then'](function(_0x19fc5f){var _0x418eaf=_0x4a1982;_0x4d4541[_0x418eaf(0xb4)][_0x418eaf(0x96)][_0x418eaf(0xb8)]=_0x19fc5f[_0x418eaf(0xbf)];}));}}),a529_0x512363[_0x33c6c2(0xaf)](_0x534e9b)[_0x33c6c2(0x99)](function(){a529_0x35b1de(_0x3d26a3);});}function decodeDataUris(_0xa73017){var _0x546917=a529_0xf14bfb,_0x41701e=[];return a529_0x4692a0[_0x546917(0xc9)](_0xa73017,function(_0x35f342){var _0x1588ed=_0x546917,_0x899313=_0x35f342[_0x1588ed(0xab)];!a529_0x2d2f67(_0x35f342[_0x1588ed(0xb4)][_0x1588ed(0x96)]['source'])&&a529_0x2d2f67(_0x899313)&&a529_0x2a9709(_0x899313)&&(delete _0x35f342[_0x1588ed(0xab)],_0x41701e[_0x1588ed(0xa1)](a529_0x42b854[_0x1588ed(0xc7)](_0x899313)[_0x1588ed(0x99)](function(_0x50c96a){var _0x55b6d0=_0x1588ed;_0x35f342[_0x55b6d0(0xb4)][_0x55b6d0(0x96)][_0x55b6d0(0xb8)]=new Uint8Array(_0x50c96a);})));}),a529_0x512363[_0x546917(0xaf)](_0x41701e);}function loadEmbeddedBuffers(_0x4e5978,_0x4afbc8){var _0x4a3044=a529_0xf14bfb,_0x490e2e=[];return a529_0x4692a0['buffer'](_0x4afbc8,function(_0x6c0778,_0x55401b){var _0x5ec825=a529_0x1d40,_0x3f0abf=_0x6c0778[_0x5ec825(0xb4)][_0x5ec825(0x96)]['source'];if(a529_0x2d2f67(_0x3f0abf)&&!a529_0x2d2f67(_0x6c0778[_0x5ec825(0xab)])){var _0x3efb1f=_0x4e5978[_0x5ec825(0xa3)],_0x1371ef=_0x3efb1f['loadEmbeddedBuffer']({'parentResource':_0x4e5978[_0x5ec825(0xc5)],'bufferId':_0x55401b,'typedArray':_0x3f0abf});_0x4e5978[_0x5ec825(0xc2)][_0x5ec825(0xa1)](_0x1371ef),_0x490e2e[_0x5ec825(0xa1)](_0x1371ef[_0x5ec825(0x92)]);}}),a529_0x512363[_0x4a3044(0xaf)](_0x490e2e);}function processGltfJson(_0x17c0ef,_0x300045){var _0x285feb=a529_0xf14bfb;return a529_0x4b3378(_0x300045),decodeDataUris(_0x300045)[_0x285feb(0x99)](function(){return upgradeVersion(_0x17c0ef,_0x300045)['then'](function(){var _0x17e525=a529_0x1d40;return a529_0x1b5507(_0x300045),loadEmbeddedBuffers(_0x17c0ef,_0x300045)[_0x17e525(0x99)](function(){return a529_0x222450(_0x300045),_0x300045;});});});}function processGltfTypedArray(_0x402cc7,_0x470b93){var _0x4287b3=a529_0xf14bfb,_0x4ed64c;return a529_0xb087d8(_0x470b93)===_0x4287b3(0x97)?_0x4ed64c=a529_0x32a646(_0x470b93):_0x4ed64c=a529_0x11ecc4(_0x470b93),processGltfJson(_0x402cc7,_0x4ed64c);}GltfJsonLoader[a529_0xf14bfb(0xcb)][a529_0xf14bfb(0xc4)]=function(){var _0x2c24dd=a529_0xf14bfb,_0x685150=this['_bufferLoaders'],_0x46fc86=_0x685150[_0x2c24dd(0xb9)];for(var _0x1aea25=0x0;_0x1aea25<_0x46fc86;++_0x1aea25){this['_resourceCache'][_0x2c24dd(0xc4)](_0x685150[_0x1aea25]);}this[_0x2c24dd(0xc2)]['length']=0x0,this[_0x2c24dd(0xb3)]=undefined;},GltfJsonLoader[a529_0xf14bfb(0xcb)][a529_0xf14bfb(0xca)]=function(){var _0x5ca903=a529_0xf14bfb;return this[_0x5ca903(0xc5)]['fetchArrayBuffer']();};