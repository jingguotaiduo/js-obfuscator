var a517_0x116c67=a517_0x3304;(function(_0x33999b,_0x4c78c1){var _0x1f9a30=a517_0x3304,_0x54c61e=_0x33999b();while(!![]){try{var _0x346f7e=-parseInt(_0x1f9a30(0x185))/0x1+parseInt(_0x1f9a30(0x1ac))/0x2*(-parseInt(_0x1f9a30(0x17a))/0x3)+-parseInt(_0x1f9a30(0x19f))/0x4+-parseInt(_0x1f9a30(0x1a4))/0x5+parseInt(_0x1f9a30(0x16f))/0x6*(-parseInt(_0x1f9a30(0x18e))/0x7)+parseInt(_0x1f9a30(0x1cd))/0x8*(-parseInt(_0x1f9a30(0x1c4))/0x9)+parseInt(_0x1f9a30(0x19b))/0xa;if(_0x346f7e===_0x4c78c1)break;else _0x54c61e['push'](_0x54c61e['shift']());}catch(_0x12262a){_0x54c61e['push'](_0x54c61e['shift']());}}}(a517_0x58c4,0xda419));import a517_0x9b04fb from'../Core/defined.js';import a517_0x41ffdb from'../Core/destroyObject.js';function a517_0x58c4(){var _0x15593e=['defines','ENABLE_DAYNIGHT_SHADING','u_dayTextureBrightness[','surfaceShader','flags','790997HsfvnO','useWebMercatorProjection','u_dayTextureAlpha[','DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN',']\x20?\x20textureCoordinates.xz\x20:\x20textureCoordinates.xy,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20u_dayTextureTexCoordsRectangle[','material','MORPHING','hasOwnProperty','sources','8470YfxVsS','prototype','applySplit','PER_FRAGMENT_GROUND_ATMOSPHERE','],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','applyDayNightAlpha','BITS12','u_dayTextureDayAlpha[','length','];\x0a\x20\x20\x20\x20\x20\x20\x20\x20texelUnclipped\x20=\x20v_textureCoordinates.x\x20<\x20cutoutAndColorResult.x\x20||\x20cutoutAndColorResult.z\x20<\x20v_textureCoordinates.x\x20||\x20v_textureCoordinates.y\x20<\x20cutoutAndColorResult.y\x20||\x20cutoutAndColorResult.w\x20<\x20v_textureCoordinates.y;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cutoutAndColorResult\x20=\x20sampleAndBlend(\x0a','APPLY_ALPHA','baseFragmentShaderSource','vec4\x20getPosition(vec3\x20position,\x20float\x20height,\x20vec2\x20textureCoordinates)\x20{\x20return\x20getPositionColumbusViewMode(position,\x20height,\x20textureCoordinates);\x20}','78267540lyGstg','EXAGGERATION','u_dayTextureNightAlpha[','showUndergroundColor','1803752IirDjq','\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20cutoutAndColorResult;\x0a\x20\x20\x20\x20\x20\x20\x20\x20bool\x20texelUnclipped;\x0a','HIGHLIGHT_FILL_TILE','applyHue','vec4\x20getPosition(vec3\x20position,\x20float\x20height,\x20vec2\x20textureCoordinates)\x20{\x20return\x20getPosition3DMode(position,\x20height,\x20textureCoordinates);\x20}','7650470XBgBBZ','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20u_dayTextures[','u_dayTextureContrast[','1.0','\x20\x20\x20\x20\x20\x20\x20\x20return\x20color;\x0a\x20\x20\x20\x20}','encoding','SCENE3D','APPLY_BRIGHTNESS','35930KRTlVP','baseVertexShaderSource','APPLY_GAMMA','hasImageryLayerCutout','applyGamma','APPLY_CONTRAST','u_dayTextureOneOverGamma[','applySaturation','shaderProgram','u_dayTextureSplit[','colorToAlpha','frameState','COLUMBUS_VIEW','enableFog','APPLY_IMAGERY_CUTOUT','mode','UNDERGROUND_COLOR','clone','surfaceTile','enableLighting',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','applyAlpha','renderedMesh','FOG','9sLzlOE','vec4(0.0)','TILE_LIMIT_RECTANGLE','highlightFillTile','APPLY_HUE','APPLY_SATURATION','APPLY_SPLIT','hasExaggeration','TRANSLUCENT','12048824FcmWsc','applyBrightness','ENABLE_CLIPPING_PLANES','float\x20get2DYPositionFraction(vec2\x20textureCoordinates)\x20{\x20return\x20get2DGeographicYPositionFraction(textureCoordinates);\x20}','SHOW_REFLECTIVE_OCEAN','clippedByBoundaries','hasGeodeticSurfaceNormals','float\x20get2DYPositionFraction(vec2\x20textureCoordinates)\x20{\x20return\x20get2DMercatorYPositionFraction(textureCoordinates);\x20}','0.0','push','dynamicAtmosphereLightingFromSun','translucent','u_colorsToAlpha[','GROUND_ATMOSPHERE','ENABLE_VERTEX_LIGHTING','applyContrast','],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20u_dayTextureUseWebMercatorT[','6126QjwFMK','clippingPlanes','INCLUDE_WEB_MERCATOR_Y','clippingShaderState','showOceanWaves','fromCache','_shadersByTexturesFlags','\x20\x20\x20\x20\x20\x20\x20\x20color\x20=\x20czm_branchFreeTernary(texelUnclipped,\x20cutoutAndColorResult,\x20color);\x0a','TEXTURE_UNITS\x20','numberOfDayTextures','],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20u_dayTextureTranslationAndScale[','237dtVaiD','showGroundAtmosphere','colorCorrect','hasVertexNormals','destroy','context'];a517_0x58c4=function(){return _0x15593e;};return a517_0x58c4();}import a517_0x590301 from'../Core/TerrainQuantization.js';import a517_0xb443f5 from'../Renderer/ShaderProgram.js';import a517_0x393486 from'./getClippingFunction.js';function a517_0x3304(_0x41af8a,_0x462b28){var _0x58c49a=a517_0x58c4();return a517_0x3304=function(_0x3304f7,_0x4625f9){_0x3304f7=_0x3304f7-0x164;var _0x5c10dd=_0x58c49a[_0x3304f7];return _0x5c10dd;},a517_0x3304(_0x41af8a,_0x462b28);}import a517_0x459f93 from'./SceneMode.js';function GlobeSurfaceShader(_0x1ccbcc,_0x1fd1a8,_0x211445,_0x3d64b9,_0x5cc276){var _0x1dc56c=a517_0x3304;this['numberOfDayTextures']=_0x1ccbcc,this[_0x1dc56c(0x184)]=_0x1fd1a8,this[_0x1dc56c(0x18a)]=_0x211445,this[_0x1dc56c(0x1b4)]=_0x3d64b9,this[_0x1dc56c(0x172)]=_0x5cc276;}function GlobeSurfaceShaderSet(){var _0x2438ec=a517_0x3304;this[_0x2438ec(0x1ad)]=undefined,this['baseFragmentShaderSource']=undefined,this[_0x2438ec(0x175)]=[],this['material']=undefined;}function getPositionMode(_0x33ae80){var _0x15d760=a517_0x3304,_0x1662ef=_0x15d760(0x1a3),_0x6bf58f=_0x15d760(0x19a),_0x31df88='vec4\x20getPosition(vec3\x20position,\x20float\x20height,\x20vec2\x20textureCoordinates)\x20{\x20return\x20getPositionMorphingMode(position,\x20height,\x20textureCoordinates);\x20}',_0x1c10e5;switch(_0x33ae80){case a517_0x459f93[_0x15d760(0x1aa)]:_0x1c10e5=_0x1662ef;break;case a517_0x459f93['SCENE2D']:case a517_0x459f93[_0x15d760(0x1b8)]:_0x1c10e5=_0x6bf58f;break;case a517_0x459f93[_0x15d760(0x18b)]:_0x1c10e5=_0x31df88;break;}return _0x1c10e5;}function get2DYPositionFraction(_0xa1b4ff){var _0x1763c4=a517_0x3304,_0x5c4224=_0x1763c4(0x1d0),_0x20aaed=_0x1763c4(0x165);return _0xa1b4ff?_0x20aaed:_0x5c4224;}GlobeSurfaceShaderSet[a517_0x116c67(0x18f)]['getShaderProgram']=function(_0x1ed2a4){var _0x3caadf=a517_0x116c67,_0x37e402=_0x1ed2a4[_0x3caadf(0x1b7)],_0x4fb8ce=_0x1ed2a4[_0x3caadf(0x1be)],_0x5e9b22=_0x1ed2a4['numberOfDayTextures'],_0xbfecbb=_0x1ed2a4[_0x3caadf(0x1ce)],_0x27ca4d=_0x1ed2a4[_0x3caadf(0x16d)],_0x289e4d=_0x1ed2a4[_0x3caadf(0x1a2)],_0x5a9aab=_0x1ed2a4[_0x3caadf(0x1b3)],_0x358853=_0x1ed2a4[_0x3caadf(0x1b0)],_0x58f312=_0x1ed2a4[_0x3caadf(0x1c1)],_0x188248=_0x1ed2a4[_0x3caadf(0x193)],_0x13c131=_0x1ed2a4[_0x3caadf(0x190)],_0x5edd44=_0x1ed2a4['showReflectiveOcean'],_0x2c23af=_0x1ed2a4[_0x3caadf(0x173)],_0x5ad5d1=_0x1ed2a4[_0x3caadf(0x1bf)],_0x2df6b4=_0x1ed2a4['dynamicAtmosphereLighting'],_0x4eaaf3=_0x1ed2a4[_0x3caadf(0x168)],_0x4b3a4a=_0x1ed2a4[_0x3caadf(0x17b)],_0x19f086=_0x1ed2a4['perFragmentGroundAtmosphere'],_0x5d6c4b=_0x1ed2a4[_0x3caadf(0x17d)],_0x380565=_0x1ed2a4[_0x3caadf(0x186)],_0x1ae132=_0x1ed2a4[_0x3caadf(0x1b9)],_0x2342ba=_0x1ed2a4['enableClippingPlanes'],_0x8d2137=_0x1ed2a4[_0x3caadf(0x170)],_0x5e5989=_0x1ed2a4[_0x3caadf(0x1d2)],_0x4864e5=_0x1ed2a4[_0x3caadf(0x1af)],_0x23b818=_0x1ed2a4[_0x3caadf(0x17c)],_0xcda8ee=_0x1ed2a4[_0x3caadf(0x1c7)],_0x234f97=_0x1ed2a4[_0x3caadf(0x1b6)],_0x27cb5b=_0x1ed2a4[_0x3caadf(0x164)],_0x10039d=_0x1ed2a4[_0x3caadf(0x1cb)],_0x21c232=_0x1ed2a4[_0x3caadf(0x19e)],_0x22411f=_0x1ed2a4[_0x3caadf(0x169)],_0xe41d9d=0x0,_0x2b8d2d='',_0x59ac8d=_0x4fb8ce[_0x3caadf(0x1c2)],_0x1c2b25=_0x59ac8d[_0x3caadf(0x1a9)],_0x4c1746=_0x1c2b25['quantization'];_0x4c1746===a517_0x590301[_0x3caadf(0x194)]&&(_0xe41d9d=0x1,_0x2b8d2d='QUANTIZATION_BITS12');var _0x3a6eb2=0x0,_0x2dbccb='';_0x5e5989&&(_0x3a6eb2=0x1,_0x2dbccb=_0x3caadf(0x1c6));var _0x1e3a6f=0x0,_0x4f84af='';_0x4864e5&&(_0x1e3a6f=0x1,_0x4f84af=_0x3caadf(0x1ba));var _0x2058b=_0x37e402[_0x3caadf(0x1bb)],_0xa810cb=_0x2058b|_0xbfecbb<<0x2|_0x27ca4d<<0x3|_0x289e4d<<0x4|_0x5a9aab<<0x5|_0x358853<<0x6|_0x58f312<<0x7|_0x5edd44<<0x8|_0x2c23af<<0x9|_0x5ad5d1<<0xa|_0x2df6b4<<0xb|_0x4eaaf3<<0xc|_0x4b3a4a<<0xd|_0x19f086<<0xe|_0x5d6c4b<<0xf|_0x380565<<0x10|_0x1ae132<<0x11|_0xe41d9d<<0x12|_0x13c131<<0x13|_0x2342ba<<0x14|_0x3a6eb2<<0x15|_0x1e3a6f<<0x16|_0x23b818<<0x17|_0xcda8ee<<0x18|_0x234f97<<0x19|_0x27cb5b<<0x1a|_0x10039d<<0x1b|_0x21c232<<0x1c|_0x22411f<<0x1d|_0x188248<<0x1e,_0xdcf968=0x0;a517_0x9b04fb(_0x8d2137)&&_0x8d2137[_0x3caadf(0x196)]>0x0&&(_0xdcf968=_0x2342ba?_0x8d2137['clippingPlanesState']:0x0);var _0x3baf25=_0x4fb8ce['surfaceShader'];if(a517_0x9b04fb(_0x3baf25)&&_0x3baf25[_0x3caadf(0x178)]===_0x5e9b22&&_0x3baf25[_0x3caadf(0x184)]===_0xa810cb&&_0x3baf25[_0x3caadf(0x18a)]===this[_0x3caadf(0x18a)]&&_0x3baf25[_0x3caadf(0x172)]===_0xdcf968)return _0x3baf25[_0x3caadf(0x1b4)];var _0x5dee27=this[_0x3caadf(0x175)][_0x5e9b22];!a517_0x9b04fb(_0x5dee27)&&(_0x5dee27=this['_shadersByTexturesFlags'][_0x5e9b22]=[]);_0x3baf25=_0x5dee27[_0xa810cb];if(!a517_0x9b04fb(_0x3baf25)||_0x3baf25['material']!==this[_0x3caadf(0x18a)]||_0x3baf25[_0x3caadf(0x172)]!==_0xdcf968){var _0x18dde6=this[_0x3caadf(0x1ad)][_0x3caadf(0x1bd)](),_0x148bdd=this[_0x3caadf(0x199)][_0x3caadf(0x1bd)]();_0xdcf968!==0x0&&_0x148bdd[_0x3caadf(0x18d)]['unshift'](a517_0x393486(_0x8d2137,_0x37e402[_0x3caadf(0x17f)]));_0x18dde6[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x2b8d2d),_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x177)+_0x5e9b22,_0x2dbccb,_0x4f84af);_0xbfecbb&&_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x1ab));_0x27ca4d&&_0x148bdd[_0x3caadf(0x180)]['push'](_0x3caadf(0x1b1));_0x289e4d&&_0x148bdd['defines'][_0x3caadf(0x167)](_0x3caadf(0x1c8));_0x5a9aab&&_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x1c9));_0x358853&&_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x1ae));_0x58f312&&_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x198));_0x188248&&_0x148bdd[_0x3caadf(0x180)]['push']('APPLY_DAY_NIGHT_ALPHA');_0x5edd44&&(_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x1d1)),_0x18dde6['defines'][_0x3caadf(0x167)](_0x3caadf(0x1d1)));_0x2c23af&&_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)]('SHOW_OCEAN_WAVES');_0x234f97&&_0x148bdd[_0x3caadf(0x180)]['push']('APPLY_COLOR_TO_ALPHA');_0x21c232&&(_0x18dde6[_0x3caadf(0x180)][_0x3caadf(0x167)]('UNDERGROUND_COLOR'),_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x1bc)));_0x22411f&&(_0x18dde6[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x1cc)),_0x148bdd[_0x3caadf(0x180)]['push'](_0x3caadf(0x1cc)));_0x5ad5d1&&(_0x5d6c4b?(_0x18dde6[_0x3caadf(0x180)][_0x3caadf(0x167)]('ENABLE_VERTEX_LIGHTING'),_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x16c))):(_0x18dde6[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x181)),_0x148bdd[_0x3caadf(0x180)]['push']('ENABLE_DAYNIGHT_SHADING')));_0x2df6b4&&(_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)]('DYNAMIC_ATMOSPHERE_LIGHTING'),_0x4eaaf3&&_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x188)));_0x4b3a4a&&(_0x18dde6[_0x3caadf(0x180)]['push']('GROUND_ATMOSPHERE'),_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x16b)),_0x19f086&&_0x148bdd['defines'][_0x3caadf(0x167)](_0x3caadf(0x191)));_0x18dde6[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x171)),_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x171));_0x1ae132&&(_0x18dde6[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x1c3)),_0x148bdd[_0x3caadf(0x180)]['push'](_0x3caadf(0x1c3)));_0x13c131&&_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x1ca));_0x2342ba&&_0x148bdd[_0x3caadf(0x180)]['push'](_0x3caadf(0x1cf));_0x23b818&&_0x148bdd[_0x3caadf(0x180)][_0x3caadf(0x167)]('COLOR_CORRECT');_0xcda8ee&&_0x148bdd[_0x3caadf(0x180)]['push'](_0x3caadf(0x1a1));_0x27cb5b&&_0x18dde6['defines'][_0x3caadf(0x167)]('GEODETIC_SURFACE_NORMALS');_0x10039d&&_0x18dde6[_0x3caadf(0x180)][_0x3caadf(0x167)](_0x3caadf(0x19c));var _0x31d7f5='\x20\x20\x20\x20vec4\x20computeDayColor(vec4\x20initialColor,\x20vec3\x20textureCoordinates,\x20float\x20nightBlend)\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20initialColor;\x0a';_0x4864e5&&(_0x31d7f5+=_0x3caadf(0x1a0));for(var _0x3f8f70=0x0;_0x3f8f70<_0x5e9b22;++_0x3f8f70){_0x4864e5?_0x31d7f5+='\x20\x20\x20\x20\x20\x20\x20\x20cutoutAndColorResult\x20=\x20u_dayTextureCutoutRectangles['+_0x3f8f70+_0x3caadf(0x197):_0x31d7f5+='\x20\x20\x20\x20\x20\x20\x20\x20color\x20=\x20sampleAndBlend(\x0a',_0x31d7f5+=_0x3caadf(0x1a5)+_0x3f8f70+_0x3caadf(0x16e)+_0x3f8f70+_0x3caadf(0x189)+_0x3f8f70+_0x3caadf(0x179)+_0x3f8f70+_0x3caadf(0x192)+(_0x58f312?_0x3caadf(0x187)+_0x3f8f70+']':_0x3caadf(0x1a7))+_0x3caadf(0x1c0)+(_0x188248?_0x3caadf(0x19d)+_0x3f8f70+']':_0x3caadf(0x1a7))+',\x0a'+(_0x188248?_0x3caadf(0x195)+_0x3f8f70+']':_0x3caadf(0x1a7))+',\x0a'+(_0xbfecbb?_0x3caadf(0x182)+_0x3f8f70+']':_0x3caadf(0x166))+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x27ca4d?_0x3caadf(0x1a6)+_0x3f8f70+']':'0.0')+_0x3caadf(0x1c0)+(_0x289e4d?'u_dayTextureHue['+_0x3f8f70+']':_0x3caadf(0x166))+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5a9aab?'u_dayTextureSaturation['+_0x3f8f70+']':_0x3caadf(0x166))+_0x3caadf(0x1c0)+(_0x358853?_0x3caadf(0x1b2)+_0x3f8f70+']':_0x3caadf(0x166))+_0x3caadf(0x1c0)+(_0x13c131?_0x3caadf(0x1b5)+_0x3f8f70+']':_0x3caadf(0x166))+_0x3caadf(0x1c0)+(_0x234f97?_0x3caadf(0x16a)+_0x3f8f70+']':_0x3caadf(0x1c5))+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20nightBlend\x20\x20\x20\x20\x20\x20\x20\x20);\x0a',_0x4864e5&&(_0x31d7f5+=_0x3caadf(0x176));}_0x31d7f5+=_0x3caadf(0x1a8),_0x148bdd['sources']['push'](_0x31d7f5),_0x18dde6[_0x3caadf(0x18d)][_0x3caadf(0x167)](getPositionMode(_0x2058b)),_0x18dde6[_0x3caadf(0x18d)][_0x3caadf(0x167)](get2DYPositionFraction(_0x380565));var _0x58dafc=a517_0xb443f5[_0x3caadf(0x174)]({'context':_0x37e402[_0x3caadf(0x17f)],'vertexShaderSource':_0x18dde6,'fragmentShaderSource':_0x148bdd,'attributeLocations':_0x1c2b25['getAttributeLocations']()});_0x3baf25=_0x5dee27[_0xa810cb]=new GlobeSurfaceShader(_0x5e9b22,_0xa810cb,this[_0x3caadf(0x18a)],_0x58dafc,_0xdcf968);}return _0x4fb8ce[_0x3caadf(0x183)]=_0x3baf25,_0x3baf25[_0x3caadf(0x1b4)];},GlobeSurfaceShaderSet[a517_0x116c67(0x18f)][a517_0x116c67(0x17e)]=function(){var _0x1e15ec=a517_0x116c67,_0x262be9,_0x148ecc,_0x49b03f=this['_shadersByTexturesFlags'];for(var _0x3c3704 in _0x49b03f){if(_0x49b03f[_0x1e15ec(0x18c)](_0x3c3704)){var _0x536528=_0x49b03f[_0x3c3704];if(!a517_0x9b04fb(_0x536528))continue;for(_0x262be9 in _0x536528){_0x536528['hasOwnProperty'](_0x262be9)&&(_0x148ecc=_0x536528[_0x262be9],a517_0x9b04fb(_0x148ecc)&&_0x148ecc['shaderProgram'][_0x1e15ec(0x17e)]());}}}return a517_0x41ffdb(this);};export default GlobeSurfaceShaderSet;