var a114_0x4bae56=a114_0x1994;(function(_0x5c0581,_0x284821){var _0x414d30=a114_0x1994,_0x1f5569=_0x5c0581();while(!![]){try{var _0x31b910=-parseInt(_0x414d30(0x1bb))/0x1*(-parseInt(_0x414d30(0x1c0))/0x2)+parseInt(_0x414d30(0x18c))/0x3+parseInt(_0x414d30(0x180))/0x4*(parseInt(_0x414d30(0x1bf))/0x5)+-parseInt(_0x414d30(0x185))/0x6*(parseInt(_0x414d30(0x19f))/0x7)+parseInt(_0x414d30(0x1a7))/0x8*(-parseInt(_0x414d30(0x192))/0x9)+parseInt(_0x414d30(0x18d))/0xa+-parseInt(_0x414d30(0x1a0))/0xb*(parseInt(_0x414d30(0x181))/0xc);if(_0x31b910===_0x284821)break;else _0x1f5569['push'](_0x1f5569['shift']());}catch(_0x5619a7){_0x1f5569['push'](_0x1f5569['shift']());}}}(a114_0x1abf,0xf2120));import a114_0x49bf92 from'../ThirdParty/when.js';import a114_0x23c24f from'./Credit.js';import a114_0x3fed43 from'./defaultValue.js';import a114_0x5149ee from'./defined.js';import a114_0x23c436 from'./DeveloperError.js';import a114_0x5981da from'./Event.js';import a114_0x3100b5 from'./GeographicTilingScheme.js';import a114_0x66ea08 from'./GoogleEarthEnterpriseMetadata.js';import a114_0xc78794 from'./GoogleEarthEnterpriseTerrainData.js';import a114_0x567593 from'./HeightmapTerrainData.js';import a114_0xb136b2 from'./JulianDate.js';import a114_0xc18c42 from'./Math.js';import a114_0x32af0b from'./Rectangle.js';import a114_0x551b1d from'./Request.js';import a114_0x536854 from'./RequestState.js';import a114_0x397f39 from'./RequestType.js';function a114_0x1994(_0x50ad15,_0x51c381){var _0x1abf66=a114_0x1abf();return a114_0x1994=function(_0x19942b,_0x1df6b5){_0x19942b=_0x19942b-0x16e;var _0x1bd3bc=_0x1abf66[_0x19942b];return _0x1bd3bc;},a114_0x1994(_0x50ad15,_0x51c381);}import a114_0x346ca5 from'./Resource.js';import a114_0x32e156 from'./RuntimeError.js';import a114_0x705081 from'./TaskProcessor.js';import a114_0x14e512 from'./TileProviderError.js';function a114_0x1abf(){var _0x1ff53e=['64kaLkgJ','364296tNGTIv','decodeGoogleEarthEnterprisePacket','populateSubtree','\x20doesn\x27t\x20have\x20terrain','67176KJbdXL','Failed\x20to\x20load\x20terrain.','secondsDifference','buffer','getTileInformation','proxy','SELF','1813014XBhmIB','14578690cHnFcg','getChildBitmask','PARENT','terrainState','resolve','12413295msUREm','now','_errorEvent','otherwise','Terrain\x20tile\x20doesn\x27t\x20exist','scheduleTask','credit','length','prototype','_terrainPromises','clone','terrainVersion','getLevelMaximumGeometricError','847rZGmlF','176CqOZqq','options.url\x20or\x20options.metadata\x20is\x20required.','handleError','key','loadTileDataAvailability','terrainPresent','getTileInformationFromQuadKey','8KXxDYM','_levelZeroMaximumGeometricError','substring','EMPTY_OBJECT','url','NONE','providers','requestTileGeometry\x20must\x20not\x20be\x20called\x20before\x20the\x20terrain\x20provider\x20is\x20ready.','timestamp','negativeAltitudeThreshold','get','_terrainCache','_credit','always','requestTileGeometry','metadata','toString','ancestorHasTerrain','isValid','reject','108146Pupoxo','_metadata','getDerivedResource','-t.','603975awRthx','4AuBxva','negativeAltitudeExponentBias','tileXYToQuadKey','tilingScheme\x20must\x20not\x20be\x20called\x20before\x20the\x20imagery\x20provider\x20is\x20ready.','TERRAIN','UNKNOWN','add','hasTerrain','_terrainRequests','then','message','_lastTidy','readyPromise','_ready','terrainProvider','Terrain','state','_readyPromise','_tilingScheme','tidy','getTileDataAvailable'];a114_0x1abf=function(){return _0x1ff53e;};return a114_0x1abf();}var TerrainState={'UNKNOWN':0x0,'NONE':0x1,'SELF':0x2,'PARENT':0x3},julianDateScratch=new a114_0xb136b2();function TerrainCache(){var _0x3f44f2=a114_0x1994;this[_0x3f44f2(0x1b2)]={},this['_lastTidy']=a114_0xb136b2[_0x3f44f2(0x193)]();}TerrainCache[a114_0x4bae56(0x19a)][a114_0x4bae56(0x171)]=function(_0x30dba9,_0x37976a){var _0x39b4bc=a114_0x4bae56;this[_0x39b4bc(0x1b2)][_0x30dba9]={'buffer':_0x37976a,'timestamp':a114_0xb136b2['now']()};},TerrainCache[a114_0x4bae56(0x19a)][a114_0x4bae56(0x1b1)]=function(_0x575a78){var _0x15ad0e=a114_0x4bae56,_0x12b4e0=this[_0x15ad0e(0x1b2)],_0x24bb90=_0x12b4e0[_0x575a78];if(a114_0x5149ee(_0x24bb90))return delete this[_0x15ad0e(0x1b2)][_0x575a78],_0x24bb90[_0x15ad0e(0x188)];},TerrainCache[a114_0x4bae56(0x19a)][a114_0x4bae56(0x17e)]=function(){var _0x5ded84=a114_0x4bae56;a114_0xb136b2[_0x5ded84(0x193)](julianDateScratch);if(a114_0xb136b2[_0x5ded84(0x187)](julianDateScratch,this[_0x5ded84(0x176)])>0xa){var _0x254514=this['_terrainCache'],_0x2a9067=Object['keys'](_0x254514),_0x4bab96=_0x2a9067[_0x5ded84(0x199)];for(var _0x3b47c1=0x0;_0x3b47c1<_0x4bab96;++_0x3b47c1){var _0x142ffa=_0x2a9067[_0x3b47c1],_0x3c326e=_0x254514[_0x142ffa];a114_0xb136b2['secondsDifference'](julianDateScratch,_0x3c326e[_0x5ded84(0x1af)])>0xa&&delete _0x254514[_0x142ffa];}a114_0xb136b2[_0x5ded84(0x19c)](julianDateScratch,this[_0x5ded84(0x176)]);}};function GoogleEarthEnterpriseTerrainProvider(_0x1edbee){var _0x2f22c1=a114_0x4bae56;_0x1edbee=a114_0x3fed43(_0x1edbee,a114_0x3fed43[_0x2f22c1(0x1aa)]);if(!(a114_0x5149ee(_0x1edbee['url'])||a114_0x5149ee(_0x1edbee[_0x2f22c1(0x1b6)])))throw new a114_0x23c436(_0x2f22c1(0x1a1));var _0x7541eb;if(a114_0x5149ee(_0x1edbee['metadata']))_0x7541eb=_0x1edbee[_0x2f22c1(0x1b6)];else{var _0x171ca6=a114_0x346ca5['createIfNeeded'](_0x1edbee[_0x2f22c1(0x1ab)]);_0x7541eb=new a114_0x66ea08(_0x171ca6);}this['_metadata']=_0x7541eb,this['_tilingScheme']=new a114_0x3100b5({'numberOfLevelZeroTilesX':0x2,'numberOfLevelZeroTilesY':0x2,'rectangle':new a114_0x32af0b(-a114_0xc18c42['PI'],-a114_0xc18c42['PI'],a114_0xc18c42['PI'],a114_0xc18c42['PI']),'ellipsoid':_0x1edbee['ellipsoid']});var _0x510d06=_0x1edbee[_0x2f22c1(0x198)];typeof _0x510d06==='string'&&(_0x510d06=new a114_0x23c24f(_0x510d06));this[_0x2f22c1(0x1b3)]=_0x510d06,this[_0x2f22c1(0x1a8)]=40075.16,this[_0x2f22c1(0x1b2)]=new TerrainCache(),this[_0x2f22c1(0x19b)]={},this[_0x2f22c1(0x173)]={},this[_0x2f22c1(0x194)]=new a114_0x5981da(),this[_0x2f22c1(0x178)]=![];var _0x414a1f=this,_0x434a18;this['_readyPromise']=_0x7541eb[_0x2f22c1(0x177)]['then'](function(_0x882ce6){var _0x28053f=_0x2f22c1;if(!_0x7541eb[_0x28053f(0x1a5)]){var _0x1bc0d7=new a114_0x32e156('The\x20server\x20'+_0x7541eb[_0x28053f(0x1ab)]+_0x28053f(0x184));return _0x434a18=a114_0x14e512[_0x28053f(0x1a2)](_0x434a18,_0x414a1f,_0x414a1f['_errorEvent'],_0x1bc0d7[_0x28053f(0x175)],undefined,undefined,undefined,_0x1bc0d7),a114_0x49bf92[_0x28053f(0x1ba)](_0x1bc0d7);}return a114_0x14e512['handleSuccess'](_0x434a18),_0x414a1f[_0x28053f(0x178)]=_0x882ce6,_0x882ce6;})['otherwise'](function(_0x386510){var _0x292f26=_0x2f22c1;return _0x434a18=a114_0x14e512[_0x292f26(0x1a2)](_0x434a18,_0x414a1f,_0x414a1f[_0x292f26(0x194)],_0x386510[_0x292f26(0x175)],undefined,undefined,undefined,_0x386510),a114_0x49bf92[_0x292f26(0x1ba)](_0x386510);});}Object['defineProperties'](GoogleEarthEnterpriseTerrainProvider[a114_0x4bae56(0x19a)],{'url':{'get':function(){var _0x562ec4=a114_0x4bae56;return this[_0x562ec4(0x1bc)]['url'];}},'proxy':{'get':function(){var _0x31ab84=a114_0x4bae56;return this[_0x31ab84(0x1bc)][_0x31ab84(0x18a)];}},'tilingScheme':{'get':function(){var _0x3b0707=a114_0x4bae56;if(!this['_ready'])throw new a114_0x23c436(_0x3b0707(0x16e));return this[_0x3b0707(0x17d)];}},'errorEvent':{'get':function(){return this['_errorEvent'];}},'ready':{'get':function(){var _0x43fad3=a114_0x4bae56;return this[_0x43fad3(0x178)];}},'readyPromise':{'get':function(){var _0x1ff4cc=a114_0x4bae56;return this[_0x1ff4cc(0x17c)];}},'credit':{'get':function(){var _0xe07ca8=a114_0x4bae56;return this[_0xe07ca8(0x1b3)];}},'hasWaterMask':{'get':function(){return![];}},'hasVertexNormals':{'get':function(){return![];}},'availability':{'get':function(){return undefined;}}});var taskProcessor=new a114_0x705081(a114_0x4bae56(0x182));function computeChildMask(_0x2a460e,_0xc43167,_0xbe03cf){var _0x4869e5=a114_0x4bae56,_0x2edf3a=_0xc43167[_0x4869e5(0x18e)]();if(_0xc43167[_0x4869e5(0x190)]===TerrainState[_0x4869e5(0x18f)]){_0x2edf3a=0x0;for(var _0x4564e8=0x0;_0x4564e8<0x4;++_0x4564e8){var _0x5ecf52=_0xbe03cf[_0x4869e5(0x1a6)](_0x2a460e+_0x4564e8[_0x4869e5(0x1b7)]());a114_0x5149ee(_0x5ecf52)&&_0x5ecf52[_0x4869e5(0x172)]()&&(_0x2edf3a|=0x1<<_0x4564e8);}}return _0x2edf3a;}GoogleEarthEnterpriseTerrainProvider['prototype'][a114_0x4bae56(0x1b5)]=function(_0x2e03f3,_0x37926b,_0x212d1c,_0x529e3d){var _0x2d33f6=a114_0x4bae56;if(!this[_0x2d33f6(0x178)])throw new a114_0x23c436(_0x2d33f6(0x1ae));var _0x357ee=a114_0x66ea08[_0x2d33f6(0x1c2)](_0x2e03f3,_0x37926b,_0x212d1c),_0x165f6d=this[_0x2d33f6(0x1b2)],_0x332fac=this[_0x2d33f6(0x1bc)],_0x150027=_0x332fac[_0x2d33f6(0x1a6)](_0x357ee);if(!a114_0x5149ee(_0x150027))return a114_0x49bf92['reject'](new a114_0x32e156(_0x2d33f6(0x196)));var _0x58138f=_0x150027[_0x2d33f6(0x190)];!a114_0x5149ee(_0x58138f)&&(_0x58138f=_0x150027[_0x2d33f6(0x190)]=TerrainState[_0x2d33f6(0x170)]);var _0x179efd=_0x165f6d['get'](_0x357ee);if(a114_0x5149ee(_0x179efd)){var _0x248543=_0x332fac['providers'][_0x150027[_0x2d33f6(0x179)]];return a114_0x49bf92[_0x2d33f6(0x191)](new a114_0xc78794({'buffer':_0x179efd,'childTileMask':computeChildMask(_0x357ee,_0x150027,_0x332fac),'credits':a114_0x5149ee(_0x248543)?[_0x248543]:undefined,'negativeAltitudeExponentBias':_0x332fac[_0x2d33f6(0x1c1)],'negativeElevationThreshold':_0x332fac[_0x2d33f6(0x1b0)]}));}_0x165f6d[_0x2d33f6(0x17e)]();if(!_0x150027[_0x2d33f6(0x1b8)])return a114_0x49bf92[_0x2d33f6(0x191)](new a114_0x567593({'buffer':new Uint8Array(0x10*0x10),'width':0x10,'height':0x10}));else{if(_0x58138f===TerrainState[_0x2d33f6(0x1ac)])return a114_0x49bf92[_0x2d33f6(0x1ba)](new a114_0x32e156(_0x2d33f6(0x196)));}var _0x50d848,_0x1f77d9=_0x357ee,_0x4069ba=-0x1;switch(_0x58138f){case TerrainState[_0x2d33f6(0x18b)]:_0x4069ba=_0x150027[_0x2d33f6(0x19d)];break;case TerrainState[_0x2d33f6(0x18f)]:_0x1f77d9=_0x1f77d9[_0x2d33f6(0x1a9)](0x0,_0x1f77d9[_0x2d33f6(0x199)]-0x1),_0x50d848=_0x332fac[_0x2d33f6(0x1a6)](_0x1f77d9),_0x4069ba=_0x50d848[_0x2d33f6(0x19d)];break;case TerrainState['UNKNOWN']:_0x150027[_0x2d33f6(0x172)]()?_0x4069ba=_0x150027[_0x2d33f6(0x19d)]:(_0x1f77d9=_0x1f77d9['substring'](0x0,_0x1f77d9[_0x2d33f6(0x199)]-0x1),_0x50d848=_0x332fac[_0x2d33f6(0x1a6)](_0x1f77d9),a114_0x5149ee(_0x50d848)&&_0x50d848[_0x2d33f6(0x172)]()&&(_0x4069ba=_0x50d848[_0x2d33f6(0x19d)]));break;}if(_0x4069ba<0x0)return a114_0x49bf92['reject'](new a114_0x32e156(_0x2d33f6(0x196)));var _0x4cffc8=this['_terrainPromises'],_0x1f273b=this['_terrainRequests'],_0x4acea8,_0x3596c4;if(a114_0x5149ee(_0x4cffc8[_0x1f77d9]))_0x4acea8=_0x4cffc8[_0x1f77d9],_0x3596c4=_0x1f273b[_0x1f77d9];else{_0x3596c4=_0x529e3d;var _0x3b82e0=buildTerrainResource(this,_0x1f77d9,_0x4069ba,_0x3596c4)['fetchArrayBuffer']();if(!a114_0x5149ee(_0x3b82e0))return undefined;_0x4acea8=_0x3b82e0[_0x2d33f6(0x174)](function(_0x32bee3){var _0x7e56f7=_0x2d33f6;if(a114_0x5149ee(_0x32bee3))return taskProcessor[_0x7e56f7(0x197)]({'buffer':_0x32bee3,'type':_0x7e56f7(0x17a),'key':_0x332fac[_0x7e56f7(0x1a3)]},[_0x32bee3])['then'](function(_0x167682){var _0x46d0ef=_0x7e56f7,_0x2a3391=_0x332fac['getTileInformationFromQuadKey'](_0x1f77d9);_0x2a3391[_0x46d0ef(0x190)]=TerrainState['SELF'],_0x165f6d['add'](_0x1f77d9,_0x167682[0x0]);var _0x9442c1=_0x2a3391[_0x46d0ef(0x179)],_0x44e7ff=_0x167682['length']-0x1;for(var _0x544243=0x0;_0x544243<_0x44e7ff;++_0x544243){var _0x888aa2=_0x1f77d9+_0x544243[_0x46d0ef(0x1b7)](),_0x10f333=_0x332fac[_0x46d0ef(0x1a6)](_0x888aa2);a114_0x5149ee(_0x10f333)&&(_0x165f6d[_0x46d0ef(0x171)](_0x888aa2,_0x167682[_0x544243+0x1]),_0x10f333[_0x46d0ef(0x190)]=TerrainState[_0x46d0ef(0x18f)],_0x10f333['terrainProvider']===0x0&&(_0x10f333[_0x46d0ef(0x179)]=_0x9442c1));}});return a114_0x49bf92['reject'](new a114_0x32e156(_0x7e56f7(0x186)));}),_0x4cffc8[_0x1f77d9]=_0x4acea8,_0x1f273b[_0x1f77d9]=_0x3596c4,_0x4acea8=_0x4acea8[_0x2d33f6(0x1b4)](function(){delete _0x4cffc8[_0x1f77d9],delete _0x1f273b[_0x1f77d9];});}return _0x4acea8['then'](function(){var _0x50a395=_0x2d33f6,_0x338ad3=_0x165f6d['get'](_0x357ee);if(a114_0x5149ee(_0x338ad3)){var _0x357545=_0x332fac[_0x50a395(0x1ad)][_0x150027['terrainProvider']];return new a114_0xc78794({'buffer':_0x338ad3,'childTileMask':computeChildMask(_0x357ee,_0x150027,_0x332fac),'credits':a114_0x5149ee(_0x357545)?[_0x357545]:undefined,'negativeAltitudeExponentBias':_0x332fac['negativeAltitudeExponentBias'],'negativeElevationThreshold':_0x332fac['negativeAltitudeThreshold']});}return a114_0x49bf92['reject'](new a114_0x32e156(_0x50a395(0x186)));})[_0x2d33f6(0x195)](function(_0x28eb35){var _0x12fa03=_0x2d33f6;if(_0x3596c4[_0x12fa03(0x17b)]===a114_0x536854['CANCELLED'])return _0x529e3d[_0x12fa03(0x17b)]=_0x3596c4[_0x12fa03(0x17b)],a114_0x49bf92[_0x12fa03(0x1ba)](_0x28eb35);return _0x150027[_0x12fa03(0x190)]=TerrainState[_0x12fa03(0x1ac)],a114_0x49bf92[_0x12fa03(0x1ba)](_0x28eb35);});},GoogleEarthEnterpriseTerrainProvider[a114_0x4bae56(0x19a)][a114_0x4bae56(0x19e)]=function(_0x3db7b5){return this['_levelZeroMaximumGeometricError']/(0x1<<_0x3db7b5);},GoogleEarthEnterpriseTerrainProvider[a114_0x4bae56(0x19a)][a114_0x4bae56(0x17f)]=function(_0x4e27fa,_0x54cadd,_0x3e373d){var _0xc61595=a114_0x4bae56,_0x3556be=this['_metadata'],_0xfc9097=a114_0x66ea08[_0xc61595(0x1c2)](_0x4e27fa,_0x54cadd,_0x3e373d),_0x422d59=_0x3556be[_0xc61595(0x189)](_0x4e27fa,_0x54cadd,_0x3e373d);if(_0x422d59===null)return![];if(a114_0x5149ee(_0x422d59)){if(!_0x422d59['ancestorHasTerrain'])return!![];var _0x44b211=_0x422d59[_0xc61595(0x190)];if(_0x44b211===TerrainState['NONE'])return![];if(!a114_0x5149ee(_0x44b211)||_0x44b211===TerrainState[_0xc61595(0x170)]){_0x422d59['terrainState']=TerrainState['UNKNOWN'];if(!_0x422d59[_0xc61595(0x172)]()){_0xfc9097=_0xfc9097['substring'](0x0,_0xfc9097[_0xc61595(0x199)]-0x1);var _0xbaa732=_0x3556be[_0xc61595(0x1a6)](_0xfc9097);if(!a114_0x5149ee(_0xbaa732)||!_0xbaa732[_0xc61595(0x172)]())return![];}}return!![];}if(_0x3556be[_0xc61595(0x1b9)](_0xfc9097)){var _0xb9b897=new a114_0x551b1d({'throttle':![],'throttleByServer':!![],'type':a114_0x397f39[_0xc61595(0x16f)]});_0x3556be[_0xc61595(0x183)](_0x4e27fa,_0x54cadd,_0x3e373d,_0xb9b897);}return![];},GoogleEarthEnterpriseTerrainProvider['prototype'][a114_0x4bae56(0x1a4)]=function(_0x23a73e,_0x363677,_0x3f6cd4){return undefined;};function buildTerrainResource(_0x546690,_0x2d4c6d,_0x43561f,_0x4a1116){var _0x3fd142=a114_0x4bae56;return _0x43561f=a114_0x5149ee(_0x43561f)&&_0x43561f>0x0?_0x43561f:0x1,_0x546690['_metadata']['resource'][_0x3fd142(0x1bd)]({'url':'flatfile?f1c-0'+_0x2d4c6d+_0x3fd142(0x1be)+_0x43561f[_0x3fd142(0x1b7)](),'request':_0x4a1116});}export default GoogleEarthEnterpriseTerrainProvider;