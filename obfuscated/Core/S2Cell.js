var a220_0x2560e6=a220_0xfa14;(function(_0x183567,_0x229aeb){var _0x5c551d=a220_0xfa14,_0x10f51a=_0x183567();while(!![]){try{var _0x29fac0=parseInt(_0x5c551d(0x9b))/0x1*(-parseInt(_0x5c551d(0x76))/0x2)+-parseInt(_0x5c551d(0x83))/0x3*(parseInt(_0x5c551d(0x91))/0x4)+-parseInt(_0x5c551d(0x73))/0x5+-parseInt(_0x5c551d(0x8a))/0x6+-parseInt(_0x5c551d(0x90))/0x7*(-parseInt(_0x5c551d(0x98))/0x8)+parseInt(_0x5c551d(0x79))/0x9*(-parseInt(_0x5c551d(0x8c))/0xa)+parseInt(_0x5c551d(0x96))/0xb;if(_0x29fac0===_0x229aeb)break;else _0x10f51a['push'](_0x10f51a['shift']());}catch(_0x5beea9){_0x10f51a['push'](_0x10f51a['shift']());}}}(a220_0x3913,0x76cf8));import a220_0x57f3ff from'./Cartesian3.js';import a220_0x28c90c from'./Cartographic.js';import a220_0x27b57b from'./Check.js';import a220_0x41f338 from'./defaultValue.js';import a220_0x2dfbe4 from'./defined.js';import a220_0x4e6a6d from'./DeveloperError.js';import a220_0x4cbd0a from'./Ellipsoid.js';import a220_0x18233a from'./FeatureDetection.js';import a220_0x2a803c from'./RuntimeError.js';var S2_MAX_LEVEL=0x1e,S2_LIMIT_IJ=0x1<<S2_MAX_LEVEL,S2_MAX_SITI=0x1<<S2_MAX_LEVEL+0x1>>>0x0,S2_POSITION_BITS=0x2*S2_MAX_LEVEL+0x1,S2_LOOKUP_BITS=0x4,S2_LOOKUP_POSITIONS=[],S2_LOOKUP_IJ=[],S2_POSITION_TO_IJ=[[0x0,0x1,0x3,0x2],[0x0,0x2,0x3,0x1],[0x3,0x2,0x0,0x1],[0x3,0x1,0x0,0x2]],S2_SWAP_MASK=0x1,S2_INVERT_MASK=0x2,S2_POSITION_TO_ORIENTATION_MASK=[S2_SWAP_MASK,0x0,0x0,S2_SWAP_MASK|S2_INVERT_MASK];function S2Cell(_0x441a2c){var _0x5c944e=a220_0xfa14;if(!a220_0x18233a[_0x5c944e(0x81)]())throw new a220_0x2a803c(_0x5c944e(0x7b));if(!a220_0x2dfbe4(_0x441a2c))throw new a220_0x4e6a6d(_0x5c944e(0x9a));if(!S2Cell[_0x5c944e(0x88)](_0x441a2c))throw new a220_0x4e6a6d('cell\x20ID\x20is\x20invalid.');this['_cellId']=_0x441a2c,this[_0x5c944e(0x92)]=S2Cell[_0x5c944e(0x69)](_0x441a2c);}S2Cell[a220_0x2560e6(0x87)]=function(_0xe0a728){var _0x2f3304=a220_0x2560e6;a220_0x27b57b[_0x2f3304(0x89)]['string']('token',_0xe0a728);if(!S2Cell[_0x2f3304(0x94)](_0xe0a728))throw new a220_0x4e6a6d(_0x2f3304(0x84));return new S2Cell(S2Cell[_0x2f3304(0x95)](_0xe0a728));},S2Cell[a220_0x2560e6(0x88)]=function(_0x127ff5){var _0x556c3a=a220_0x2560e6;a220_0x27b57b[_0x556c3a(0x89)]['bigint']('cellId',_0x127ff5);if(_0x127ff5<=0x0)return![];if(_0x127ff5>>BigInt(S2_POSITION_BITS)>0x5)return![];var _0x2a5b56=_0x127ff5&~_0x127ff5+BigInt(0x1);if(!(_0x2a5b56&BigInt(_0x556c3a(0x97))))return![];return!![];},S2Cell[a220_0x2560e6(0x94)]=function(_0x59e9c1){var _0xc35190=a220_0x2560e6;a220_0x27b57b['typeOf'][_0xc35190(0x6c)](_0xc35190(0x9c),_0x59e9c1);if(!/^[0-9a-fA-F]{1,16}$/[_0xc35190(0x7c)](_0x59e9c1))return![];return S2Cell[_0xc35190(0x88)](S2Cell[_0xc35190(0x95)](_0x59e9c1));},S2Cell[a220_0x2560e6(0x95)]=function(_0x4c5db0){var _0x3f0f6e=a220_0x2560e6;return a220_0x27b57b[_0x3f0f6e(0x89)][_0x3f0f6e(0x6c)]('token',_0x4c5db0),BigInt('0x'+_0x4c5db0+'0'['repeat'](0x10-_0x4c5db0[_0x3f0f6e(0x71)]));},S2Cell[a220_0x2560e6(0x8d)]=function(_0x45cd01){var _0x139a0c=a220_0x2560e6;a220_0x27b57b[_0x139a0c(0x89)]['bigint'](_0x139a0c(0x75),_0x45cd01);var _0x503678=Math[_0x139a0c(0x78)](countTrailingZeroBits(_0x45cd01)/0x4),_0x5c4d31=_0x45cd01[_0x139a0c(0x6a)](0x10)['replace'](/0*$/,''),_0x45f281=Array(0x11-_0x503678-_0x5c4d31[_0x139a0c(0x71)])[_0x139a0c(0x7d)]('0');return _0x45f281+_0x5c4d31;},S2Cell['getLevel']=function(_0x5b076d){var _0x24538b=a220_0x2560e6;a220_0x27b57b[_0x24538b(0x89)]['bigint'](_0x24538b(0x75),_0x5b076d);if(!S2Cell[_0x24538b(0x88)](_0x5b076d))throw new a220_0x4e6a6d();var _0x4aaefa=0x0;while(_0x5b076d!==BigInt(0x0)){if(_0x5b076d&BigInt(0x1))break;_0x4aaefa++,_0x5b076d=_0x5b076d>>BigInt(0x1);}return S2_MAX_LEVEL-(_0x4aaefa>>0x1);},S2Cell['prototype']['getChild']=function(_0x5bd975){var _0x475c90=a220_0x2560e6;a220_0x27b57b[_0x475c90(0x89)][_0x475c90(0x82)](_0x475c90(0x8e),_0x5bd975);if(_0x5bd975<0x0||_0x5bd975>0x3)throw new a220_0x4e6a6d(_0x475c90(0x6d));if(this[_0x475c90(0x92)]===0x1e)throw new a220_0x4e6a6d('cannot\x20get\x20child\x20of\x20leaf\x20cell.');var _0x350346=lsb(this[_0x475c90(0x6b)])>>BigInt(0x2),_0x37b00b=this[_0x475c90(0x6b)]+BigInt(0x2*_0x5bd975+0x1-0x4)*_0x350346;return new S2Cell(_0x37b00b);},S2Cell[a220_0x2560e6(0x6e)]['getParent']=function(){var _0x16c522=a220_0x2560e6;if(this[_0x16c522(0x92)]===0x0)throw new a220_0x4e6a6d(_0x16c522(0x9d));var _0x16641e=lsb(this[_0x16c522(0x6b)])<<BigInt(0x2);return new S2Cell(this[_0x16c522(0x6b)]&~_0x16641e+BigInt(0x1)|_0x16641e);},S2Cell[a220_0x2560e6(0x6e)][a220_0x2560e6(0x99)]=function(_0x47929d){var _0x5207c9=a220_0x2560e6;if(this[_0x5207c9(0x92)]===0x0||_0x47929d<0x0||this[_0x5207c9(0x92)]<_0x47929d)throw new a220_0x4e6a6d(_0x5207c9(0x80));var _0x43e99c=lsbForLevel(_0x47929d);return new S2Cell(this[_0x5207c9(0x6b)]&-_0x43e99c|_0x43e99c);},S2Cell[a220_0x2560e6(0x6e)][a220_0x2560e6(0x7a)]=function(_0x7eb173){var _0x81b5d2=a220_0x2560e6;_0x7eb173=a220_0x41f338(_0x7eb173,a220_0x4cbd0a['WGS84']);var _0x4a0ea2=getS2Center(this['_cellId'],this[_0x81b5d2(0x92)]);_0x4a0ea2=a220_0x57f3ff[_0x81b5d2(0x8f)](_0x4a0ea2,_0x4a0ea2);var _0x9951c5=new a220_0x28c90c[(_0x81b5d2(0x74))](_0x4a0ea2,a220_0x4cbd0a[_0x81b5d2(0x86)]);return a220_0x28c90c['toCartesian'](_0x9951c5,_0x7eb173,new a220_0x57f3ff());},S2Cell['prototype'][a220_0x2560e6(0x7f)]=function(_0x4989a,_0x2cb16d){var _0x4b5514=a220_0x2560e6;a220_0x27b57b[_0x4b5514(0x89)][_0x4b5514(0x82)](_0x4b5514(0x8e),_0x4989a);if(_0x4989a<0x0||_0x4989a>0x3)throw new a220_0x4e6a6d('vertex\x20index\x20must\x20be\x20in\x20the\x20range\x20[0-3].');_0x2cb16d=a220_0x41f338(_0x2cb16d,a220_0x4cbd0a[_0x4b5514(0x77)]);var _0x12f68a=getS2Vertex(this[_0x4b5514(0x6b)],this[_0x4b5514(0x92)],_0x4989a);_0x12f68a=a220_0x57f3ff[_0x4b5514(0x8f)](_0x12f68a,_0x12f68a);var _0x1afa07=new a220_0x28c90c[(_0x4b5514(0x74))](_0x12f68a,a220_0x4cbd0a[_0x4b5514(0x86)]);return a220_0x28c90c[_0x4b5514(0x70)](_0x1afa07,_0x2cb16d,new a220_0x57f3ff());},S2Cell[a220_0x2560e6(0x8b)]=function(_0x50f2a9,_0x1e9bfa,_0x13e65b){var _0x561b1e=a220_0x2560e6;a220_0x27b57b[_0x561b1e(0x89)][_0x561b1e(0x6f)]('position',_0x1e9bfa);if(_0x50f2a9<0x0||_0x50f2a9>0x5)throw new a220_0x4e6a6d(_0x561b1e(0x7e));if(_0x13e65b<0x0||_0x13e65b>S2_MAX_LEVEL)throw new a220_0x4e6a6d(_0x561b1e(0x85));if(_0x1e9bfa<0x0||_0x1e9bfa>=Math[_0x561b1e(0x93)](0x4,_0x13e65b))throw new a220_0x4e6a6d(_0x561b1e(0x72));var _0xac68b1=(_0x50f2a9<0x4?'0':'')+(_0x50f2a9<0x2?'0':'')+_0x50f2a9[_0x561b1e(0x6a)](0x2),_0x27168f=_0x1e9bfa['toString'](0x2),_0x5c0f2b=Array(0x2*_0x13e65b-_0x27168f[_0x561b1e(0x71)]+0x1)[_0x561b1e(0x7d)]('0'),_0x5a6314=Array(S2_POSITION_BITS-0x2*_0x13e65b)[_0x561b1e(0x7d)]('0'),_0x4cf0a5=BigInt('0b'+_0xac68b1+_0x5c0f2b+_0x27168f+'1'+_0x5a6314);return new S2Cell(_0x4cf0a5);};function getS2Center(_0x46726a,_0x5dc5af){var _0x4632d7=convertCellIdToFaceSiTi(_0x46726a,_0x5dc5af);return convertFaceSiTitoXYZ(_0x4632d7[0x0],_0x4632d7[0x1],_0x4632d7[0x2]);}function a220_0xfa14(_0x668635,_0x40ca25){var _0x391344=a220_0x3913();return a220_0xfa14=function(_0xfa1454,_0x1ace1d){_0xfa1454=_0xfa1454-0x69;var _0x189e6c=_0x391344[_0xfa1454];return _0x189e6c;},a220_0xfa14(_0x668635,_0x40ca25);}function getS2Vertex(_0x4ec4f8,_0x2c1031,_0x393cb4){var _0x37fc0c=convertCellIdToFaceIJ(_0x4ec4f8,_0x2c1031),_0x326d17=convertIJLeveltoBoundUV([_0x37fc0c[0x1],_0x37fc0c[0x2]],_0x2c1031),_0x14b07f=_0x393cb4>>0x1&0x1;return convertFaceUVtoXYZ(_0x37fc0c[0x0],_0x326d17[0x0][_0x14b07f^_0x393cb4&0x1],_0x326d17[0x1][_0x14b07f]);}function convertCellIdToFaceSiTi(_0x1145d4,_0x5d6b29){var _0x567bfe=convertCellIdToFaceIJ(_0x1145d4),_0x49a87a=_0x567bfe[0x0],_0x4aa900=_0x567bfe[0x1],_0x27ba98=_0x567bfe[0x2],_0x1a082d=_0x5d6b29===0x1e,_0x92a4d7=!_0x1a082d&&(BigInt(_0x4aa900)^_0x1145d4>>BigInt(0x2))&BigInt(0x1),_0xc0f7af=_0x1a082d?0x1:_0x92a4d7?0x2:0x0,_0x7723e5=(_0x4aa900<<0x1)+_0xc0f7af,_0x5248fd=(_0x27ba98<<0x1)+_0xc0f7af;return[_0x49a87a,_0x7723e5,_0x5248fd];}function convertCellIdToFaceIJ(_0x2385d5){var _0x4d5eb5=a220_0x2560e6;S2_LOOKUP_POSITIONS[_0x4d5eb5(0x71)]===0x0&&generateLookupTable();var _0xc7265b=Number(_0x2385d5>>BigInt(S2_POSITION_BITS)),_0x24a98d=_0xc7265b&S2_SWAP_MASK,_0x49f712=(0x1<<S2_LOOKUP_BITS)-0x1,_0x18df24=0x0,_0x12ac87=0x0;for(var _0x1c6666=0x7;_0x1c6666>=0x0;_0x1c6666--){var _0x26c6ef=_0x1c6666===0x7?S2_MAX_LEVEL-0x7*S2_LOOKUP_BITS:S2_LOOKUP_BITS,_0x1b2ae8=(0x1<<0x2*_0x26c6ef)-0x1;_0x24a98d+=Number(_0x2385d5>>BigInt(_0x1c6666*0x2*S2_LOOKUP_BITS+0x1)&BigInt(_0x1b2ae8))<<0x2,_0x24a98d=S2_LOOKUP_IJ[_0x24a98d];var _0x2a4dfc=_0x1c6666*S2_LOOKUP_BITS;_0x18df24+=_0x24a98d>>S2_LOOKUP_BITS+0x2<<_0x2a4dfc,_0x12ac87+=(_0x24a98d>>0x2&_0x49f712)<<_0x2a4dfc,_0x24a98d&=S2_SWAP_MASK|S2_INVERT_MASK;}return[_0xc7265b,_0x18df24,_0x12ac87];}function convertFaceSiTitoXYZ(_0x2dae71,_0x51c33c,_0x2666b6){var _0x48f35e=convertSiTitoST(_0x51c33c),_0x50582c=convertSiTitoST(_0x2666b6),_0x25f9ab=convertSTtoUV(_0x48f35e),_0xdb3cc2=convertSTtoUV(_0x50582c);return convertFaceUVtoXYZ(_0x2dae71,_0x25f9ab,_0xdb3cc2);}function convertFaceUVtoXYZ(_0x40fd68,_0x2698a1,_0x1377cd){switch(_0x40fd68){case 0x0:return new a220_0x57f3ff(0x1,_0x2698a1,_0x1377cd);case 0x1:return new a220_0x57f3ff(-_0x2698a1,0x1,_0x1377cd);case 0x2:return new a220_0x57f3ff(-_0x2698a1,-_0x1377cd,0x1);case 0x3:return new a220_0x57f3ff(-0x1,-_0x1377cd,-_0x2698a1);case 0x4:return new a220_0x57f3ff(_0x1377cd,-0x1,-_0x2698a1);default:return new a220_0x57f3ff(_0x1377cd,_0x2698a1,-0x1);}}function convertSTtoUV(_0x5ca171){if(_0x5ca171>=0.5)return 0x1/0x3*(0x4*_0x5ca171*_0x5ca171-0x1);return 0x1/0x3*(0x1-0x4*(0x1-_0x5ca171)*(0x1-_0x5ca171));}function convertSiTitoST(_0x5422fd){return 0x1/S2_MAX_SITI*_0x5422fd;}function a220_0x3913(){var _0x17b4f1=['isValidId','typeOf','2280198qdnnqZ','fromFacePositionLevel','220qFGRGg','getTokenFromId','index','normalize','340347Mtvdkt','320784heKyDf','_level','pow','isValidToken','getIdFromToken','18979642nxfSWH','0x1555555555555555','144XuLCCO','getParentAtLevel','cell\x20ID\x20is\x20required.','149075QrGMfq','token','cannot\x20get\x20parent\x20of\x20root\x20cell.','getLevel','toString','_cellId','string','child\x20index\x20must\x20be\x20in\x20the\x20range\x20[0-3].','prototype','bigint','toCartesian','length','Invalid\x20Hilbert\x20position\x20for\x20level','1154330QceHTr','fromCartesian','cellId','10ybcmuz','WGS84','floor','80307BNwlut','getCenter','S2\x20required\x20BigInt\x20support','test','join','Invalid\x20S2\x20Face\x20(must\x20be\x20within\x200-5)','getVertex','cannot\x20get\x20parent\x20at\x20invalid\x20level.','supportsBigInt','number','21awoFyi','token\x20is\x20invalid.','Invalid\x20level\x20(must\x20be\x20within\x200-30)','UNIT_SPHERE','fromToken'];a220_0x3913=function(){return _0x17b4f1;};return a220_0x3913();}function convertIJLeveltoBoundUV(_0x2e0715,_0x103eef){var _0x1bf181=[[],[]],_0xc136cf=getSizeIJ(_0x103eef);for(var _0x302cff=0x0;_0x302cff<0x2;++_0x302cff){var _0x5a305c=_0x2e0715[_0x302cff]&-_0xc136cf,_0x38877d=_0x5a305c+_0xc136cf;_0x1bf181[_0x302cff][0x0]=convertSTtoUV(convertIJtoSTMinimum(_0x5a305c)),_0x1bf181[_0x302cff][0x1]=convertSTtoUV(convertIJtoSTMinimum(_0x38877d));}return _0x1bf181;}function getSizeIJ(_0x1d3036){return 0x1<<S2_MAX_LEVEL-_0x1d3036>>>0x0;}function convertIJtoSTMinimum(_0x2cded5){return 0x1/S2_LIMIT_IJ*_0x2cded5;}function generateLookupCell(_0x238521,_0x25e0be,_0x174926,_0x38c911,_0x1bfecd,_0x5d5a2d){if(_0x238521===S2_LOOKUP_BITS){var _0x51006d=(_0x25e0be<<S2_LOOKUP_BITS)+_0x174926;S2_LOOKUP_POSITIONS[(_0x51006d<<0x2)+_0x38c911]=(_0x1bfecd<<0x2)+_0x5d5a2d,S2_LOOKUP_IJ[(_0x1bfecd<<0x2)+_0x38c911]=(_0x51006d<<0x2)+_0x5d5a2d;}else{_0x238521++,_0x25e0be<<=0x1,_0x174926<<=0x1,_0x1bfecd<<=0x2;var _0x4ff9bc=S2_POSITION_TO_IJ[_0x5d5a2d];generateLookupCell(_0x238521,_0x25e0be+(_0x4ff9bc[0x0]>>0x1),_0x174926+(_0x4ff9bc[0x0]&0x1),_0x38c911,_0x1bfecd,_0x5d5a2d^S2_POSITION_TO_ORIENTATION_MASK[0x0]),generateLookupCell(_0x238521,_0x25e0be+(_0x4ff9bc[0x1]>>0x1),_0x174926+(_0x4ff9bc[0x1]&0x1),_0x38c911,_0x1bfecd+0x1,_0x5d5a2d^S2_POSITION_TO_ORIENTATION_MASK[0x1]),generateLookupCell(_0x238521,_0x25e0be+(_0x4ff9bc[0x2]>>0x1),_0x174926+(_0x4ff9bc[0x2]&0x1),_0x38c911,_0x1bfecd+0x2,_0x5d5a2d^S2_POSITION_TO_ORIENTATION_MASK[0x2]),generateLookupCell(_0x238521,_0x25e0be+(_0x4ff9bc[0x3]>>0x1),_0x174926+(_0x4ff9bc[0x3]&0x1),_0x38c911,_0x1bfecd+0x3,_0x5d5a2d^S2_POSITION_TO_ORIENTATION_MASK[0x3]);}}function generateLookupTable(){generateLookupCell(0x0,0x0,0x0,0x0,0x0,0x0),generateLookupCell(0x0,0x0,0x0,S2_SWAP_MASK,0x0,S2_SWAP_MASK),generateLookupCell(0x0,0x0,0x0,S2_INVERT_MASK,0x0,S2_INVERT_MASK),generateLookupCell(0x0,0x0,0x0,S2_SWAP_MASK|S2_INVERT_MASK,0x0,S2_SWAP_MASK|S2_INVERT_MASK);}function lsb(_0x1bd450){return _0x1bd450&~_0x1bd450+BigInt(0x1);}function lsbForLevel(_0x1e0983){return BigInt(0x1)<<BigInt(0x2*(S2_MAX_LEVEL-_0x1e0983));}var Mod67BitPosition=[0x40,0x0,0x1,0x27,0x2,0xf,0x28,0x17,0x3,0xc,0x10,0x3b,0x29,0x13,0x18,0x36,0x4,0x40,0xd,0xa,0x11,0x3e,0x3c,0x1c,0x2a,0x1e,0x14,0x33,0x19,0x2c,0x37,0x2f,0x5,0x20,0x41,0x26,0xe,0x16,0xb,0x3a,0x12,0x35,0x3f,0x9,0x3d,0x1b,0x1d,0x32,0x2b,0x2e,0x1f,0x25,0x15,0x39,0x34,0x8,0x1a,0x31,0x2d,0x24,0x38,0x7,0x30,0x23,0x6,0x22,0x21,0x0];function countTrailingZeroBits(_0x2eb72f){return Mod67BitPosition[(-_0x2eb72f&_0x2eb72f)%BigInt(0x43)];}export default S2Cell;