var a2_0x51541e=a2_0x510f;(function(_0x1228de,_0x5cff31){var _0x512e94=a2_0x510f,_0x1af80f=_0x1228de();while(!![]){try{var _0x17a82c=parseInt(_0x512e94(0x1a3))/0x1*(parseInt(_0x512e94(0x1a5))/0x2)+-parseInt(_0x512e94(0x1fa))/0x3+parseInt(_0x512e94(0x1f9))/0x4+-parseInt(_0x512e94(0x1fd))/0x5*(-parseInt(_0x512e94(0x1cc))/0x6)+parseInt(_0x512e94(0x1d2))/0x7*(parseInt(_0x512e94(0x1d7))/0x8)+parseInt(_0x512e94(0x1e4))/0x9*(-parseInt(_0x512e94(0x1df))/0xa)+parseInt(_0x512e94(0x1ae))/0xb;if(_0x17a82c===_0x5cff31)break;else _0x1af80f['push'](_0x1af80f['shift']());}catch(_0xf689a6){_0x1af80f['push'](_0x1af80f['shift']());}}}(a2_0x2d1d,0xaa233));function a2_0x2d1d(){var _0x37de87=['log','rows','1808708fICDsX','916053irPPOo','_hasAvailability','deferred','5ChSwsV','floor','rectangleNortheastInMeters','latestWkid','indexOf','LERC','fetchJson','join','then','xmin','_tilesAvailable','isTileAvailable','58787ceiINw','getLevelMaximumGeometricError\x20must\x20not\x20be\x20called\x20before\x20ready\x20returns\x20true.','2UccQZb','capabilities','always','wkid','_resource','requestTileGeometry','NONE','_height','getTileDataAvailable','5784317TSpnGY','_levelZeroMaximumGeometricError','getNumberOfYTilesAtLevel','tileInfo\x20is\x20required','WGS84','push','tile/','_tilingScheme','bandCount','getDerivedResource','loadTileDataAvailability','_readyPromise','cancel','ready','fromDegrees','xmax','_availableCache','pjson','tileInfo','tilemap/','prototype','ArcGISTiledElevationTerrainProvider:\x20Terrain\x20data\x20has\x20more\x20than\x201\x20band.\x20Using\x20the\x20first\x20one.','spatialReference','_maxLevel','length','_width','endingIndices','cols','ymin','getNumberOfXTilesAtLevel','6379686vQgFXW','every','CANCELLED','_errorEvent','_credit','requestTileGeometry\x20must\x20not\x20be\x20called\x20before\x20the\x20terrain\x20provider\x20is\x20ready.','8561kHuFpA','addAvailableTileRange','options.url\x20is\x20required.','computeChildMaskForTile','ymax','1352caiBtF','_ready','Invalid\x20spatial\x20reference','endY','reject','startY','state','TERRAIN','110ZyufwC','getEstimatedLevelZeroGeometricErrorForAHeightmap','ellipsoid','rectangleSouthwestInMeters','resolve','1067355NSJfYI','getLevelMaximumGeometricError','_terrainDataStructure','range','_encoding','value','_tilesAvailablityLoaded','defineProperties','_lodCount','url','availability\x20must\x20not\x20be\x20called\x20before\x20the\x20terrain\x20provider\x20is\x20ready.','maxValues','promise','extent','fetchArrayBuffer','appendForwardSlash','copyrightText','endX','data'];a2_0x2d1d=function(){return _0x37de87;};return a2_0x2d1d();}import a2_0x513a9d from'../ThirdParty/when.js';import a2_0x598c64 from'./Cartesian2.js';import a2_0x508af7 from'./Credit.js';import a2_0x2e15ce from'./defaultValue.js';import a2_0x41e71c from'./defined.js';import a2_0xe3e756 from'./DeveloperError.js';import a2_0x15f04f from'./Ellipsoid.js';import a2_0x59c684 from'./Event.js';import a2_0xbc4cb9 from'./GeographicTilingScheme.js';import a2_0xd8c68b from'./HeightmapEncoding.js';import a2_0x15eb4d from'./HeightmapTerrainData.js';import a2_0xc6dc66 from'./Rectangle.js';import a2_0x5818a1 from'./Request.js';import a2_0x46eff6 from'./RequestState.js';import a2_0x36b543 from'./RequestType.js';import a2_0xbbd1f5 from'./Resource.js';import a2_0x5ef19c from'./RuntimeError.js';import a2_0x52781e from'./TerrainProvider.js';import a2_0x45648b from'./TileAvailability.js';import a2_0x51ceb0 from'./TileProviderError.js';import a2_0x34d42c from'./WebMercatorTilingScheme.js';var ALL_CHILDREN=0xf;function ArcGISTiledElevationTerrainProvider(_0x29e728){var _0x464ad3=a2_0x510f;if(!a2_0x41e71c(_0x29e728)||!a2_0x41e71c(_0x29e728[_0x464ad3(0x1ed)]))throw new a2_0xe3e756(_0x464ad3(0x1d4));this[_0x464ad3(0x1a9)]=undefined,this[_0x464ad3(0x1d0)]=undefined,this[_0x464ad3(0x1b5)]=undefined,this[_0x464ad3(0x1af)]=undefined,this[_0x464ad3(0x1c5)]=undefined,this[_0x464ad3(0x1e6)]=undefined,this[_0x464ad3(0x1d8)]=![],this[_0x464ad3(0x1c7)]=undefined,this[_0x464ad3(0x1ac)]=undefined,this[_0x464ad3(0x1e8)]=undefined;var _0x5e2f6b=_0x29e728['token'];this[_0x464ad3(0x1fb)]=![],this[_0x464ad3(0x207)]=undefined,this[_0x464ad3(0x1ea)]=undefined,this['_availableCache']={};var _0x37899c=this,_0x5acd2f=a2_0x2e15ce(_0x29e728[_0x464ad3(0x1e1)],a2_0x15f04f[_0x464ad3(0x1b2)]);this['_readyPromise']=a2_0x513a9d(_0x29e728['url'])[_0x464ad3(0x205)](function(_0x563cd3){var _0x1c6ae9=_0x464ad3,_0x28c930=a2_0xbbd1f5['createIfNeeded'](_0x563cd3);_0x28c930[_0x1c6ae9(0x1f3)]();a2_0x41e71c(_0x5e2f6b)&&(_0x28c930=_0x28c930[_0x1c6ae9(0x1b7)]({'queryParameters':{'token':_0x5e2f6b}}));_0x37899c[_0x1c6ae9(0x1a9)]=_0x28c930;var _0x1bbb4a=_0x28c930[_0x1c6ae9(0x1b7)]({'queryParameters':{'f':_0x1c6ae9(0x1bf)}});return _0x1bbb4a[_0x1c6ae9(0x203)]();})['then'](function(_0x2c9c37){var _0x32c140=_0x464ad3,_0x3bcc63=_0x2c9c37[_0x32c140(0x1f4)];a2_0x41e71c(_0x3bcc63)&&(_0x37899c[_0x32c140(0x1d0)]=new a2_0x508af7(_0x3bcc63));var _0x441289=_0x2c9c37[_0x32c140(0x1c4)],_0x5570e9=a2_0x2e15ce(_0x441289[_0x32c140(0x200)],_0x441289[_0x32c140(0x1a8)]),_0x438f66=_0x2c9c37[_0x32c140(0x1f1)],_0x934d6d={'ellipsoid':_0x5acd2f};if(_0x5570e9===0x10e6)_0x934d6d['rectangle']=a2_0xc6dc66[_0x32c140(0x1bc)](_0x438f66[_0x32c140(0x206)],_0x438f66['ymin'],_0x438f66[_0x32c140(0x1bd)],_0x438f66[_0x32c140(0x1d6)]),_0x37899c[_0x32c140(0x1b5)]=new a2_0xbc4cb9(_0x934d6d);else{if(_0x5570e9===0xf11)_0x934d6d[_0x32c140(0x1e2)]=new a2_0x598c64(_0x438f66[_0x32c140(0x206)],_0x438f66[_0x32c140(0x1ca)]),_0x934d6d[_0x32c140(0x1ff)]=new a2_0x598c64(_0x438f66['xmax'],_0x438f66[_0x32c140(0x1d6)]),_0x37899c[_0x32c140(0x1b5)]=new a2_0x34d42c(_0x934d6d);else return a2_0x513a9d['reject'](new a2_0x5ef19c(_0x32c140(0x1d9)));}var _0x55215f=_0x2c9c37[_0x32c140(0x1c0)];if(!a2_0x41e71c(_0x55215f))return a2_0x513a9d[_0x32c140(0x1db)](new a2_0x5ef19c(_0x32c140(0x1b1)));_0x37899c[_0x32c140(0x1c7)]=_0x55215f[_0x32c140(0x1f8)]+0x1,_0x37899c['_height']=_0x55215f[_0x32c140(0x1c9)]+0x1,_0x37899c['_encoding']=_0x55215f['format']==='LERC'?a2_0xd8c68b[_0x32c140(0x202)]:a2_0xd8c68b[_0x32c140(0x1ab)],_0x37899c[_0x32c140(0x1ec)]=_0x55215f['lods']['length']-0x1;var _0x5f5150=_0x37899c[_0x32c140(0x1fb)]=_0x2c9c37[_0x32c140(0x1a6)][_0x32c140(0x201)]('Tilemap')!==-0x1;return _0x5f5150&&(_0x37899c[_0x32c140(0x207)]=new a2_0x45648b(_0x37899c[_0x32c140(0x1b5)],_0x37899c[_0x32c140(0x1ec)]),_0x37899c[_0x32c140(0x207)]['addAvailableTileRange'](0x0,0x0,0x0,_0x37899c[_0x32c140(0x1b5)][_0x32c140(0x1cb)](0x0),_0x37899c[_0x32c140(0x1b5)][_0x32c140(0x1b0)](0x0)),_0x37899c[_0x32c140(0x1ea)]=new a2_0x45648b(_0x37899c[_0x32c140(0x1b5)],_0x37899c[_0x32c140(0x1ec)])),_0x37899c[_0x32c140(0x1af)]=a2_0x52781e[_0x32c140(0x1e0)](_0x37899c[_0x32c140(0x1b5)][_0x32c140(0x1e1)],_0x37899c[_0x32c140(0x1c7)],_0x37899c[_0x32c140(0x1b5)][_0x32c140(0x1cb)](0x0)),_0x2c9c37[_0x32c140(0x1b6)]>0x1&&console[_0x32c140(0x1f7)](_0x32c140(0x1c3)),_0x37899c['_terrainDataStructure']={'elementMultiplier':0x1,'lowestEncodedHeight':_0x2c9c37['minValues'][0x0],'highestEncodedHeight':_0x2c9c37[_0x32c140(0x1ef)][0x0]},_0x37899c[_0x32c140(0x1d8)]=!![],!![];})['otherwise'](function(_0x1204be){var _0x31332b=_0x464ad3,_0x276ed9='An\x20error\x20occurred\x20while\x20accessing\x20'+_0x37899c['_resource'][_0x31332b(0x1ed)]+'.';return a2_0x51ceb0['handleError'](undefined,_0x37899c,_0x37899c['_errorEvent'],_0x276ed9),a2_0x513a9d[_0x31332b(0x1db)](_0x1204be);}),this[_0x464ad3(0x1cf)]=new a2_0x59c684();}Object[a2_0x51541e(0x1eb)](ArcGISTiledElevationTerrainProvider[a2_0x51541e(0x1c2)],{'errorEvent':{'get':function(){var _0xf5a1db=a2_0x51541e;return this[_0xf5a1db(0x1cf)];}},'credit':{'get':function(){var _0x2d12ac=a2_0x51541e;if(!this[_0x2d12ac(0x1bb)])throw new a2_0xe3e756('credit\x20must\x20not\x20be\x20called\x20before\x20ready\x20returns\x20true.');return this[_0x2d12ac(0x1d0)];}},'tilingScheme':{'get':function(){var _0x1e0857=a2_0x51541e;if(!this[_0x1e0857(0x1bb)])throw new a2_0xe3e756('tilingScheme\x20must\x20not\x20be\x20called\x20before\x20ready\x20returns\x20true.');return this['_tilingScheme'];}},'ready':{'get':function(){var _0x53dfd4=a2_0x51541e;return this[_0x53dfd4(0x1d8)];}},'readyPromise':{'get':function(){var _0x1141c0=a2_0x51541e;return this[_0x1141c0(0x1b9)];}},'hasWaterMask':{'get':function(){return![];}},'hasVertexNormals':{'get':function(){return![];}},'availability':{'get':function(){var _0x50c0b3=a2_0x51541e;if(!this['_ready'])throw new a2_0xe3e756(_0x50c0b3(0x1ee));return this[_0x50c0b3(0x207)];}}}),ArcGISTiledElevationTerrainProvider[a2_0x51541e(0x1c2)][a2_0x51541e(0x1aa)]=function(_0xc62230,_0x2f9b52,_0x16fe4c,_0x46bbe0){var _0x527533=a2_0x51541e;if(!this['_ready'])throw new a2_0xe3e756(_0x527533(0x1d1));var _0x10751e=this['_resource'][_0x527533(0x1b7)]({'url':_0x527533(0x1b4)+_0x16fe4c+'/'+_0x2f9b52+'/'+_0xc62230,'request':_0x46bbe0}),_0x3977f8=this[_0x527533(0x1fb)],_0x1c2b5e=a2_0x513a9d[_0x527533(0x1e3)](!![]),_0x5ee014;if(_0x3977f8&&!a2_0x41e71c(isTileAvailable(this,_0x16fe4c+0x1,_0xc62230*0x2,_0x2f9b52*0x2))){var _0x234bbe=requestAvailability(this,_0x16fe4c+0x1,_0xc62230*0x2,_0x2f9b52*0x2);_0x1c2b5e=_0x234bbe[_0x527533(0x1f0)],_0x5ee014=_0x234bbe['request'];}var _0xdc266b=_0x10751e[_0x527533(0x1f2)]();if(!a2_0x41e71c(_0xdc266b)||!a2_0x41e71c(_0x1c2b5e))return undefined;var _0x5a1f7c=this,_0x79b32=this[_0x527533(0x207)];return a2_0x513a9d[_0x527533(0x204)](_0xdc266b,_0x1c2b5e)['then'](function(_0x5f3a25){var _0x284e1d=_0x527533;return new a2_0x15eb4d({'buffer':_0x5f3a25[0x0],'width':_0x5a1f7c[_0x284e1d(0x1c7)],'height':_0x5a1f7c[_0x284e1d(0x1ac)],'childTileMask':_0x3977f8?_0x79b32[_0x284e1d(0x1d5)](_0x16fe4c,_0xc62230,_0x2f9b52):ALL_CHILDREN,'structure':_0x5a1f7c[_0x284e1d(0x1e6)],'encoding':_0x5a1f7c[_0x284e1d(0x1e8)]});})['otherwise'](function(_0x45aa5b){var _0x43411d=_0x527533;if(a2_0x41e71c(_0x5ee014)&&_0x5ee014[_0x43411d(0x1dd)]===a2_0x46eff6[_0x43411d(0x1ce)])return _0x46bbe0[_0x43411d(0x1ba)](),_0x46bbe0[_0x43411d(0x1fc)][_0x43411d(0x1f0)][_0x43411d(0x1a7)](function(){var _0x255fcd=_0x43411d;return _0x46bbe0[_0x255fcd(0x1dd)]=a2_0x46eff6[_0x255fcd(0x1ce)],a2_0x513a9d[_0x255fcd(0x1db)](_0x45aa5b);});return a2_0x513a9d[_0x43411d(0x1db)](_0x45aa5b);});};function isTileAvailable(_0x361aea,_0x21ddc7,_0x8dc3f6,_0x238077){var _0x2de071=a2_0x51541e;if(!_0x361aea[_0x2de071(0x1fb)])return undefined;var _0x1b6432=_0x361aea[_0x2de071(0x1ea)],_0x776fe7=_0x361aea[_0x2de071(0x207)];if(_0x21ddc7>_0x361aea[_0x2de071(0x1ec)])return![];if(_0x776fe7[_0x2de071(0x1a2)](_0x21ddc7,_0x8dc3f6,_0x238077))return!![];if(_0x1b6432['isTileAvailable'](_0x21ddc7,_0x8dc3f6,_0x238077))return![];return undefined;}function a2_0x510f(_0x32b4e2,_0x4ca458){var _0x2d1dad=a2_0x2d1d();return a2_0x510f=function(_0x510fef,_0x8b7563){_0x510fef=_0x510fef-0x1a2;var _0x1fbbec=_0x2d1dad[_0x510fef];return _0x1fbbec;},a2_0x510f(_0x32b4e2,_0x4ca458);}ArcGISTiledElevationTerrainProvider[a2_0x51541e(0x1c2)][a2_0x51541e(0x1e5)]=function(_0x23c89e){var _0x15de97=a2_0x51541e;if(!this['ready'])throw new a2_0xe3e756(_0x15de97(0x1a4));return this[_0x15de97(0x1af)]/(0x1<<_0x23c89e);},ArcGISTiledElevationTerrainProvider['prototype'][a2_0x51541e(0x1ad)]=function(_0x22f1d3,_0xdf2df4,_0x29636d){var _0x44f124=a2_0x51541e;if(!this[_0x44f124(0x1fb)])return undefined;var _0x81b4bb=isTileAvailable(this,_0x29636d,_0x22f1d3,_0xdf2df4);if(a2_0x41e71c(_0x81b4bb))return _0x81b4bb;return requestAvailability(this,_0x29636d,_0x22f1d3,_0xdf2df4),undefined;},ArcGISTiledElevationTerrainProvider[a2_0x51541e(0x1c2)][a2_0x51541e(0x1b8)]=function(_0x33af28,_0x3601bd,_0x3e25ec){return undefined;};function findRange(_0x5bed95,_0x21bf5d,_0x590640,_0xf1dd5a){var _0x3fd50e=a2_0x51541e,_0x49fc1e=_0x21bf5d-0x1,_0x48b0f3=_0x590640-0x1,_0x3f26aa=_0xf1dd5a[_0x5bed95['y']*_0x21bf5d+_0x5bed95['x']],_0x4b60f5=[],_0x26733e={'startX':_0x5bed95['x'],'startY':_0x5bed95['y'],'endX':0x0,'endY':0x0},_0x1de984=new a2_0x598c64(_0x5bed95['x']+0x1,_0x5bed95['y']+0x1),_0x255c34=![],_0x49d365=![];while(!(_0x255c34&&_0x49d365)){var _0x1a997c=_0x1de984['x'],_0x47c583=_0x49d365?_0x1de984['y']+0x1:_0x1de984['y'];if(!_0x255c34){for(var _0x543bfe=_0x5bed95['y'];_0x543bfe<_0x47c583;++_0x543bfe){if(_0xf1dd5a[_0x543bfe*_0x21bf5d+_0x1de984['x']]!==_0x3f26aa){_0x255c34=!![];break;}}if(_0x255c34)_0x4b60f5[_0x3fd50e(0x1b3)](new a2_0x598c64(_0x1de984['x'],_0x5bed95['y'])),--_0x1de984['x'],--_0x1a997c,_0x26733e['endX']=_0x1de984['x'];else _0x1de984['x']===_0x49fc1e?(_0x26733e[_0x3fd50e(0x1f5)]=_0x1de984['x'],_0x255c34=!![]):++_0x1de984['x'];}if(!_0x49d365){var _0x5a441e=_0x1de984['y']*_0x21bf5d;for(var _0x412f2b=_0x5bed95['x'];_0x412f2b<=_0x1a997c;++_0x412f2b){if(_0xf1dd5a[_0x5a441e+_0x412f2b]!==_0x3f26aa){_0x49d365=!![];break;}}if(_0x49d365)_0x4b60f5[_0x3fd50e(0x1b3)](new a2_0x598c64(_0x5bed95['x'],_0x1de984['y'])),--_0x1de984['y'],_0x26733e['endY']=_0x1de984['y'];else _0x1de984['y']===_0x48b0f3?(_0x26733e['endY']=_0x1de984['y'],_0x49d365=!![]):++_0x1de984['y'];}}return{'endingIndices':_0x4b60f5,'range':_0x26733e,'value':_0x3f26aa};}function computeAvailability(_0x493ffd,_0x44ef64,_0x3c1f47,_0x57234a,_0x45dd3c){var _0x54ad7b=a2_0x51541e,_0x5a974c=[],_0xf9fb23=_0x45dd3c[_0x54ad7b(0x1cd)](function(_0x2f0c0a){return _0x2f0c0a===_0x45dd3c[0x0];});if(_0xf9fb23)return _0x45dd3c[0x0]===0x1&&_0x5a974c[_0x54ad7b(0x1b3)]({'startX':_0x493ffd,'startY':_0x44ef64,'endX':_0x493ffd+_0x3c1f47-0x1,'endY':_0x44ef64+_0x57234a-0x1}),_0x5a974c;var _0x2e044b=[new a2_0x598c64(0x0,0x0)];while(_0x2e044b['length']>0x0){var _0x3f010c=_0x2e044b['pop'](),_0x498005=findRange(_0x3f010c,_0x3c1f47,_0x57234a,_0x45dd3c);if(_0x498005[_0x54ad7b(0x1e9)]===0x1){var _0x8f4ed=_0x498005[_0x54ad7b(0x1e7)];_0x8f4ed['startX']+=_0x493ffd,_0x8f4ed[_0x54ad7b(0x1f5)]+=_0x493ffd,_0x8f4ed[_0x54ad7b(0x1dc)]+=_0x44ef64,_0x8f4ed[_0x54ad7b(0x1da)]+=_0x44ef64,_0x5a974c['push'](_0x8f4ed);}var _0x5b8079=_0x498005[_0x54ad7b(0x1c8)];_0x5b8079[_0x54ad7b(0x1c6)]>0x0&&(_0x2e044b=_0x2e044b['concat'](_0x5b8079));}return _0x5a974c;}function requestAvailability(_0x49bdd5,_0x50824f,_0x2ffc08,_0x296fb1){var _0x309a4c=a2_0x51541e;if(!_0x49bdd5[_0x309a4c(0x1fb)])return{};var _0x21219f=Math[_0x309a4c(0x1fe)](_0x2ffc08/0x80)*0x80,_0x121fca=Math[_0x309a4c(0x1fe)](_0x296fb1/0x80)*0x80,_0x52c851=Math['min'](0x1<<_0x50824f,0x80),_0x240ae8=_0x309a4c(0x1c1)+_0x50824f+'/'+_0x121fca+'/'+_0x21219f+'/'+_0x52c851+'/'+_0x52c851,_0x30cfcf=_0x49bdd5[_0x309a4c(0x1be)];if(a2_0x41e71c(_0x30cfcf[_0x240ae8]))return _0x30cfcf[_0x240ae8];var _0xc08d25=new a2_0x5818a1({'throttle':![],'throttleByServer':!![],'type':a2_0x36b543[_0x309a4c(0x1de)]}),_0x1d3122=_0x49bdd5[_0x309a4c(0x1a9)][_0x309a4c(0x1b7)]({'url':_0x240ae8,'request':_0xc08d25}),_0x5bc481=_0x1d3122[_0x309a4c(0x203)]();if(!a2_0x41e71c(_0x5bc481))return{};return _0x5bc481=_0x5bc481[_0x309a4c(0x205)](function(_0x5a699b){var _0x5336c4=_0x309a4c,_0x249ec8=computeAvailability(_0x21219f,_0x121fca,_0x52c851,_0x52c851,_0x5a699b[_0x5336c4(0x1f6)]);_0x49bdd5['_tilesAvailablityLoaded'][_0x5336c4(0x1d3)](_0x50824f,_0x21219f,_0x121fca,_0x21219f+_0x52c851,_0x121fca+_0x52c851);var _0x49840b=_0x49bdd5[_0x5336c4(0x207)];for(var _0xdb0629=0x0;_0xdb0629<_0x249ec8[_0x5336c4(0x1c6)];++_0xdb0629){var _0x4f06ac=_0x249ec8[_0xdb0629];_0x49840b[_0x5336c4(0x1d3)](_0x50824f,_0x4f06ac['startX'],_0x4f06ac[_0x5336c4(0x1dc)],_0x4f06ac[_0x5336c4(0x1f5)],_0x4f06ac[_0x5336c4(0x1da)]);}return isTileAvailable(_0x49bdd5,_0x50824f,_0x2ffc08,_0x296fb1);}),_0x30cfcf[_0x240ae8]={'promise':_0x5bc481,'request':_0xc08d25},_0x5bc481=_0x5bc481[_0x309a4c(0x1a7)](function(_0x432e2b){return delete _0x30cfcf[_0x240ae8],_0x432e2b;}),{'promise':_0x5bc481,'request':_0xc08d25};}export default ArcGISTiledElevationTerrainProvider;