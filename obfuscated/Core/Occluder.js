var a167_0x48cba3=a167_0x423d;(function(_0x2a6a70,_0x8a9f78){var _0x26ceb8=a167_0x423d,_0x36d408=_0x2a6a70();while(!![]){try{var _0x5c0fb2=-parseInt(_0x26ceb8(0x17c))/0x1*(parseInt(_0x26ceb8(0x16f))/0x2)+-parseInt(_0x26ceb8(0x159))/0x3*(-parseInt(_0x26ceb8(0x161))/0x4)+-parseInt(_0x26ceb8(0x167))/0x5*(-parseInt(_0x26ceb8(0x17d))/0x6)+parseInt(_0x26ceb8(0x177))/0x7+-parseInt(_0x26ceb8(0x148))/0x8+-parseInt(_0x26ceb8(0x15e))/0x9+parseInt(_0x26ceb8(0x152))/0xa*(parseInt(_0x26ceb8(0x15c))/0xb);if(_0x5c0fb2===_0x8a9f78)break;else _0x36d408['push'](_0x36d408['shift']());}catch(_0x375f6c){_0x36d408['push'](_0x36d408['shift']());}}}(a167_0x32a4,0x9f17a));import a167_0x45bc99 from'./BoundingSphere.js';import a167_0xe8a0a5 from'./Cartesian3.js';import a167_0x207153 from'./defaultValue.js';import a167_0x5a8a5d from'./defined.js';import a167_0x4a25c1 from'./DeveloperError.js';function a167_0x423d(_0x220859,_0x54064f){var _0x32a4ab=a167_0x32a4();return a167_0x423d=function(_0x423db1,_0x486351){_0x423db1=_0x423db1-0x143;var _0x3f5ad8=_0x32a4ab[_0x423db1];return _0x3f5ad8;},a167_0x423d(_0x220859,_0x54064f);}function a167_0x32a4(){var _0x2474ab=['subsample','fromElements','5111238vvrLkP','_horizonPlanePosition','5957307dRzzYF','length','occluderBoundingSphere\x20is\x20required.','903272wdjbWp','equals','computeOccludeePoint','radius','EPSILON13','UNIT_X','15EiwbOb','ZERO','magnitudeSquared','center','PARTIAL','NONE','multiplyByScalar','occludeePosition\x20must\x20be\x20different\x20than\x20occluderBoundingSphere.center','7828vlEepS','_occluderRadius','cameraPosition','_horizonDistance','prototype','add','isPointVisible','subtract','3047646hIaMDT','_horizonToPlaneNormalDotProduct','computeOccludeePointFromRectangle','positions\x20must\x20contain\x20at\x20least\x20one\x20element','_rotationVector','191atKUaq','2422566CuEZws','camera\x20position\x20is\x20required.','sqrt','UNIT_Z','dot','MAX_VALUE','9434160wWzGsS','_cameraPosition','FULL','fromPoints','_occluderPosition','cross','positions\x20is\x20required.','magnitude','_horizonPlaneNormal','occludeeBS\x20is\x20required.','10gWWlGE','clone','WGS84','normalize','computeVisibility','defineProperties','_anyRotationVector','15sKDKMg'];a167_0x32a4=function(){return _0x2474ab;};return a167_0x32a4();}import a167_0x56bbc9 from'./Ellipsoid.js';import a167_0x365768 from'./Math.js';import a167_0x395d44 from'./Rectangle.js';import a167_0x3678ea from'./Visibility.js';function Occluder(_0x351f55,_0x525c9d){var _0x5a7a46=a167_0x423d;if(!a167_0x5a8a5d(_0x351f55))throw new a167_0x4a25c1(_0x5a7a46(0x160));if(!a167_0x5a8a5d(_0x525c9d))throw new a167_0x4a25c1('camera\x20position\x20is\x20required.');this[_0x5a7a46(0x14c)]=a167_0xe8a0a5[_0x5a7a46(0x153)](_0x351f55['center']),this[_0x5a7a46(0x170)]=_0x351f55['radius'],this['_horizonDistance']=0x0,this[_0x5a7a46(0x150)]=undefined,this[_0x5a7a46(0x15d)]=undefined,this[_0x5a7a46(0x149)]=undefined,this[_0x5a7a46(0x171)]=_0x525c9d;}var scratchCartesian3=new a167_0xe8a0a5();Object[a167_0x48cba3(0x157)](Occluder[a167_0x48cba3(0x173)],{'position':{'get':function(){var _0x51cf39=a167_0x48cba3;return this[_0x51cf39(0x14c)];}},'radius':{'get':function(){var _0x386385=a167_0x48cba3;return this[_0x386385(0x170)];}},'cameraPosition':{'set':function(_0x530192){var _0x2c11c6=a167_0x48cba3;if(!a167_0x5a8a5d(_0x530192))throw new a167_0x4a25c1('cameraPosition\x20is\x20required.');_0x530192=a167_0xe8a0a5[_0x2c11c6(0x153)](_0x530192,this[_0x2c11c6(0x149)]);var _0x2d2b30=a167_0xe8a0a5['subtract'](this[_0x2c11c6(0x14c)],_0x530192,scratchCartesian3),_0x569a08=a167_0xe8a0a5[_0x2c11c6(0x169)](_0x2d2b30),_0xe5e2=this[_0x2c11c6(0x170)]*this[_0x2c11c6(0x170)],_0x27f84e,_0x4ed014,_0x24ec3c;if(_0x569a08>_0xe5e2){_0x27f84e=Math[_0x2c11c6(0x144)](_0x569a08-_0xe5e2),_0x569a08=0x1/Math[_0x2c11c6(0x144)](_0x569a08),_0x4ed014=a167_0xe8a0a5[_0x2c11c6(0x16d)](_0x2d2b30,_0x569a08,scratchCartesian3);var _0x3fb6f5=_0x27f84e*_0x27f84e*_0x569a08;_0x24ec3c=a167_0xe8a0a5[_0x2c11c6(0x174)](_0x530192,a167_0xe8a0a5[_0x2c11c6(0x16d)](_0x4ed014,_0x3fb6f5,scratchCartesian3),scratchCartesian3);}else _0x27f84e=Number[_0x2c11c6(0x147)];this['_horizonDistance']=_0x27f84e,this[_0x2c11c6(0x150)]=_0x4ed014,this['_horizonPlanePosition']=_0x24ec3c,this[_0x2c11c6(0x149)]=_0x530192;}}}),Occluder['fromBoundingSphere']=function(_0x4022bf,_0x5c90a8,_0x18fc78){var _0x2562fe=a167_0x48cba3;if(!a167_0x5a8a5d(_0x4022bf))throw new a167_0x4a25c1(_0x2562fe(0x160));if(!a167_0x5a8a5d(_0x5c90a8))throw new a167_0x4a25c1(_0x2562fe(0x143));if(!a167_0x5a8a5d(_0x18fc78))return new Occluder(_0x4022bf,_0x5c90a8);return a167_0xe8a0a5[_0x2562fe(0x153)](_0x4022bf['center'],_0x18fc78[_0x2562fe(0x14c)]),_0x18fc78[_0x2562fe(0x170)]=_0x4022bf[_0x2562fe(0x164)],_0x18fc78[_0x2562fe(0x171)]=_0x5c90a8,_0x18fc78;};var tempVecScratch=new a167_0xe8a0a5();Occluder[a167_0x48cba3(0x173)][a167_0x48cba3(0x175)]=function(_0x42cbb1){var _0x10e000=a167_0x48cba3;if(this[_0x10e000(0x172)]!==Number['MAX_VALUE']){var _0x3c8570=a167_0xe8a0a5[_0x10e000(0x176)](_0x42cbb1,this[_0x10e000(0x14c)],tempVecScratch),_0x3c1ea0=this['_occluderRadius'];_0x3c1ea0=a167_0xe8a0a5[_0x10e000(0x169)](_0x3c8570)-_0x3c1ea0*_0x3c1ea0;if(_0x3c1ea0>0x0)return _0x3c1ea0=Math[_0x10e000(0x144)](_0x3c1ea0)+this[_0x10e000(0x172)],_0x3c8570=a167_0xe8a0a5[_0x10e000(0x176)](_0x42cbb1,this['_cameraPosition'],_0x3c8570),_0x3c1ea0*_0x3c1ea0>a167_0xe8a0a5[_0x10e000(0x169)](_0x3c8570);}return![];};var occludeePositionScratch=new a167_0xe8a0a5();Occluder[a167_0x48cba3(0x173)]['isBoundingSphereVisible']=function(_0xd22773){var _0x25baaf=a167_0x48cba3,_0x5846a6=a167_0xe8a0a5[_0x25baaf(0x153)](_0xd22773[_0x25baaf(0x16a)],occludeePositionScratch),_0x24a0c4=_0xd22773[_0x25baaf(0x164)];if(this['_horizonDistance']!==Number[_0x25baaf(0x147)]){var _0x14d561=a167_0xe8a0a5[_0x25baaf(0x176)](_0x5846a6,this['_occluderPosition'],tempVecScratch),_0x28babd=this['_occluderRadius']-_0x24a0c4;_0x28babd=a167_0xe8a0a5[_0x25baaf(0x169)](_0x14d561)-_0x28babd*_0x28babd;if(_0x24a0c4<this[_0x25baaf(0x170)]){if(_0x28babd>0x0)return _0x28babd=Math[_0x25baaf(0x144)](_0x28babd)+this[_0x25baaf(0x172)],_0x14d561=a167_0xe8a0a5[_0x25baaf(0x176)](_0x5846a6,this[_0x25baaf(0x149)],_0x14d561),_0x28babd*_0x28babd+_0x24a0c4*_0x24a0c4>a167_0xe8a0a5['magnitudeSquared'](_0x14d561);return![];}if(_0x28babd>0x0){_0x14d561=a167_0xe8a0a5[_0x25baaf(0x176)](_0x5846a6,this[_0x25baaf(0x149)],_0x14d561);var _0x579bc6=a167_0xe8a0a5[_0x25baaf(0x169)](_0x14d561),_0x55868f=this[_0x25baaf(0x170)]*this[_0x25baaf(0x170)],_0x564c37=_0x24a0c4*_0x24a0c4;if((this[_0x25baaf(0x172)]*this[_0x25baaf(0x172)]+_0x55868f)*_0x564c37>_0x579bc6*_0x55868f)return!![];return _0x28babd=Math[_0x25baaf(0x144)](_0x28babd)+this[_0x25baaf(0x172)],_0x28babd*_0x28babd+_0x564c37>_0x579bc6;}return!![];}return![];};var tempScratch=new a167_0xe8a0a5();Occluder[a167_0x48cba3(0x173)][a167_0x48cba3(0x156)]=function(_0x5ed1ca){var _0x1ebe2e=a167_0x48cba3;if(!a167_0x5a8a5d(_0x5ed1ca))throw new a167_0x4a25c1(_0x1ebe2e(0x151));var _0xb6813b=a167_0xe8a0a5[_0x1ebe2e(0x153)](_0x5ed1ca[_0x1ebe2e(0x16a)]),_0x5f23c7=_0x5ed1ca[_0x1ebe2e(0x164)];if(_0x5f23c7>this['_occluderRadius'])return a167_0x3678ea['FULL'];if(this[_0x1ebe2e(0x172)]!==Number[_0x1ebe2e(0x147)]){var _0x12062f=a167_0xe8a0a5['subtract'](_0xb6813b,this[_0x1ebe2e(0x14c)],tempScratch),_0x1cebd6=this[_0x1ebe2e(0x170)]-_0x5f23c7,_0x1edc6f=a167_0xe8a0a5['magnitudeSquared'](_0x12062f);_0x1cebd6=_0x1edc6f-_0x1cebd6*_0x1cebd6;if(_0x1cebd6>0x0){_0x1cebd6=Math['sqrt'](_0x1cebd6)+this[_0x1ebe2e(0x172)],_0x12062f=a167_0xe8a0a5[_0x1ebe2e(0x176)](_0xb6813b,this[_0x1ebe2e(0x149)],_0x12062f);var _0x4156b5=a167_0xe8a0a5['magnitudeSquared'](_0x12062f);if(_0x1cebd6*_0x1cebd6+_0x5f23c7*_0x5f23c7<_0x4156b5)return a167_0x3678ea[_0x1ebe2e(0x16c)];_0x1cebd6=this[_0x1ebe2e(0x170)]+_0x5f23c7,_0x1cebd6=_0x1edc6f-_0x1cebd6*_0x1cebd6;if(_0x1cebd6>0x0)return _0x1cebd6=Math[_0x1ebe2e(0x144)](_0x1cebd6)+this['_horizonDistance'],_0x4156b5<_0x1cebd6*_0x1cebd6+_0x5f23c7*_0x5f23c7?a167_0x3678ea['FULL']:a167_0x3678ea[_0x1ebe2e(0x16b)];return _0x12062f=a167_0xe8a0a5[_0x1ebe2e(0x176)](_0xb6813b,this['_horizonPlanePosition'],_0x12062f),a167_0xe8a0a5[_0x1ebe2e(0x146)](_0x12062f,this[_0x1ebe2e(0x150)])>-_0x5f23c7?a167_0x3678ea[_0x1ebe2e(0x16b)]:a167_0x3678ea[_0x1ebe2e(0x14a)];}}return a167_0x3678ea[_0x1ebe2e(0x16c)];};var occludeePointScratch=new a167_0xe8a0a5();Occluder[a167_0x48cba3(0x163)]=function(_0x286d28,_0x365ec6,_0x3d1261){var _0x2f596e=a167_0x48cba3;if(!a167_0x5a8a5d(_0x286d28))throw new a167_0x4a25c1(_0x2f596e(0x160));if(!a167_0x5a8a5d(_0x3d1261))throw new a167_0x4a25c1(_0x2f596e(0x14e));if(_0x3d1261[_0x2f596e(0x15f)]===0x0)throw new a167_0x4a25c1(_0x2f596e(0x17a));var _0x1daae1=a167_0xe8a0a5['clone'](_0x365ec6),_0x36e742=a167_0xe8a0a5[_0x2f596e(0x153)](_0x286d28[_0x2f596e(0x16a)]),_0x5b4b92=_0x286d28['radius'],_0x29d056=_0x3d1261[_0x2f596e(0x15f)];if(a167_0xe8a0a5[_0x2f596e(0x162)](_0x36e742,_0x365ec6))throw new a167_0x4a25c1(_0x2f596e(0x16e));var _0xb68dae=a167_0xe8a0a5[_0x2f596e(0x155)](a167_0xe8a0a5[_0x2f596e(0x176)](_0x1daae1,_0x36e742,occludeePointScratch),occludeePointScratch),_0x34ccd1=-a167_0xe8a0a5[_0x2f596e(0x146)](_0xb68dae,_0x36e742),_0xa18e65=Occluder[_0x2f596e(0x158)](_0x36e742,_0xb68dae,_0x34ccd1),_0x2e9592=Occluder[_0x2f596e(0x178)](_0x286d28,_0xb68dae,_0x34ccd1,_0xa18e65,_0x3d1261[0x0]);if(!_0x2e9592)return undefined;var _0xd027ef;for(var _0x3212e2=0x1;_0x3212e2<_0x29d056;++_0x3212e2){_0xd027ef=Occluder[_0x2f596e(0x178)](_0x286d28,_0xb68dae,_0x34ccd1,_0xa18e65,_0x3d1261[_0x3212e2]);if(!_0xd027ef)return undefined;_0xd027ef<_0x2e9592&&(_0x2e9592=_0xd027ef);}if(_0x2e9592<0.0017453283658983088)return undefined;var _0x52a55d=_0x5b4b92/_0x2e9592;return a167_0xe8a0a5[_0x2f596e(0x174)](_0x36e742,a167_0xe8a0a5[_0x2f596e(0x16d)](_0xb68dae,_0x52a55d,occludeePointScratch),occludeePointScratch);};var computeOccludeePointFromRectangleScratch=[];Occluder[a167_0x48cba3(0x179)]=function(_0x551065,_0xb0df8e){var _0x156a8=a167_0x48cba3;if(!a167_0x5a8a5d(_0x551065))throw new a167_0x4a25c1('rectangle\x20is\x20required.');_0xb0df8e=a167_0x207153(_0xb0df8e,a167_0x56bbc9[_0x156a8(0x154)]);var _0x5b5c6a=a167_0x395d44[_0x156a8(0x15a)](_0x551065,_0xb0df8e,0x0,computeOccludeePointFromRectangleScratch),_0x266d4c=a167_0x45bc99[_0x156a8(0x14b)](_0x5b5c6a),_0x331d6e=a167_0xe8a0a5[_0x156a8(0x168)];if(!a167_0xe8a0a5[_0x156a8(0x162)](_0x331d6e,_0x266d4c['center']))return Occluder[_0x156a8(0x163)](new a167_0x45bc99(_0x331d6e,_0xb0df8e['minimumRadius']),_0x266d4c[_0x156a8(0x16a)],_0x5b5c6a);return undefined;};var tempVec0Scratch=new a167_0xe8a0a5();Occluder[a167_0x48cba3(0x158)]=function(_0x426f90,_0x5066f9,_0x3b4205){var _0x1699be=a167_0x48cba3,_0x5c5090=a167_0xe8a0a5['abs'](_0x5066f9,tempVec0Scratch),_0x18370e=_0x5c5090['x']>_0x5c5090['y']?0x0:0x1;(_0x18370e===0x0&&_0x5c5090['z']>_0x5c5090['x']||_0x18370e===0x1&&_0x5c5090['z']>_0x5c5090['y'])&&(_0x18370e=0x2);var _0x341e93=new a167_0xe8a0a5(),_0x5e7e5d;if(_0x18370e===0x0)_0x5c5090['x']=_0x426f90['x'],_0x5c5090['y']=_0x426f90['y']+0x1,_0x5c5090['z']=_0x426f90['z']+0x1,_0x5e7e5d=a167_0xe8a0a5[_0x1699be(0x166)];else _0x18370e===0x1?(_0x5c5090['x']=_0x426f90['x']+0x1,_0x5c5090['y']=_0x426f90['y'],_0x5c5090['z']=_0x426f90['z']+0x1,_0x5e7e5d=a167_0xe8a0a5['UNIT_Y']):(_0x5c5090['x']=_0x426f90['x']+0x1,_0x5c5090['y']=_0x426f90['y']+0x1,_0x5c5090['z']=_0x426f90['z'],_0x5e7e5d=a167_0xe8a0a5[_0x1699be(0x145)]);var _0x419766=(a167_0xe8a0a5['dot'](_0x5066f9,_0x5c5090)+_0x3b4205)/-a167_0xe8a0a5[_0x1699be(0x146)](_0x5066f9,_0x5e7e5d);return a167_0xe8a0a5['normalize'](a167_0xe8a0a5[_0x1699be(0x176)](a167_0xe8a0a5['add'](_0x5c5090,a167_0xe8a0a5[_0x1699be(0x16d)](_0x5e7e5d,_0x419766,_0x341e93),_0x5c5090),_0x426f90,_0x5c5090),_0x5c5090);};var posDirectionScratch=new a167_0xe8a0a5();Occluder[a167_0x48cba3(0x17b)]=function(_0x322738,_0x58a7e6,_0x5de37b,_0x37848f,_0xe4d46){var _0x153a46=a167_0x48cba3,_0x1bb556=a167_0xe8a0a5[_0x153a46(0x176)](_0x37848f,_0x322738,posDirectionScratch);_0x1bb556=a167_0xe8a0a5[_0x153a46(0x155)](_0x1bb556,_0x1bb556);if(a167_0xe8a0a5[_0x153a46(0x146)](_0x58a7e6,_0x1bb556)<0.9999999847691291){var _0x1025f9=a167_0xe8a0a5[_0x153a46(0x14d)](_0x58a7e6,_0x1bb556,_0x1bb556),_0x209c0e=a167_0xe8a0a5[_0x153a46(0x14f)](_0x1025f9);if(_0x209c0e>a167_0x365768[_0x153a46(0x165)])return a167_0xe8a0a5['normalize'](_0x1025f9,new a167_0xe8a0a5());}return _0xe4d46;};var posScratch1=new a167_0xe8a0a5(),occluerPosScratch=new a167_0xe8a0a5(),posScratch2=new a167_0xe8a0a5(),horizonPlanePosScratch=new a167_0xe8a0a5();Occluder['_horizonToPlaneNormalDotProduct']=function(_0x3886f9,_0x35bbd4,_0xb4c21a,_0xbd32b3,_0x6ad46f){var _0x541642=a167_0x48cba3,_0xe56871=a167_0xe8a0a5[_0x541642(0x153)](_0x6ad46f,posScratch1),_0x21496e=a167_0xe8a0a5[_0x541642(0x153)](_0x3886f9[_0x541642(0x16a)],occluerPosScratch),_0x1a1867=_0x3886f9[_0x541642(0x164)],_0x2a2002=a167_0xe8a0a5[_0x541642(0x176)](_0x21496e,_0xe56871,posScratch2),_0x1a43b9=a167_0xe8a0a5[_0x541642(0x169)](_0x2a2002),_0xb01c89=_0x1a1867*_0x1a1867;if(_0x1a43b9<_0xb01c89)return![];var _0x2b8695=_0x1a43b9-_0xb01c89,_0x4e43c3=Math[_0x541642(0x144)](_0x2b8695),_0x50513f=Math['sqrt'](_0x1a43b9),_0x4a347d=0x1/_0x50513f,_0x5ee712=_0x4e43c3*_0x4a347d,_0x4c394f=_0x5ee712*_0x4e43c3;_0x2a2002=a167_0xe8a0a5[_0x541642(0x155)](_0x2a2002,_0x2a2002);var _0x21d3b0=a167_0xe8a0a5[_0x541642(0x174)](_0xe56871,a167_0xe8a0a5[_0x541642(0x16d)](_0x2a2002,_0x4c394f,horizonPlanePosScratch),horizonPlanePosScratch),_0x29a41d=Math[_0x541642(0x144)](_0x2b8695-_0x4c394f*_0x4c394f),_0x2bc914=this[_0x541642(0x17b)](_0x21496e,_0x35bbd4,_0xb4c21a,_0xe56871,_0xbd32b3),_0x11acae=a167_0xe8a0a5[_0x541642(0x15b)](_0x2bc914['x']*_0x2bc914['x']*_0x2a2002['x']+(_0x2bc914['x']*_0x2bc914['y']-_0x2bc914['z'])*_0x2a2002['y']+(_0x2bc914['x']*_0x2bc914['z']+_0x2bc914['y'])*_0x2a2002['z'],(_0x2bc914['x']*_0x2bc914['y']+_0x2bc914['z'])*_0x2a2002['x']+_0x2bc914['y']*_0x2bc914['y']*_0x2a2002['y']+(_0x2bc914['y']*_0x2bc914['z']-_0x2bc914['x'])*_0x2a2002['z'],(_0x2bc914['x']*_0x2bc914['z']-_0x2bc914['y'])*_0x2a2002['x']+(_0x2bc914['y']*_0x2bc914['z']+_0x2bc914['x'])*_0x2a2002['y']+_0x2bc914['z']*_0x2bc914['z']*_0x2a2002['z'],posScratch1);_0x11acae=a167_0xe8a0a5['normalize'](_0x11acae,_0x11acae);var _0x32b8ac=a167_0xe8a0a5[_0x541642(0x16d)](_0x11acae,_0x29a41d,posScratch1);_0x2bc914=a167_0xe8a0a5[_0x541642(0x155)](a167_0xe8a0a5['subtract'](a167_0xe8a0a5[_0x541642(0x174)](_0x21d3b0,_0x32b8ac,posScratch2),_0x21496e,posScratch2),posScratch2);var _0xa83b31=a167_0xe8a0a5[_0x541642(0x146)](_0x35bbd4,_0x2bc914);_0x2bc914=a167_0xe8a0a5['normalize'](a167_0xe8a0a5[_0x541642(0x176)](a167_0xe8a0a5[_0x541642(0x176)](_0x21d3b0,_0x32b8ac,_0x2bc914),_0x21496e,_0x2bc914),_0x2bc914);var _0x25fb3a=a167_0xe8a0a5[_0x541642(0x146)](_0x35bbd4,_0x2bc914);return _0xa83b31<_0x25fb3a?_0xa83b31:_0x25fb3a;};export default Occluder;