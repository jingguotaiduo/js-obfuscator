var a241_0x30f483=a241_0x1570;(function(_0x1b3693,_0x4152ed){var _0x3977b1=a241_0x1570,_0x1a4920=_0x1b3693();while(!![]){try{var _0x17d48e=-parseInt(_0x3977b1(0x12f))/0x1*(parseInt(_0x3977b1(0x14a))/0x2)+parseInt(_0x3977b1(0x129))/0x3*(parseInt(_0x3977b1(0x139))/0x4)+parseInt(_0x3977b1(0x13d))/0x5*(-parseInt(_0x3977b1(0x12d))/0x6)+parseInt(_0x3977b1(0x145))/0x7+parseInt(_0x3977b1(0x14d))/0x8+-parseInt(_0x3977b1(0x137))/0x9+parseInt(_0x3977b1(0x14f))/0xa;if(_0x17d48e===_0x4152ed)break;else _0x1a4920['push'](_0x1a4920['shift']());}catch(_0x4dd790){_0x1a4920['push'](_0x1a4920['shift']());}}}(a241_0x40ca,0x1c0b9));import a241_0x51d244 from'./binarySearch.js';import a241_0x2e8667 from'./Cartographic.js';import a241_0x125c89 from'./defined.js';import a241_0x20e266 from'./Rectangle.js';function TileAvailability(_0xd0bb7d,_0x42c707){var _0x450b09=a241_0x1570;this['_tilingScheme']=_0xd0bb7d,this['_maximumLevel']=_0x42c707,this[_0x450b09(0x134)]=[];}var rectangleScratch=new a241_0x20e266();function findNode(_0x790a45,_0x3a0034,_0x41bff2,_0x2ae3ae){var _0x1f5651=a241_0x1570,_0x3e5ac1=_0x2ae3ae[_0x1f5651(0x131)];for(var _0x77b245=0x0;_0x77b245<_0x3e5ac1;++_0x77b245){var _0x532833=_0x2ae3ae[_0x77b245];if(_0x532833['x']===_0x3a0034&&_0x532833['y']===_0x41bff2&&_0x532833['level']===_0x790a45)return!![];}return![];}TileAvailability[a241_0x30f483(0x12c)][a241_0x30f483(0x135)]=function(_0x531bf0,_0x3dc8cf,_0x3f27c1,_0x26b79f,_0x561a31){var _0x3b57a4=a241_0x30f483,_0x5f4ba2=this[_0x3b57a4(0x146)],_0x262d01=this[_0x3b57a4(0x134)];if(_0x531bf0===0x0)for(var _0x773ea=_0x3f27c1;_0x773ea<=_0x561a31;++_0x773ea){for(var _0x2f9e2e=_0x3dc8cf;_0x2f9e2e<=_0x26b79f;++_0x2f9e2e){!findNode(_0x531bf0,_0x2f9e2e,_0x773ea,_0x262d01)&&_0x262d01[_0x3b57a4(0x142)](new QuadtreeNode(_0x5f4ba2,undefined,0x0,_0x2f9e2e,_0x773ea));}}_0x5f4ba2[_0x3b57a4(0x127)](_0x3dc8cf,_0x3f27c1,_0x531bf0,rectangleScratch);var _0x829aa6=rectangleScratch[_0x3b57a4(0x13b)],_0x5e41d4=rectangleScratch[_0x3b57a4(0x132)];_0x5f4ba2[_0x3b57a4(0x127)](_0x26b79f,_0x561a31,_0x531bf0,rectangleScratch);var _0xbc63c2=rectangleScratch[_0x3b57a4(0x13a)],_0x44c31b=rectangleScratch['south'],_0x571cdb=new RectangleWithLevel(_0x531bf0,_0x829aa6,_0x44c31b,_0xbc63c2,_0x5e41d4);for(var _0x166879=0x0;_0x166879<_0x262d01[_0x3b57a4(0x131)];++_0x166879){var _0x5e7c5c=_0x262d01[_0x166879];rectanglesOverlap(_0x5e7c5c['extent'],_0x571cdb)&&putRectangleInQuadtree(this[_0x3b57a4(0x138)],_0x5e7c5c,_0x571cdb);}},TileAvailability[a241_0x30f483(0x12c)][a241_0x30f483(0x14b)]=function(_0x56c4e4){var _0x389904=a241_0x30f483,_0x4e4adb;for(var _0x362bae=0x0;_0x362bae<this['_rootNodes'][_0x389904(0x131)];++_0x362bae){var _0x41d6e4=this[_0x389904(0x134)][_0x362bae];if(rectangleContainsPosition(_0x41d6e4[_0x389904(0x149)],_0x56c4e4)){_0x4e4adb=_0x41d6e4;break;}}if(!a241_0x125c89(_0x4e4adb))return-0x1;return findMaxLevelFromNode(undefined,_0x4e4adb,_0x56c4e4);};var rectanglesScratch=[],remainingToCoverByLevelScratch=[],westScratch=new a241_0x20e266(),eastScratch=new a241_0x20e266();TileAvailability[a241_0x30f483(0x12c)][a241_0x30f483(0x14e)]=function(_0x24fb5f){var _0x140da6=a241_0x30f483,_0x17653f=rectanglesScratch;_0x17653f[_0x140da6(0x131)]=0x0;_0x24fb5f[_0x140da6(0x13a)]<_0x24fb5f[_0x140da6(0x13b)]?(_0x17653f[_0x140da6(0x142)](a241_0x20e266['fromRadians'](-Math['PI'],_0x24fb5f[_0x140da6(0x144)],_0x24fb5f['east'],_0x24fb5f[_0x140da6(0x132)],westScratch)),_0x17653f['push'](a241_0x20e266[_0x140da6(0x143)](_0x24fb5f['west'],_0x24fb5f[_0x140da6(0x144)],Math['PI'],_0x24fb5f[_0x140da6(0x132)],eastScratch))):_0x17653f[_0x140da6(0x142)](_0x24fb5f);var _0x2c0e72=remainingToCoverByLevelScratch;_0x2c0e72['length']=0x0;var _0x4a7067;for(_0x4a7067=0x0;_0x4a7067<this['_rootNodes']['length'];++_0x4a7067){updateCoverageWithNode(_0x2c0e72,this[_0x140da6(0x134)][_0x4a7067],_0x17653f);}for(_0x4a7067=_0x2c0e72[_0x140da6(0x131)]-0x1;_0x4a7067>=0x0;--_0x4a7067){if(a241_0x125c89(_0x2c0e72[_0x4a7067])&&_0x2c0e72[_0x4a7067]['length']===0x0)return _0x4a7067;}return 0x0;};var cartographicScratch=new a241_0x2e8667();TileAvailability[a241_0x30f483(0x12c)]['isTileAvailable']=function(_0x13ccf9,_0x50ee54,_0x27ac0b){var _0x232f1a=a241_0x30f483,_0x54d7e3=this['_tilingScheme']['tileXYToRectangle'](_0x50ee54,_0x27ac0b,_0x13ccf9,rectangleScratch);return a241_0x20e266[_0x232f1a(0x148)](_0x54d7e3,cartographicScratch),this['computeMaximumLevelAtPosition'](cartographicScratch)>=_0x13ccf9;},TileAvailability[a241_0x30f483(0x12c)][a241_0x30f483(0x140)]=function(_0x86e1ee,_0x56a33e,_0x35a320){var _0x2f3408=a241_0x30f483,_0x5d8084=_0x86e1ee+0x1;if(_0x5d8084>=this[_0x2f3408(0x138)])return 0x0;var _0x5898f8=0x0;return _0x5898f8|=this[_0x2f3408(0x14c)](_0x5d8084,0x2*_0x56a33e,0x2*_0x35a320+0x1)?0x1:0x0,_0x5898f8|=this[_0x2f3408(0x14c)](_0x5d8084,0x2*_0x56a33e+0x1,0x2*_0x35a320+0x1)?0x2:0x0,_0x5898f8|=this[_0x2f3408(0x14c)](_0x5d8084,0x2*_0x56a33e,0x2*_0x35a320)?0x4:0x0,_0x5898f8|=this['isTileAvailable'](_0x5d8084,0x2*_0x56a33e+0x1,0x2*_0x35a320)?0x8:0x0,_0x5898f8;};function a241_0x1570(_0x1bfa79,_0x104810){var _0x40ca30=a241_0x40ca();return a241_0x1570=function(_0x1570f4,_0x3a5180){_0x1570f4=_0x1570f4-0x126;var _0x1745ed=_0x40ca30[_0x1570f4];return _0x1745ed;},a241_0x1570(_0x1bfa79,_0x104810);}function QuadtreeNode(_0x400dcc,_0xdda3d0,_0xd83119,_0x5b3851,_0x19fbb9){var _0x3fe986=a241_0x30f483;this[_0x3fe986(0x126)]=_0x400dcc,this['parent']=_0xdda3d0,this['level']=_0xd83119,this['x']=_0x5b3851,this['y']=_0x19fbb9,this[_0x3fe986(0x149)]=_0x400dcc['tileXYToRectangle'](_0x5b3851,_0x19fbb9,_0xd83119),this[_0x3fe986(0x130)]=[],this[_0x3fe986(0x136)]=undefined,this[_0x3fe986(0x147)]=undefined,this['_nw']=undefined,this['_ne']=undefined;}Object[a241_0x30f483(0x12a)](QuadtreeNode[a241_0x30f483(0x12c)],{'nw':{'get':function(){var _0x281803=a241_0x30f483;return!this[_0x281803(0x128)]&&(this['_nw']=new QuadtreeNode(this[_0x281803(0x126)],this,this[_0x281803(0x13e)]+0x1,this['x']*0x2,this['y']*0x2)),this['_nw'];}},'ne':{'get':function(){var _0x493cd2=a241_0x30f483;return!this['_ne']&&(this['_ne']=new QuadtreeNode(this[_0x493cd2(0x126)],this,this[_0x493cd2(0x13e)]+0x1,this['x']*0x2+0x1,this['y']*0x2)),this[_0x493cd2(0x133)];}},'sw':{'get':function(){var _0x5b535a=a241_0x30f483;return!this['_sw']&&(this[_0x5b535a(0x136)]=new QuadtreeNode(this[_0x5b535a(0x126)],this,this['level']+0x1,this['x']*0x2,this['y']*0x2+0x1)),this['_sw'];}},'se':{'get':function(){var _0x1d865c=a241_0x30f483;return!this[_0x1d865c(0x147)]&&(this['_se']=new QuadtreeNode(this[_0x1d865c(0x126)],this,this[_0x1d865c(0x13e)]+0x1,this['x']*0x2+0x1,this['y']*0x2+0x1)),this[_0x1d865c(0x147)];}}});function RectangleWithLevel(_0x159f56,_0x3ad370,_0x16feb0,_0x3692f5,_0x4098a4){var _0x29362e=a241_0x30f483;this[_0x29362e(0x13e)]=_0x159f56,this['west']=_0x3ad370,this[_0x29362e(0x144)]=_0x16feb0,this[_0x29362e(0x13a)]=_0x3692f5,this['north']=_0x4098a4;}function rectanglesOverlap(_0x550d15,_0x5acc88){var _0x5d9776=a241_0x30f483,_0x4c8db5=Math[_0x5d9776(0x141)](_0x550d15[_0x5d9776(0x13b)],_0x5acc88[_0x5d9776(0x13b)]),_0x5dc977=Math['max'](_0x550d15[_0x5d9776(0x144)],_0x5acc88[_0x5d9776(0x144)]),_0x69f76=Math['min'](_0x550d15[_0x5d9776(0x13a)],_0x5acc88[_0x5d9776(0x13a)]),_0x3d86e6=Math['min'](_0x550d15['north'],_0x5acc88['north']);return _0x5dc977<_0x3d86e6&&_0x4c8db5<_0x69f76;}function putRectangleInQuadtree(_0x3aac4f,_0x22aa8b,_0x414c67){var _0x2aac21=a241_0x30f483;while(_0x22aa8b['level']<_0x3aac4f){if(rectangleFullyContainsRectangle(_0x22aa8b['nw'][_0x2aac21(0x149)],_0x414c67))_0x22aa8b=_0x22aa8b['nw'];else{if(rectangleFullyContainsRectangle(_0x22aa8b['ne'][_0x2aac21(0x149)],_0x414c67))_0x22aa8b=_0x22aa8b['ne'];else{if(rectangleFullyContainsRectangle(_0x22aa8b['sw']['extent'],_0x414c67))_0x22aa8b=_0x22aa8b['sw'];else{if(rectangleFullyContainsRectangle(_0x22aa8b['se'][_0x2aac21(0x149)],_0x414c67))_0x22aa8b=_0x22aa8b['se'];else break;}}}}if(_0x22aa8b[_0x2aac21(0x130)][_0x2aac21(0x131)]===0x0||_0x22aa8b[_0x2aac21(0x130)][_0x22aa8b[_0x2aac21(0x130)][_0x2aac21(0x131)]-0x1]['level']<=_0x414c67[_0x2aac21(0x13e)])_0x22aa8b[_0x2aac21(0x130)]['push'](_0x414c67);else{var _0x2847e5=a241_0x51d244(_0x22aa8b['rectangles'],_0x414c67['level'],rectangleLevelComparator);_0x2847e5<0x0&&(_0x2847e5=~_0x2847e5),_0x22aa8b[_0x2aac21(0x130)][_0x2aac21(0x150)](_0x2847e5,0x0,_0x414c67);}}function rectangleLevelComparator(_0x80138a,_0x37de0c){var _0x35fe56=a241_0x30f483;return _0x80138a[_0x35fe56(0x13e)]-_0x37de0c;}function rectangleFullyContainsRectangle(_0x33fd41,_0x4950bc){var _0x43be69=a241_0x30f483;return _0x4950bc['west']>=_0x33fd41[_0x43be69(0x13b)]&&_0x4950bc[_0x43be69(0x13a)]<=_0x33fd41[_0x43be69(0x13a)]&&_0x4950bc[_0x43be69(0x144)]>=_0x33fd41[_0x43be69(0x144)]&&_0x4950bc[_0x43be69(0x132)]<=_0x33fd41[_0x43be69(0x132)];}function rectangleContainsPosition(_0x4759b2,_0x5621ee){var _0x542813=a241_0x30f483;return _0x5621ee[_0x542813(0x13c)]>=_0x4759b2[_0x542813(0x13b)]&&_0x5621ee[_0x542813(0x13c)]<=_0x4759b2[_0x542813(0x13a)]&&_0x5621ee[_0x542813(0x12e)]>=_0x4759b2[_0x542813(0x144)]&&_0x5621ee[_0x542813(0x12e)]<=_0x4759b2[_0x542813(0x132)];}function a241_0x40ca(){var _0x30934c=['16ucZCxZ','east','west','longitude','5EvJRRu','level','parent','computeChildMaskForTile','max','push','fromRadians','south','114156ZSUgle','_tilingScheme','_se','center','extent','129614HoBZko','computeMaximumLevelAtPosition','isTileAvailable','323352NRbjjn','computeBestAvailableLevelOverRectangle','2363480fHGNWj','splice','tilingScheme','tileXYToRectangle','_nw','149238YrWSvv','defineProperties','min','prototype','829914foUkKg','latitude','3SQugph','rectangles','length','north','_ne','_rootNodes','addAvailableTileRange','_sw','400014wFjwNv','_maximumLevel'];a241_0x40ca=function(){return _0x30934c;};return a241_0x40ca();}function findMaxLevelFromNode(_0x1dd1b9,_0x2d7737,_0x41680a){var _0x36567c=a241_0x30f483,_0x9d12c6=0x0,_0x457962=![];while(!_0x457962){var _0x2e3697=_0x2d7737['_nw']&&rectangleContainsPosition(_0x2d7737[_0x36567c(0x128)][_0x36567c(0x149)],_0x41680a),_0x2cfbb6=_0x2d7737[_0x36567c(0x133)]&&rectangleContainsPosition(_0x2d7737['_ne'][_0x36567c(0x149)],_0x41680a),_0x17e232=_0x2d7737['_sw']&&rectangleContainsPosition(_0x2d7737[_0x36567c(0x136)][_0x36567c(0x149)],_0x41680a),_0x1f5029=_0x2d7737['_se']&&rectangleContainsPosition(_0x2d7737[_0x36567c(0x147)]['extent'],_0x41680a);if(_0x2e3697+_0x2cfbb6+_0x17e232+_0x1f5029>0x1){_0x2e3697&&(_0x9d12c6=Math[_0x36567c(0x141)](_0x9d12c6,findMaxLevelFromNode(_0x2d7737,_0x2d7737[_0x36567c(0x128)],_0x41680a)));_0x2cfbb6&&(_0x9d12c6=Math[_0x36567c(0x141)](_0x9d12c6,findMaxLevelFromNode(_0x2d7737,_0x2d7737[_0x36567c(0x133)],_0x41680a)));_0x17e232&&(_0x9d12c6=Math[_0x36567c(0x141)](_0x9d12c6,findMaxLevelFromNode(_0x2d7737,_0x2d7737['_sw'],_0x41680a)));_0x1f5029&&(_0x9d12c6=Math['max'](_0x9d12c6,findMaxLevelFromNode(_0x2d7737,_0x2d7737[_0x36567c(0x147)],_0x41680a)));break;}else{if(_0x2e3697)_0x2d7737=_0x2d7737[_0x36567c(0x128)];else{if(_0x2cfbb6)_0x2d7737=_0x2d7737[_0x36567c(0x133)];else{if(_0x17e232)_0x2d7737=_0x2d7737['_sw'];else _0x1f5029?_0x2d7737=_0x2d7737[_0x36567c(0x147)]:_0x457962=!![];}}}}while(_0x2d7737!==_0x1dd1b9){var _0x11e794=_0x2d7737['rectangles'];for(var _0x366cc9=_0x11e794[_0x36567c(0x131)]-0x1;_0x366cc9>=0x0&&_0x11e794[_0x366cc9][_0x36567c(0x13e)]>_0x9d12c6;--_0x366cc9){var _0x240b35=_0x11e794[_0x366cc9];rectangleContainsPosition(_0x240b35,_0x41680a)&&(_0x9d12c6=_0x240b35['level']);}_0x2d7737=_0x2d7737[_0x36567c(0x13f)];}return _0x9d12c6;}function updateCoverageWithNode(_0x30796c,_0x532bde,_0xc69e00){var _0x559404=a241_0x30f483;if(!_0x532bde)return;var _0x83fd84,_0x42d609=![];for(_0x83fd84=0x0;_0x83fd84<_0xc69e00[_0x559404(0x131)];++_0x83fd84){_0x42d609=_0x42d609||rectanglesOverlap(_0x532bde['extent'],_0xc69e00[_0x83fd84]);}if(!_0x42d609)return;var _0x597d02=_0x532bde[_0x559404(0x130)];for(_0x83fd84=0x0;_0x83fd84<_0x597d02[_0x559404(0x131)];++_0x83fd84){var _0x1b16d0=_0x597d02[_0x83fd84];!_0x30796c[_0x1b16d0[_0x559404(0x13e)]]&&(_0x30796c[_0x1b16d0[_0x559404(0x13e)]]=_0xc69e00),_0x30796c[_0x1b16d0[_0x559404(0x13e)]]=subtractRectangle(_0x30796c[_0x1b16d0['level']],_0x1b16d0);}updateCoverageWithNode(_0x30796c,_0x532bde[_0x559404(0x128)],_0xc69e00),updateCoverageWithNode(_0x30796c,_0x532bde[_0x559404(0x133)],_0xc69e00),updateCoverageWithNode(_0x30796c,_0x532bde[_0x559404(0x136)],_0xc69e00),updateCoverageWithNode(_0x30796c,_0x532bde[_0x559404(0x147)],_0xc69e00);}function subtractRectangle(_0x2d0bd0,_0x35bf1f){var _0x3b8251=a241_0x30f483,_0x2661c2=[];for(var _0x13c08b=0x0;_0x13c08b<_0x2d0bd0[_0x3b8251(0x131)];++_0x13c08b){var _0x573183=_0x2d0bd0[_0x13c08b];!rectanglesOverlap(_0x573183,_0x35bf1f)?_0x2661c2['push'](_0x573183):(_0x573183[_0x3b8251(0x13b)]<_0x35bf1f[_0x3b8251(0x13b)]&&_0x2661c2[_0x3b8251(0x142)](new a241_0x20e266(_0x573183[_0x3b8251(0x13b)],_0x573183[_0x3b8251(0x144)],_0x35bf1f['west'],_0x573183[_0x3b8251(0x132)])),_0x573183['east']>_0x35bf1f['east']&&_0x2661c2[_0x3b8251(0x142)](new a241_0x20e266(_0x35bf1f[_0x3b8251(0x13a)],_0x573183['south'],_0x573183['east'],_0x573183['north'])),_0x573183['south']<_0x35bf1f[_0x3b8251(0x144)]&&_0x2661c2[_0x3b8251(0x142)](new a241_0x20e266(Math[_0x3b8251(0x141)](_0x35bf1f[_0x3b8251(0x13b)],_0x573183[_0x3b8251(0x13b)]),_0x573183[_0x3b8251(0x144)],Math[_0x3b8251(0x12b)](_0x35bf1f[_0x3b8251(0x13a)],_0x573183[_0x3b8251(0x13a)]),_0x35bf1f[_0x3b8251(0x144)])),_0x573183[_0x3b8251(0x132)]>_0x35bf1f[_0x3b8251(0x132)]&&_0x2661c2[_0x3b8251(0x142)](new a241_0x20e266(Math[_0x3b8251(0x141)](_0x35bf1f[_0x3b8251(0x13b)],_0x573183[_0x3b8251(0x13b)]),_0x35bf1f[_0x3b8251(0x132)],Math[_0x3b8251(0x12b)](_0x35bf1f[_0x3b8251(0x13a)],_0x573183['east']),_0x573183[_0x3b8251(0x132)])));}return _0x2661c2;}export default TileAvailability;