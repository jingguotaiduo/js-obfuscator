var a73_0x72f4c4=a73_0x2f22;(function(_0x5652d3,_0x773f20){var _0x36ef9b=a73_0x2f22,_0x55d4bc=_0x5652d3();while(!![]){try{var _0x5d111d=parseInt(_0x36ef9b(0x153))/0x1*(parseInt(_0x36ef9b(0x13b))/0x2)+parseInt(_0x36ef9b(0x135))/0x3*(parseInt(_0x36ef9b(0x133))/0x4)+-parseInt(_0x36ef9b(0x13f))/0x5*(-parseInt(_0x36ef9b(0x12d))/0x6)+parseInt(_0x36ef9b(0x14d))/0x7*(parseInt(_0x36ef9b(0x129))/0x8)+-parseInt(_0x36ef9b(0x151))/0x9+-parseInt(_0x36ef9b(0x145))/0xa+-parseInt(_0x36ef9b(0x139))/0xb*(-parseInt(_0x36ef9b(0x138))/0xc);if(_0x5d111d===_0x773f20)break;else _0x55d4bc['push'](_0x55d4bc['shift']());}catch(_0x5460ab){_0x55d4bc['push'](_0x55d4bc['shift']());}}}(a73_0x15aa,0x77e62));import a73_0x183a30 from'./BoundingSphere.js';import a73_0x2307ac from'./Cartesian3.js';import a73_0x477a47 from'./Check.js';import a73_0x82dd3b from'./defaultValue.js';import a73_0x2b8bec from'./defined.js';import a73_0x51629b from'./Ellipsoid.js';import a73_0x4789e3 from'./Rectangle.js';function EllipsoidalOccluder(_0x524d75,_0x3c3ce7){var _0xd2417d=a73_0x2f22;a73_0x477a47[_0xd2417d(0x128)][_0xd2417d(0x12f)](_0xd2417d(0x13e),_0x524d75),this[_0xd2417d(0x131)]=_0x524d75,this[_0xd2417d(0x141)]=new a73_0x2307ac(),this['_cameraPositionInScaledSpace']=new a73_0x2307ac(),this[_0xd2417d(0x14f)]=0x0,a73_0x2b8bec(_0x3c3ce7)&&(this['cameraPosition']=_0x3c3ce7);}Object[a73_0x72f4c4(0x142)](EllipsoidalOccluder[a73_0x72f4c4(0x130)],{'ellipsoid':{'get':function(){var _0x4068d4=a73_0x72f4c4;return this[_0x4068d4(0x131)];}},'cameraPosition':{'get':function(){var _0x3f743d=a73_0x72f4c4;return this[_0x3f743d(0x141)];},'set':function(_0x3d5f9){var _0x49ca84=a73_0x72f4c4,_0x292b0e=this['_ellipsoid'],_0x5d1784=_0x292b0e[_0x49ca84(0x146)](_0x3d5f9,this[_0x49ca84(0x144)]),_0x1c0e0e=a73_0x2307ac['magnitudeSquared'](_0x5d1784)-0x1;a73_0x2307ac[_0x49ca84(0x136)](_0x3d5f9,this[_0x49ca84(0x141)]),this['_cameraPositionInScaledSpace']=_0x5d1784,this['_distanceToLimbInScaledSpaceSquared']=_0x1c0e0e;}}});var scratchCartesian=new a73_0x2307ac();EllipsoidalOccluder['prototype'][a73_0x72f4c4(0x125)]=function(_0x5a39e4){var _0x405a9a=a73_0x72f4c4,_0x492b77=this[_0x405a9a(0x131)],_0x55087d=_0x492b77['transformPositionToScaledSpace'](_0x5a39e4,scratchCartesian);return isScaledSpacePointVisible(_0x55087d,this[_0x405a9a(0x144)],this['_distanceToLimbInScaledSpaceSquared']);},EllipsoidalOccluder[a73_0x72f4c4(0x130)][a73_0x72f4c4(0x14b)]=function(_0x48a5ec){var _0x24f685=a73_0x72f4c4;return isScaledSpacePointVisible(_0x48a5ec,this[_0x24f685(0x144)],this[_0x24f685(0x14f)]);};var scratchCameraPositionInScaledSpaceShrunk=new a73_0x2307ac();EllipsoidalOccluder[a73_0x72f4c4(0x130)]['isScaledSpacePointVisiblePossiblyUnderEllipsoid']=function(_0x45946a,_0x17e91e){var _0x5f32c8=a73_0x72f4c4,_0x412d73=this['_ellipsoid'],_0x7e5ef5,_0x3fd3f3;return a73_0x2b8bec(_0x17e91e)&&_0x17e91e<0x0&&_0x412d73['minimumRadius']>-_0x17e91e?(_0x3fd3f3=scratchCameraPositionInScaledSpaceShrunk,_0x3fd3f3['x']=this['_cameraPosition']['x']/(_0x412d73[_0x5f32c8(0x140)]['x']+_0x17e91e),_0x3fd3f3['y']=this[_0x5f32c8(0x141)]['y']/(_0x412d73[_0x5f32c8(0x140)]['y']+_0x17e91e),_0x3fd3f3['z']=this[_0x5f32c8(0x141)]['z']/(_0x412d73[_0x5f32c8(0x140)]['z']+_0x17e91e),_0x7e5ef5=_0x3fd3f3['x']*_0x3fd3f3['x']+_0x3fd3f3['y']*_0x3fd3f3['y']+_0x3fd3f3['z']*_0x3fd3f3['z']-0x1):(_0x3fd3f3=this[_0x5f32c8(0x144)],_0x7e5ef5=this[_0x5f32c8(0x14f)]),isScaledSpacePointVisible(_0x45946a,_0x3fd3f3,_0x7e5ef5);},EllipsoidalOccluder['prototype']['computeHorizonCullingPoint']=function(_0x3e7eb9,_0x286a97,_0x26ac73){return computeHorizonCullingPointFromPositions(this['_ellipsoid'],_0x3e7eb9,_0x286a97,_0x26ac73);};var scratchEllipsoidShrunk=a73_0x51629b[a73_0x72f4c4(0x136)](a73_0x51629b[a73_0x72f4c4(0x132)]);EllipsoidalOccluder['prototype']['computeHorizonCullingPointPossiblyUnderEllipsoid']=function(_0x51f433,_0x5ed0d9,_0x470176,_0xbd362b){var _0x13b3d2=getPossiblyShrunkEllipsoid(this['_ellipsoid'],_0x470176,scratchEllipsoidShrunk);return computeHorizonCullingPointFromPositions(_0x13b3d2,_0x51f433,_0x5ed0d9,_0xbd362b);},EllipsoidalOccluder[a73_0x72f4c4(0x130)]['computeHorizonCullingPointFromVertices']=function(_0x34a770,_0x38bdf4,_0x58f695,_0x4b8c38,_0x2bbc53){var _0x1fe79d=a73_0x72f4c4;return computeHorizonCullingPointFromVertices(this[_0x1fe79d(0x131)],_0x34a770,_0x38bdf4,_0x58f695,_0x4b8c38,_0x2bbc53);},EllipsoidalOccluder[a73_0x72f4c4(0x130)][a73_0x72f4c4(0x12b)]=function(_0x38f496,_0x44f894,_0x493ce5,_0x11cd20,_0x43e2e8,_0x40ad4a){var _0x38bc47=a73_0x72f4c4,_0x1309d2=getPossiblyShrunkEllipsoid(this[_0x38bc47(0x131)],_0x43e2e8,scratchEllipsoidShrunk);return computeHorizonCullingPointFromVertices(_0x1309d2,_0x38f496,_0x44f894,_0x493ce5,_0x11cd20,_0x40ad4a);};var subsampleScratch=[];EllipsoidalOccluder[a73_0x72f4c4(0x130)][a73_0x72f4c4(0x12c)]=function(_0xbfa0f3,_0x5a3c1e,_0x14d23e){var _0x163fd1=a73_0x72f4c4;a73_0x477a47[_0x163fd1(0x128)][_0x163fd1(0x12f)]('rectangle',_0xbfa0f3);var _0x4a377b=a73_0x4789e3[_0x163fd1(0x147)](_0xbfa0f3,_0x5a3c1e,0x0,subsampleScratch),_0x24b9c1=a73_0x183a30['fromPoints'](_0x4a377b);if(a73_0x2307ac[_0x163fd1(0x152)](_0x24b9c1[_0x163fd1(0x14c)])<0.1*_0x5a3c1e[_0x163fd1(0x12a)])return undefined;return this[_0x163fd1(0x154)](_0x24b9c1[_0x163fd1(0x14c)],_0x4a377b,_0x14d23e);};var scratchEllipsoidShrunkRadii=new a73_0x2307ac();function getPossiblyShrunkEllipsoid(_0x18b43b,_0x3077d4,_0x21aae6){var _0x3fd4df=a73_0x72f4c4;if(a73_0x2b8bec(_0x3077d4)&&_0x3077d4<0x0&&_0x18b43b[_0x3fd4df(0x12a)]>-_0x3077d4){var _0x32ff01=a73_0x2307ac['fromElements'](_0x18b43b[_0x3fd4df(0x140)]['x']+_0x3077d4,_0x18b43b[_0x3fd4df(0x140)]['y']+_0x3077d4,_0x18b43b['radii']['z']+_0x3077d4,scratchEllipsoidShrunkRadii);_0x18b43b=a73_0x51629b['fromCartesian3'](_0x32ff01,_0x21aae6);}return _0x18b43b;}function computeHorizonCullingPointFromPositions(_0x4489b7,_0x2e137a,_0xc7561b,_0xb0903){var _0x2e1084=a73_0x72f4c4;a73_0x477a47[_0x2e1084(0x128)]['object'](_0x2e1084(0x143),_0x2e137a),a73_0x477a47[_0x2e1084(0x13d)](_0x2e1084(0x13a),_0xc7561b);!a73_0x2b8bec(_0xb0903)&&(_0xb0903=new a73_0x2307ac());var _0x2bdf79=computeScaledSpaceDirectionToPoint(_0x4489b7,_0x2e137a),_0x3ed8b2=0x0;for(var _0x50b6f8=0x0,_0x221db5=_0xc7561b[_0x2e1084(0x148)];_0x50b6f8<_0x221db5;++_0x50b6f8){var _0x32d3b5=_0xc7561b[_0x50b6f8],_0x3f5a2d=computeMagnitude(_0x4489b7,_0x32d3b5,_0x2bdf79);if(_0x3f5a2d<0x0)return undefined;_0x3ed8b2=Math[_0x2e1084(0x150)](_0x3ed8b2,_0x3f5a2d);}return magnitudeToPoint(_0x2bdf79,_0x3ed8b2,_0xb0903);}var positionScratch=new a73_0x2307ac();function a73_0x15aa(){var _0x353c1e=['ZERO','magnitudeSquared','isScaledSpacePointVisible','center','14707bgOlJk','subtract','_distanceToLimbInScaledSpaceSquared','max','4884282GQrTfP','magnitude','1kHLUKv','computeHorizonCullingPoint','vertices','dot','isPointVisible','number','normalize','typeOf','1784XKTyOg','minimumRadius','computeHorizonCullingPointFromVerticesPossiblyUnderEllipsoid','computeHorizonCullingPointFromRectangle','62646wZdLgB','divideByScalar','object','prototype','_ellipsoid','UNIT_SPHERE','2476wiZGHw','cross','483oRxCWO','clone','multiplyByScalar','25548bWnUEs','3982FdPBZW','positions','729782HJZtBi','sqrt','defined','ellipsoid','25ARPseM','radii','_cameraPosition','defineProperties','directionToPoint','_cameraPositionInScaledSpace','7221720ENdube','transformPositionToScaledSpace','subsample','length'];a73_0x15aa=function(){return _0x353c1e;};return a73_0x15aa();}function computeHorizonCullingPointFromVertices(_0x5e7062,_0x3c1d2c,_0x215783,_0x5e06ec,_0x19201a,_0x3a3aba){var _0x14b2f5=a73_0x72f4c4;a73_0x477a47['typeOf'][_0x14b2f5(0x12f)](_0x14b2f5(0x143),_0x3c1d2c),a73_0x477a47[_0x14b2f5(0x13d)](_0x14b2f5(0x155),_0x215783),a73_0x477a47[_0x14b2f5(0x128)][_0x14b2f5(0x126)]('stride',_0x5e06ec);!a73_0x2b8bec(_0x3a3aba)&&(_0x3a3aba=new a73_0x2307ac());_0x5e06ec=a73_0x82dd3b(_0x5e06ec,0x3),_0x19201a=a73_0x82dd3b(_0x19201a,a73_0x2307ac[_0x14b2f5(0x149)]);var _0x532535=computeScaledSpaceDirectionToPoint(_0x5e7062,_0x3c1d2c),_0xff990c=0x0;for(var _0x2f2ca6=0x0,_0x484c27=_0x215783[_0x14b2f5(0x148)];_0x2f2ca6<_0x484c27;_0x2f2ca6+=_0x5e06ec){positionScratch['x']=_0x215783[_0x2f2ca6]+_0x19201a['x'],positionScratch['y']=_0x215783[_0x2f2ca6+0x1]+_0x19201a['y'],positionScratch['z']=_0x215783[_0x2f2ca6+0x2]+_0x19201a['z'];var _0x326d27=computeMagnitude(_0x5e7062,positionScratch,_0x532535);if(_0x326d27<0x0)return undefined;_0xff990c=Math[_0x14b2f5(0x150)](_0xff990c,_0x326d27);}return magnitudeToPoint(_0x532535,_0xff990c,_0x3a3aba);}function isScaledSpacePointVisible(_0xfb43,_0x42cbe3,_0x6a6430){var _0x51a2f1=a73_0x72f4c4,_0x2165c9=_0x42cbe3,_0x1a6500=_0x6a6430,_0x500e8e=a73_0x2307ac[_0x51a2f1(0x14e)](_0xfb43,_0x2165c9,scratchCartesian),_0x18556b=-a73_0x2307ac[_0x51a2f1(0x156)](_0x500e8e,_0x2165c9),_0x1dcf02=_0x1a6500<0x0?_0x18556b>0x0:_0x18556b>_0x1a6500&&_0x18556b*_0x18556b/a73_0x2307ac[_0x51a2f1(0x14a)](_0x500e8e)>_0x1a6500;return!_0x1dcf02;}var scaledSpaceScratch=new a73_0x2307ac(),directionScratch=new a73_0x2307ac();function computeMagnitude(_0x33beca,_0x49d2cf,_0x5401ba){var _0x92ddd4=a73_0x72f4c4,_0x2dae9b=_0x33beca[_0x92ddd4(0x146)](_0x49d2cf,scaledSpaceScratch),_0x2f1055=a73_0x2307ac[_0x92ddd4(0x14a)](_0x2dae9b),_0x2e3f30=Math[_0x92ddd4(0x13c)](_0x2f1055),_0x10eb3a=a73_0x2307ac[_0x92ddd4(0x12e)](_0x2dae9b,_0x2e3f30,directionScratch);_0x2f1055=Math['max'](0x1,_0x2f1055),_0x2e3f30=Math['max'](0x1,_0x2e3f30);var _0x96109b=a73_0x2307ac['dot'](_0x10eb3a,_0x5401ba),_0x5073cf=a73_0x2307ac[_0x92ddd4(0x152)](a73_0x2307ac[_0x92ddd4(0x134)](_0x10eb3a,_0x5401ba,_0x10eb3a)),_0x35ab19=0x1/_0x2e3f30,_0x2c04b8=Math[_0x92ddd4(0x13c)](_0x2f1055-0x1)*_0x35ab19;return 0x1/(_0x96109b*_0x35ab19-_0x5073cf*_0x2c04b8);}function magnitudeToPoint(_0x2242c4,_0x2890ad,_0x19ee7b){var _0x4b886c=a73_0x72f4c4;if(_0x2890ad<=0x0||_0x2890ad===0x1/0x0||_0x2890ad!==_0x2890ad)return undefined;return a73_0x2307ac[_0x4b886c(0x137)](_0x2242c4,_0x2890ad,_0x19ee7b);}var directionToPointScratch=new a73_0x2307ac();function a73_0x2f22(_0x43b150,_0x1a60f7){var _0x15aace=a73_0x15aa();return a73_0x2f22=function(_0x2f22c5,_0x187ddb){_0x2f22c5=_0x2f22c5-0x125;var _0x3f83e5=_0x15aace[_0x2f22c5];return _0x3f83e5;},a73_0x2f22(_0x43b150,_0x1a60f7);}function computeScaledSpaceDirectionToPoint(_0x18c7b4,_0xb27770){var _0x5a2e9c=a73_0x72f4c4;if(a73_0x2307ac['equals'](_0xb27770,a73_0x2307ac[_0x5a2e9c(0x149)]))return _0xb27770;return _0x18c7b4[_0x5a2e9c(0x146)](_0xb27770,directionToPointScratch),a73_0x2307ac[_0x5a2e9c(0x127)](directionToPointScratch,directionToPointScratch);}export default EllipsoidalOccluder;