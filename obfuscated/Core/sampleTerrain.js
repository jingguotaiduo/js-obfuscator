function a221_0x3212(){var _0x31abaf=['otherwise','21352DgXqyh','all','readyPromise','then','terrainProvider','requestTileGeometry','number','4136241WrXmfP','280TPjIYM','2930975nGiXdv','typeOf','push','defined','25962390FmlyOz','latitude','positions','500291FWOsQJ','797940aDnTFr','resolve','4IJUYSl','toString','length','tilingScheme','2320518TIwKBZ','level'];a221_0x3212=function(){return _0x31abaf;};return a221_0x3212();}(function(_0x5933ae,_0x3afa07){var _0x54496c=a221_0x255b,_0x3b31be=_0x5933ae();while(!![]){try{var _0x4a280c=-parseInt(_0x54496c(0x164))/0x1+-parseInt(_0x54496c(0x165))/0x2+parseInt(_0x54496c(0x15b))/0x3*(-parseInt(_0x54496c(0x167))/0x4)+parseInt(_0x54496c(0x15d))/0x5+-parseInt(_0x54496c(0x16b))/0x6+parseInt(_0x54496c(0x15c))/0x7*(-parseInt(_0x54496c(0x154))/0x8)+parseInt(_0x54496c(0x161))/0x9;if(_0x4a280c===_0x3afa07)break;else _0x3b31be['push'](_0x3b31be['shift']());}catch(_0x5280e3){_0x3b31be['push'](_0x3b31be['shift']());}}}(a221_0x3212,0xaabf8));import a221_0x240e62 from'../ThirdParty/when.js';import a221_0x8ea0e from'./Check.js';function sampleTerrain(_0x1b7049,_0x5c325a,_0x1f0bd3){var _0x429c77=a221_0x255b;return a221_0x8ea0e[_0x429c77(0x15e)]['object'](_0x429c77(0x158),_0x1b7049),a221_0x8ea0e[_0x429c77(0x15e)][_0x429c77(0x15a)](_0x429c77(0x16c),_0x5c325a),a221_0x8ea0e[_0x429c77(0x160)](_0x429c77(0x163),_0x1f0bd3),_0x1b7049[_0x429c77(0x156)][_0x429c77(0x157)](function(){return doSampling(_0x1b7049,_0x5c325a,_0x1f0bd3);});}function doSampling(_0x1c7688,_0x1191b1,_0x30c65d){var _0x3c2573=a221_0x255b,_0x417b9d=_0x1c7688[_0x3c2573(0x16a)],_0x58adf3,_0x218857=[],_0x1d2d65={};for(_0x58adf3=0x0;_0x58adf3<_0x30c65d['length'];++_0x58adf3){var _0x16016e=_0x417b9d['positionToTileXY'](_0x30c65d[_0x58adf3],_0x1191b1),_0x237f62=_0x16016e[_0x3c2573(0x168)]();if(!_0x1d2d65['hasOwnProperty'](_0x237f62)){var _0xf1271={'x':_0x16016e['x'],'y':_0x16016e['y'],'level':_0x1191b1,'tilingScheme':_0x417b9d,'terrainProvider':_0x1c7688,'positions':[]};_0x1d2d65[_0x237f62]=_0xf1271,_0x218857[_0x3c2573(0x15f)](_0xf1271);}_0x1d2d65[_0x237f62][_0x3c2573(0x163)][_0x3c2573(0x15f)](_0x30c65d[_0x58adf3]);}var _0x36aa08=[];for(_0x58adf3=0x0;_0x58adf3<_0x218857['length'];++_0x58adf3){var _0x134e8d=_0x218857[_0x58adf3],_0x19f9c1=_0x134e8d[_0x3c2573(0x158)][_0x3c2573(0x159)](_0x134e8d['x'],_0x134e8d['y'],_0x134e8d['level']),_0x2fe97f=_0x19f9c1['then'](createInterpolateFunction(_0x134e8d))[_0x3c2573(0x16d)](createMarkFailedFunction(_0x134e8d));_0x36aa08[_0x3c2573(0x15f)](_0x2fe97f);}return a221_0x240e62[_0x3c2573(0x155)](_0x36aa08,function(){return _0x30c65d;});}function interpolateAndAssignHeight(_0x265934,_0x397597,_0x3131d1){var _0x23aa69=a221_0x255b,_0xfe4dd4=_0x397597['interpolateHeight'](_0x3131d1,_0x265934['longitude'],_0x265934[_0x23aa69(0x162)]);if(_0xfe4dd4===undefined)return![];return _0x265934['height']=_0xfe4dd4,!![];}function a221_0x255b(_0x48d882,_0xcb21ca){var _0x3212f2=a221_0x3212();return a221_0x255b=function(_0x255b10,_0x493109){_0x255b10=_0x255b10-0x154;var _0xfc856f=_0x3212f2[_0x255b10];return _0xfc856f;},a221_0x255b(_0x48d882,_0xcb21ca);}function createInterpolateFunction(_0x3bd1ac){var _0x3a4b8c=a221_0x255b,_0xaf870b=_0x3bd1ac[_0x3a4b8c(0x163)],_0x438a76=_0x3bd1ac[_0x3a4b8c(0x16a)]['tileXYToRectangle'](_0x3bd1ac['x'],_0x3bd1ac['y'],_0x3bd1ac['level']);return function(_0x106e96){var _0x3a488a=_0x3a4b8c,_0x50cf9e=![];for(var _0x18e7b2=0x0;_0x18e7b2<_0xaf870b[_0x3a488a(0x169)];++_0x18e7b2){var _0x1de27e=_0xaf870b[_0x18e7b2],_0x2cd9b5=interpolateAndAssignHeight(_0x1de27e,_0x106e96,_0x438a76);if(!_0x2cd9b5){_0x50cf9e=!![];break;}}if(!_0x50cf9e)return a221_0x240e62[_0x3a488a(0x166)]();return _0x106e96['createMesh']({'tilingScheme':_0x3bd1ac[_0x3a488a(0x16a)],'x':_0x3bd1ac['x'],'y':_0x3bd1ac['y'],'level':_0x3bd1ac[_0x3a488a(0x16c)],'throttle':![]})[_0x3a488a(0x157)](function(){var _0x2fab25=_0x3a488a;for(var _0x188130=0x0;_0x188130<_0xaf870b[_0x2fab25(0x169)];++_0x188130){var _0x3c5ea7=_0xaf870b[_0x188130];interpolateAndAssignHeight(_0x3c5ea7,_0x106e96,_0x438a76);}});};}function createMarkFailedFunction(_0x3b5882){var _0x4276c8=a221_0x255b,_0x586e62=_0x3b5882[_0x4276c8(0x163)];return function(){var _0x21ee04=_0x4276c8;for(var _0x3c91ac=0x0;_0x3c91ac<_0x586e62[_0x21ee04(0x169)];++_0x3c91ac){var _0x4653dd=_0x586e62[_0x3c91ac];_0x4653dd['height']=undefined;}};}export default sampleTerrain;